<!doctype html><html lang="en"><head><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>系统管理员需知的 16 个 iptables 使用技巧 - 归墟星火集 又一个 LinuxCN 站点</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 又一个 LinuxCN 站点 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">系统管理员需知的 16 个 iptables 使用技巧</h1><span class="post-date">2018-10-22</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E7%B3%BB%E7%BB%9F%E8%BF%90%E7%BB%B4/">系统运维</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/iptables/">iptables</a></div><div class="post-content"><blockquote><p>iptables 是一款控制系统进出流量的强大配置工具。</p></blockquote><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201810/22/224826corrbcmnpruin488.jpg"></p><p>现代 Linux 内核带有一个叫 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Netfilter">Netfilter</a> 的数据包过滤框架。Netfilter 提供了允许、丢弃以及修改等操作来控制进出系统的流量数据包。基于 Netfilter 框架的用户层命令行工具 <code>iptables</code> 提供了强大的防火墙配置功能，允许你添加规则来构建防火墙策略。<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Iptables">iptables</a> 丰富复杂的功能以及其巴洛克式命令语法可能让人难以驾驭。我们就来探讨一下其中的一些功能，提供一些系统管理员解决某些问题需要的使用技巧。</p><h3 id="避免封锁自己"><a href="#避免封锁自己" class="headerlink" title="避免封锁自己"></a>避免封锁自己</h3><p>应用场景：假设你将对公司服务器上的防火墙规则进行修改，你需要避免封锁你自己以及其他同事的情况（这将会带来一定时间和金钱的损失，也许一旦发生马上就有部门打电话找你了）</p><h4 id="技巧-1-开始之前先备份一下-iptables-配置文件。"><a href="#技巧-1-开始之前先备份一下-iptables-配置文件。" class="headerlink" title="技巧 #1: 开始之前先备份一下 iptables 配置文件。"></a>技巧 #1: 开始之前先备份一下 iptables 配置文件。</h4><p>用如下命令备份配置文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/iptables-save &gt; /root/iptables-works</span><br></pre></td></tr></table></figure><h4 id="技巧-2-更妥当的做法，给文件加上时间戳。"><a href="#技巧-2-更妥当的做法，给文件加上时间戳。" class="headerlink" title="技巧 #2: 更妥当的做法，给文件加上时间戳。"></a>技巧 #2: 更妥当的做法，给文件加上时间戳。</h4><p>用如下命令加时间戳：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/iptables-save &gt; /root/iptables-works-`date +%F`</span><br></pre></td></tr></table></figure><p>然后你就可以生成如下名字的文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/root/iptables-works-2018-09-11</span><br></pre></td></tr></table></figure><p>这样万一使得系统不工作了，你也可以很快的利用备份文件恢复原状：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/sbin/iptables-restore &lt; /root/iptables-works-2018-09-11</span><br></pre></td></tr></table></figure><h4 id="技巧-3-每次创建-iptables-配置文件副本时，都创建一个指向最新的文件的链接。"><a href="#技巧-3-每次创建-iptables-配置文件副本时，都创建一个指向最新的文件的链接。" class="headerlink" title="技巧 #3: 每次创建 iptables 配置文件副本时，都创建一个指向最新的文件的链接。"></a>技巧 #3: 每次创建 iptables 配置文件副本时，都创建一个指向最新的文件的链接。</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln –s /root/iptables-works-`date +%F` /root/iptables-works-latest</span><br></pre></td></tr></table></figure><h4 id="技巧-4-将特定规则放在策略顶部，底部放置通用规则。"><a href="#技巧-4-将特定规则放在策略顶部，底部放置通用规则。" class="headerlink" title="技巧 #4: 将特定规则放在策略顶部，底部放置通用规则。"></a>技巧 #4: 将特定规则放在策略顶部，底部放置通用规则。</h4><p>避免在策略顶部使用如下的一些通用规则：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -p tcp --dport 22 -j DROP</span><br></pre></td></tr></table></figure><p>你在规则中指定的条件越多，封锁自己的可能性就越小。不要使用上面非常通用的规则，而是使用如下的规则：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -p tcp --dport 22 –s 10.0.0.0/8 –d 192.168.100.101 -j DROP</span><br></pre></td></tr></table></figure><p>此规则表示在 <code>INPUT</code> 链尾追加一条新规则，将源地址为 <code>10.0.0.0/8</code>、 目的地址是 <code>192.168.100.101</code>、目的端口号是 <code>22</code> （<code>--dport 22</code> ） 的 TCP（<code>-p tcp</code> ）数据包通通丢弃掉。</p><p>还有很多方法可以设置更具体的规则。例如，使用 <code>-i eth0</code> 将会限制这条规则作用于 <code>eth0</code> 网卡，对 <code>eth1</code> 网卡则不生效。</p><h4 id="技巧-5-在策略规则顶部将你的-IP-列入白名单。"><a href="#技巧-5-在策略规则顶部将你的-IP-列入白名单。" class="headerlink" title="技巧 #5: 在策略规则顶部将你的 IP 列入白名单。"></a>技巧 #5: 在策略规则顶部将你的 IP 列入白名单。</h4><p>这是一个有效地避免封锁自己的设置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -s &lt;your IP&gt; -j ACCEPT</span><br></pre></td></tr></table></figure><p>你需要将该规则添加到策略首位置。<code>-I</code> 表示则策略首部插入规则，<code>-A</code> 表示在策略尾部追加规则。</p><h4 id="技巧-6-理解现有策略中的所有规则。"><a href="#技巧-6-理解现有策略中的所有规则。" class="headerlink" title="技巧 #6: 理解现有策略中的所有规则。"></a>技巧 #6: 理解现有策略中的所有规则。</h4><p>不犯错就已经成功了一半。如果你了解 iptables 策略背后的工作原理，使用起来更为得心应手。如果有必要，可以绘制流程图来理清数据包的走向。还要记住：策略的预期效果和实际效果可能完全是两回事。</p><h3 id="设置防火墙策略"><a href="#设置防火墙策略" class="headerlink" title="设置防火墙策略"></a>设置防火墙策略</h3><p>应用场景：你希望给工作站配置具有限制性策略的防火墙。</p><h4 id="技巧-1-设置默认规则为丢弃"><a href="#技巧-1-设置默认规则为丢弃" class="headerlink" title="技巧 #1: 设置默认规则为丢弃"></a>技巧 #1: 设置默认规则为丢弃</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Set a default policy of DROP</span><br><span class="line">*filter</span><br><span class="line">:INPUT DROP [0:0]</span><br><span class="line">:FORWARD DROP [0:0]</span><br><span class="line">:OUTPUT DROP [0:0]</span><br></pre></td></tr></table></figure><h4 id="技巧-2-将用户完成工作所需的最少量服务设置为允许"><a href="#技巧-2-将用户完成工作所需的最少量服务设置为允许" class="headerlink" title="技巧 #2: 将用户完成工作所需的最少量服务设置为允许"></a>技巧 #2: 将用户完成工作所需的最少量服务设置为允许</h4><p>该策略需要允许工作站能通过 DHCP（<code>-p udp --dport 67:68 -sport 67:68</code>）来获取 IP 地址、子网掩码以及其他一些信息。对于远程操作，需要允许 SSH 服务（<code>-dport 22</code>），邮件服务（<code>--dport 25</code>），DNS 服务（<code>--dport 53</code>），ping 功能（<code>-p icmp</code>），NTP 服务（<code>--dport 123 --sport 123</code>）以及 HTTP 服务（<code>-dport 80</code>）和 HTTPS 服务（<code>--dport 443</code>）。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"># Set a default policy of DROP</span><br><span class="line">*filter</span><br><span class="line">:INPUT DROP [0:0]</span><br><span class="line">:FORWARD DROP [0:0]</span><br><span class="line">:OUTPUT DROP [0:0]</span><br><span class="line"></span><br><span class="line"># Accept any related or established connections</span><br><span class="line">-I INPUT  1 -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line">-I OUTPUT 1 -m state --state RELATED,ESTABLISHED -j ACCEPT</span><br><span class="line"></span><br><span class="line"># Allow all traffic on the loopback interface</span><br><span class="line">-A INPUT -i lo -j ACCEPT</span><br><span class="line">-A OUTPUT -o lo -j ACCEPT</span><br><span class="line"></span><br><span class="line"># Allow outbound DHCP request</span><br><span class="line">-A OUTPUT –o eth0 -p udp --dport 67:68 --sport 67:68 -j ACCEPT</span><br><span class="line"></span><br><span class="line"># Allow inbound SSH</span><br><span class="line">-A INPUT -i eth0 -p tcp -m tcp --dport 22 -m state --state NEW  -j ACCEPT</span><br><span class="line"></span><br><span class="line"># Allow outbound email</span><br><span class="line">-A OUTPUT -i eth0 -p tcp -m tcp --dport 25 -m state --state NEW  -j ACCEPT</span><br><span class="line"></span><br><span class="line"># Outbound DNS lookups</span><br><span class="line">-A OUTPUT -o eth0 -p udp -m udp --dport 53 -j ACCEPT</span><br><span class="line"></span><br><span class="line"># Outbound PING requests</span><br><span class="line">-A OUTPUT –o eth0 -p icmp -j ACCEPT</span><br><span class="line"></span><br><span class="line"># Outbound Network Time Protocol (NTP) requests</span><br><span class="line">-A OUTPUT –o eth0 -p udp --dport 123 --sport 123 -j ACCEPT</span><br><span class="line"></span><br><span class="line"># Outbound HTTP</span><br><span class="line">-A OUTPUT -o eth0 -p tcp -m tcp --dport 80 -m state --state NEW -j ACCEPT</span><br><span class="line">-A OUTPUT -o eth0 -p tcp -m tcp --dport 443 -m state --state NEW -j ACCEPT</span><br><span class="line"></span><br><span class="line">COMMIT</span><br></pre></td></tr></table></figure><h3 id="限制-IP-地址范围"><a href="#限制-IP-地址范围" class="headerlink" title="限制 IP 地址范围"></a>限制 IP 地址范围</h3><p>应用场景：贵公司的 CEO 认为员工在 Facebook 上花费过多的时间，需要采取一些限制措施。CEO 命令下达给 CIO，CIO 命令 CISO，最终任务由你来执行。你决定阻止一切到 Facebook 的访问连接。首先你使用 <code>host</code> 或者 <code>whois</code> 命令来获取 Facebook 的 IP 地址。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">host -t a www.facebook.com</span><br><span class="line">www.facebook.com is an alias for star.c10r.facebook.com.</span><br><span class="line">star.c10r.facebook.com has address 31.13.65.17</span><br><span class="line">whois 31.13.65.17 | grep inetnum</span><br><span class="line">inetnum:        31.13.64.0 - 31.13.127.255</span><br></pre></td></tr></table></figure><p>然后使用 <a target="_blank" rel="noopener" href="http://www.ipaddressguide.com/cidr">CIDR 到 IPv4 转换</a> 页面来将其转换为 CIDR 表示法。然后你得到 <code>31.13.64.0/18</code> 的地址。输入以下命令来阻止对 Facebook 的访问：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A OUTPUT -p tcp -i eth0 –o eth1 –d 31.13.64.0/18 -j DROP</span><br></pre></td></tr></table></figure><h3 id="按时间规定做限制-场景1"><a href="#按时间规定做限制-场景1" class="headerlink" title="按时间规定做限制 - 场景1"></a>按时间规定做限制 - 场景1</h3><p>应用场景：公司员工强烈反对限制一切对 Facebook 的访问，这导致了 CEO 放宽了要求（考虑到员工的反对以及他的助理提醒说她负责更新他的 Facebook 页面）。然后 CEO 决定允许在午餐时间访问 Facebook（中午 12 点到下午 1 点之间）。假设默认规则是丢弃，使用 iptables 的时间功能便可以实现。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables –A OUTPUT -p tcp -m multiport --dport http,https -i eth0 -o eth1 -m time --timestart 12:00 –timestop 13:00 –d 31.13.64.0/18 -j ACCEPT</span><br></pre></td></tr></table></figure><p>该命令中指定在中午12点（<code>--timestart 12:00</code>）到下午 1 点（<code>--timestop 13:00</code>）之间允许（<code>-j ACCEPT</code>）到 Facebook.com （<code>-d [31.13.64.0/18][5]</code>）的 http 以及 https （<code>-m multiport --dport http,https</code>）的访问。</p><h3 id="按时间规定做限制-场景2"><a href="#按时间规定做限制-场景2" class="headerlink" title="按时间规定做限制 - 场景2"></a>按时间规定做限制 - 场景2</h3><p>应用场景：在计划系统维护期间，你需要设置凌晨 2 点到 3 点之间拒绝所有的 TCP 和 UDP 访问，这样维护任务就不会受到干扰。使用两个 iptables 规则可实现：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -p tcp -m time --timestart 02:00 --timestop 03:00 -j DROP</span><br><span class="line">iptables -A INPUT -p udp -m time --timestart 02:00 --timestop 03:00 -j DROP</span><br></pre></td></tr></table></figure><p>该规则禁止（<code>-j DROP</code>）在凌晨2点（<code>--timestart 02:00</code>）到凌晨3点（<code>--timestop 03:00</code>）之间的 TCP 和 UDP （<code>-p tcp and -p udp</code>）的数据进入（<code>-A INPUT</code>）访问。</p><h3 id="限制连接数量"><a href="#限制连接数量" class="headerlink" title="限制连接数量"></a>限制连接数量</h3><p>应用场景：你的 web 服务器有可能受到来自世界各地的 DoS 攻击，为了避免这些攻击，你可以限制单个 IP 地址到你的 web 服务器创建连接的数量：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables –A INPUT –p tcp –syn -m multiport -–dport http,https –m connlimit -–connlimit-above 20 –j REJECT -–reject-with-tcp-reset</span><br></pre></td></tr></table></figure><p>分析一下上面的命令。如果单个主机在一分钟之内新建立（<code>-p tcp -syn</code>）超过 20 个（<code>-connlimit-above 20</code>）到你的 web 服务器（<code>--dport http,https</code>）的连接，服务器将拒绝（<code>-j REJECT</code>）建立新的连接，然后通知对方新建连接被拒绝（<code>--reject-with-tcp-reset</code>）。</p><h3 id="监控-iptables-规则"><a href="#监控-iptables-规则" class="headerlink" title="监控 iptables 规则"></a>监控 iptables 规则</h3><p>应用场景：由于数据包会遍历链中的规则，iptables 遵循 “首次匹配获胜” 的原则，因此经常匹配的规则应该靠近策略的顶部，而不太频繁匹配的规则应该接近底部。 你怎么知道哪些规则使用最多或最少，可以在顶部或底部附近监控？</p><h4 id="技巧-1-查看规则被访问了多少次"><a href="#技巧-1-查看规则被访问了多少次" class="headerlink" title="技巧 #1: 查看规则被访问了多少次"></a>技巧 #1: 查看规则被访问了多少次</h4><p>使用命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -L -v -n –line-numbers</span><br></pre></td></tr></table></figure><p>用 <code>-L</code> 选项列出链中的所有规则。因为没有指定具体哪条链，所有链规则都会被输出，使用 <code>-v</code> 选项显示详细信息，<code>-n</code> 选项则显示数字格式的数据包和字节计数器，每个规则开头的数值表示该规则在链中的位置。</p><p>根据数据包和字节计数的结果，你可以将访问频率最高的规则放到顶部，将访问频率最低的规则放到底部。</p><h4 id="技巧-2-删除不必要的规则"><a href="#技巧-2-删除不必要的规则" class="headerlink" title="技巧 #2: 删除不必要的规则"></a>技巧 #2: 删除不必要的规则</h4><p>哪条规则从来没有被访问过？这些可以被清除掉。用如下命令查看：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -nvL | grep -v &quot;0     0&quot;</span><br></pre></td></tr></table></figure><p>注意：两个数字 0 之间不是 Tab 键，而是 <strong>5</strong> 个空格。</p><h4 id="技巧-3-监控正在发生什么"><a href="#技巧-3-监控正在发生什么" class="headerlink" title="技巧 #3: 监控正在发生什么"></a>技巧 #3: 监控正在发生什么</h4><p>可能你也想像使用 <code>top</code> 命令一样来实时监控 iptables 的情况。使用如下命令来动态监视 iptables 中的活动，并仅显示正在遍历的规则：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch --interval=5 &#x27;iptables -nvL | grep -v &quot;0     0&quot;&#x27;</span><br></pre></td></tr></table></figure><p><code>watch</code> 命令通过参数 <code>iptables -nvL | grep -v “0 0“</code> 每隔 5 秒输出 iptables 的动态。这条命令允许你查看数据包和字节计数的变化。</p><h3 id="输出日志"><a href="#输出日志" class="headerlink" title="输出日志"></a>输出日志</h3><p>应用场景：经理觉得你这个防火墙员工的工作质量杠杠的，但如果能有网络流量活动日志最好了。有时候这比写一份有关工作的报告更有效。</p><p>使用工具 <a target="_blank" rel="noopener" href="http://fwlogwatch.inside-security.de/">FWLogwatch</a> 基于 iptables 防火墙记录来生成日志报告。FWLogwatch 工具支持很多形式的报告并且也提供了很多分析功能。它生成的日志以及月报告使得管理员可以节省大量时间并且还更好地管理网络，甚至减少未被注意的潜在攻击。</p><p>这里是一个 FWLogwatch 生成的报告示例：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201810/22/224854xwwfw1ct31w6u411.png"></p><h3 id="不要满足于允许和丢弃规则"><a href="#不要满足于允许和丢弃规则" class="headerlink" title="不要满足于允许和丢弃规则"></a>不要满足于允许和丢弃规则</h3><p>本文中已经涵盖了 iptables 的很多方面，从避免封锁自己、配置 iptables 防火墙以及监控 iptables 中的活动等等方面介绍了 iptables。你可以从这里开始探索 iptables 甚至获取更多的使用技巧。</p><hr><p>via: <a target="_blank" rel="noopener" href="https://opensource.com/article/18/10/iptables-tips-and-tricks">https://opensource.com/article/18/10/iptables-tips-and-tricks</a></p><p>作者：<a target="_blank" rel="noopener" href="https://opensource.com/users/greptile">Gary Smith</a> 选题：<a target="_blank" rel="noopener" href="https://github.com/lujun9972">lujun9972</a> 译者：<a target="_blank" rel="noopener" href="https://github.com/jrglinux">jrg</a> 校对：<a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p><p>本文由 <a target="_blank" rel="noopener" href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a target="_blank" rel="noopener" href="https://linux.cn/">Linux中国</a> 荣誉推出</p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p></div></div></body></html>