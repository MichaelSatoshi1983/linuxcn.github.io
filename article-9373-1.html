<!doctype html><html lang="en"><head><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>每个系统管理员都要知道的 30 个 Linux 系统监控工具 - 归墟星火集 又一个 LinuxCN 站点</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 又一个 LinuxCN 站点 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">每个系统管理员都要知道的 30 个 Linux 系统监控工具</h1><span class="post-date">2018-02-23</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E5%88%86%E4%BA%AB/">分享</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/%E7%9B%91%E6%8E%A7/">监控</a></div><div class="post-content"><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003604wd2215mdgd5i1g2y.jpg"></p><p>您需要监控 Linux 服务器的性能吗？试试用这些内置命令和附加工具吧！大多数 Linux 发行版都附带了大量的监控工具。这些工具提供了获取系统活动的相关指标。您可以使用这些工具来查找性能问题的可能原因。本文提到的是一些基本的命令，用于系统分析和服务器调试等，例如：</p><ol><li>找出系统瓶颈</li><li>磁盘（存储）瓶颈</li><li>CPU 和内存瓶颈</li><li>网络瓶颈</li></ol><h3 id="1-top-进程活动监控命令"><a href="#1-top-进程活动监控命令" class="headerlink" title="1. top - 进程活动监控命令"></a>1. top - 进程活动监控命令</h3><p><code>top</code> 命令会显示 Linux 的进程。它提供了一个运行中系统的实时动态视图，即实际的进程活动。默认情况下，它显示在服务器上运行的 CPU 占用率最高的任务，并且每五秒更新一次。</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003617yrapgeguzhzegrjm.jpg"></p><p><em>图 01：Linux top 命令</em></p><h4 id="top-的常用快捷键"><a href="#top-的常用快捷键" class="headerlink" title="top 的常用快捷键"></a>top 的常用快捷键</h4><p>常用快捷键列表：</p><table><thead><tr><th>快捷键</th><th>用法</th></tr></thead><tbody><tr><td><code>t</code></td><td>是否显示汇总信息</td></tr><tr><td><code>m</code></td><td>是否显示内存信息</td></tr><tr><td><code>A</code></td><td>根据各种系统资源的利用率对进程进行排序，有助于快速识别系统中性能不佳的任务。</td></tr><tr><td><code>f</code></td><td>进入 <code>top</code> 的交互式配置屏幕，用于根据特定的需求而设置 <code>top</code> 的显示。</td></tr><tr><td><code>o</code></td><td>交互式地调整 <code>top</code> 每一列的顺序。</td></tr><tr><td><code>r</code></td><td>调整优先级（<code>renice</code>）</td></tr><tr><td><code>k</code></td><td>杀掉进程（<code>kill</code>）</td></tr><tr><td><code>z</code></td><td>切换彩色或黑白模式</td></tr></tbody></table><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/how-do-i-find-out-linux-cpu-utilization.html">Linux 如何查看 CPU 利用率？</a></p><h3 id="2-vmstat-虚拟内存统计"><a href="#2-vmstat-虚拟内存统计" class="headerlink" title="2. vmstat - 虚拟内存统计"></a>2. vmstat - 虚拟内存统计</h3><p><code>vmstat</code> 命令报告有关进程、内存、分页、块 IO、中断和 CPU 活动等信息。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># vmstat 3</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------</span><br><span class="line"> r b swpd free buff cache si so bi bo in cs us sy id wa st</span><br><span class="line"> 0 0 0 2540988 522188 5130400 0 0 2 32 4 2 4 1 96 0 0</span><br><span class="line"> 1 0 0 2540988 522188 5130400 0 0 0 720 1199 665 1 0 99 0 0</span><br><span class="line"> 0 0 0 2540956 522188 5130400 0 0 0 0 1151 1569 4 1 95 0 0</span><br><span class="line"> 0 0 0 2540956 522188 5130500 0 0 0 6 1117 439 1 0 99 0 0</span><br><span class="line"> 0 0 0 2540940 522188 5130512 0 0 0 536 1189 932 1 0 98 0 0</span><br><span class="line"> 0 0 0 2538444 522188 5130588 0 0 0 0 1187 1417 4 1 96 0 0</span><br><span class="line"> 0 0 0 2490060 522188 5130640 0 0 0 18 1253 1123 5 1 94 0 0</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示-Slab-缓存的利用率"><a href="#显示-Slab-缓存的利用率" class="headerlink" title="显示 Slab 缓存的利用率"></a>显示 Slab 缓存的利用率</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># vmstat -m</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="获取有关活动和非活动内存页面的信息"><a href="#获取有关活动和非活动内存页面的信息" class="headerlink" title="获取有关活动和非活动内存页面的信息"></a>获取有关活动和非活动内存页面的信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># vmstat -a</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/linux-resource-utilization-to-detect-system-bottlenecks.html">如何查看 Linux 的资源利用率从而找到系统瓶颈？</a></p><h3 id="3-w-找出登录的用户以及他们在做什么"><a href="#3-w-找出登录的用户以及他们在做什么" class="headerlink" title="3. w - 找出登录的用户以及他们在做什么"></a>3. w - 找出登录的用户以及他们在做什么</h3><p><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/unix-linux-w-command-examples-syntax-usage-2/" title="See Linux&#x2F;Unix w command examples for more info">w 命令</a> 显示了当前登录在该系统上的用户及其进程。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># w username</span><br><span class="line"># w vivek</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> 17:58:47 up 5 days, 20:28, 2 users, load average: 0.36, 0.26, 0.24</span><br><span class="line">USER TTY FROM LOGIN@ IDLE JCPU PCPU WHAT</span><br><span class="line">root pts/0 10.1.3.145 14:55 5.00s 0.04s 0.02s vim /etc/resolv.conf</span><br><span class="line">root pts/1 10.1.3.145 17:43 0.00s 0.03s 0.00s w</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-uptime-Linux-系统运行了多久"><a href="#4-uptime-Linux-系统运行了多久" class="headerlink" title="4. uptime - Linux 系统运行了多久"></a>4. uptime - Linux 系统运行了多久</h3><p><code>uptime</code> 命令可以用来查看服务器运行了多长时间：当前时间、已运行的时间、当前登录的用户连接数，以及过去 1 分钟、5 分钟和 15 分钟的系统负载平均值。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># uptime</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">18:02:41 up 41 days, 23:42, 1 user, load average: 0.00, 0.00, 0.00</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>1</code> 可以被认为是最佳负载值。不同的系统会有不同的负载：对于单核 CPU 系统来说，<code>1</code> 到 <code>3</code> 的负载值是可以接受的；而对于 SMP（对称多处理）系统来说，负载可以是 <code>6</code> 到 <code>10</code>。</p><h3 id="5-ps-显示系统进程"><a href="#5-ps-显示系统进程" class="headerlink" title="5. ps - 显示系统进程"></a>5. ps - 显示系统进程</h3><p><code>ps</code> 命令显示当前运行的进程。要显示所有的进程，请使用 <code>-A</code> 或 <code>-e</code> 选项：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -A</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"> PID TTY TIME CMD</span><br><span class="line"> 1 ? 00:00:02 init</span><br><span class="line"> 2 ? 00:00:02 migration/0</span><br><span class="line"> 3 ? 00:00:01 ksoftirqd/0</span><br><span class="line"> 4 ? 00:00:00 watchdog/0</span><br><span class="line"> 5 ? 00:00:00 migration/1</span><br><span class="line"> 6 ? 00:00:15 ksoftirqd/1</span><br><span class="line">....</span><br><span class="line">.....</span><br><span class="line"> 4881 ? 00:53:28 java</span><br><span class="line"> 4885 tty1 00:00:00 mingetty</span><br><span class="line"> 4886 tty2 00:00:00 mingetty</span><br><span class="line"> 4887 tty3 00:00:00 mingetty</span><br><span class="line"> 4888 tty4 00:00:00 mingetty</span><br><span class="line"> 4891 tty5 00:00:00 mingetty</span><br><span class="line"> 4892 tty6 00:00:00 mingetty</span><br><span class="line"> 4893 ttyS1 00:00:00 agetty</span><br><span class="line">12853 ? 00:00:00 cifsoplockd</span><br><span class="line">12854 ? 00:00:00 cifsdnotifyd</span><br><span class="line">14231 ? 00:10:34 lighttpd</span><br><span class="line">14232 ? 00:00:00 php-cgi</span><br><span class="line">54981 pts/0 00:00:00 vim</span><br><span class="line">55465 ? 00:00:00 php-cgi</span><br><span class="line">55546 ? 00:00:00 bind9-snmp-stat</span><br><span class="line">55704 pts/1 00:00:00 ps</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>ps</code> 与 <code>top</code> 类似，但它提供了更多的信息。</p><h4 id="显示长输出格式"><a href="#显示长输出格式" class="headerlink" title="显示长输出格式"></a>显示长输出格式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -Al</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>显示完整输出格式（它将显示传递给进程的命令行参数）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -AlF</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示线程（轻量级进程（LWP）和线程的数量（NLWP））"><a href="#显示线程（轻量级进程（LWP）和线程的数量（NLWP））" class="headerlink" title="显示线程（轻量级进程（LWP）和线程的数量（NLWP））"></a>显示线程（轻量级进程（LWP）和线程的数量（NLWP））</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -AlFH</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="在进程后显示线程"><a href="#在进程后显示线程" class="headerlink" title="在进程后显示线程"></a>在进程后显示线程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -AlLm</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示系统上所有的进程"><a href="#显示系统上所有的进程" class="headerlink" title="显示系统上所有的进程"></a>显示系统上所有的进程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># ps ax</span><br><span class="line"># ps axu</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示进程树"><a href="#显示进程树" class="headerlink" title="显示进程树"></a>显示进程树</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ps -ejH</span><br><span class="line"># ps axjf</span><br><span class="line"># pstree</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示进程的安全信息"><a href="#显示进程的安全信息" class="headerlink" title="显示进程的安全信息"></a>显示进程的安全信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ps -eo euser,ruser,suser,fuser,f,comm,label</span><br><span class="line"># ps axZ</span><br><span class="line"># ps -eM</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示指定用户（如-vivek）运行的进程"><a href="#显示指定用户（如-vivek）运行的进程" class="headerlink" title="显示指定用户（如 vivek）运行的进程"></a>显示指定用户（如 vivek）运行的进程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -U vivek -u vivek u</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="设置用户自定义的输出格式"><a href="#设置用户自定义的输出格式" class="headerlink" title="设置用户自定义的输出格式"></a>设置用户自定义的输出格式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ps -eo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,comm</span><br><span class="line"># ps axo stat,euid,ruid,tty,tpgid,sess,pgrp,ppid,pid,pcpu,comm</span><br><span class="line"># ps -eopid,tt,user,fname,tmout,f,wchan</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示某进程（如-lighttpd）的-PID"><a href="#显示某进程（如-lighttpd）的-PID" class="headerlink" title="显示某进程（如 lighttpd）的 PID"></a>显示某进程（如 lighttpd）的 PID</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -C lighttpd -o pid=</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># pgrep lighttpd</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># pgrep -u vivek php-cgi</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="显示指定-PID（如-55977）的进程名称"><a href="#显示指定-PID（如-55977）的进程名称" class="headerlink" title="显示指定 PID（如 55977）的进程名称"></a>显示指定 PID（如 55977）的进程名称</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -p 55977 -o comm=</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="找出占用内存资源最多的前-10-个进程"><a href="#找出占用内存资源最多的前-10-个进程" class="headerlink" title="找出占用内存资源最多的前 10 个进程"></a>找出占用内存资源最多的前 10 个进程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -auxf | sort -nr -k 4 | head -10</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="找出占用-CPU-资源最多的前-10-个进程"><a href="#找出占用-CPU-资源最多的前-10-个进程" class="headerlink" title="找出占用 CPU 资源最多的前 10 个进程"></a>找出占用 CPU 资源最多的前 10 个进程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -auxf | sort -nr -k 3 | head -10</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/show-all-running-processes-in-linux/">显示 Linux 上所有运行的进程</a></p><h3 id="6-free-内存使用情况"><a href="#6-free-内存使用情况" class="headerlink" title="6. free - 内存使用情况"></a>6. free - 内存使用情况</h3><p><code>free</code> 命令显示了系统的可用和已用的物理内存及交换内存的总量，以及内核用到的缓存空间。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># free</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> total used free shared buffers cached</span><br><span class="line">Mem: 12302896 9739664 2563232 0 523124 5154740</span><br><span class="line">-/+ buffers/cache: 4061800 8241096</span><br><span class="line">Swap: 1052248 0 1052248</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>相关链接： 1. <a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/linux-check-the-size-of-pagesize/">获取 Linux 的虚拟内存的内存页大小（PAGESIZE）</a> 2. <a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/cpu-usage-limiter-for-linux/">限制 Linux 每个进程的 CPU 使用率</a> 3. <a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/how-much-ram-does-my-linux-system.html">我的 Ubuntu 或 Fedora Linux 系统有多少内存？</a></p><h3 id="7-iostat-CPU-平均负载和磁盘活动"><a href="#7-iostat-CPU-平均负载和磁盘活动" class="headerlink" title="7. iostat - CPU 平均负载和磁盘活动"></a>7. iostat - CPU 平均负载和磁盘活动</h3><p><code>iostat</code> 命令用于汇报 CPU 的使用情况，以及设备、分区和网络文件系统（NFS）的 IO 统计信息。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># iostat</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Linux 2.6.18-128.1.14.el5 (www03.nixcraft.in)   06/26/2009</span><br><span class="line"></span><br><span class="line">avg-cpu: %user %nice %system %iowait %steal %idle</span><br><span class="line"> 3.50 0.09 0.51 0.03 0.00 95.86</span><br><span class="line"></span><br><span class="line">Device: tps Blk_read/s Blk_wrtn/s Blk_read Blk_wrtn</span><br><span class="line">sda 22.04 31.88 512.03 16193351 260102868</span><br><span class="line">sda1 0.00 0.00 0.00 2166 180</span><br><span class="line">sda2 22.04 31.87 512.03 16189010 260102688</span><br><span class="line">sda3 0.00 0.00 0.00 1615 0</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/howto-linux-track-nfs-client-disk-metrics/">如何跟踪 Linux 系统的 NFS 目录或磁盘的 IO 负载情况</a></p><h3 id="8-sar-监控、收集和汇报系统活动"><a href="#8-sar-监控、收集和汇报系统活动" class="headerlink" title="8. sar - 监控、收集和汇报系统活动"></a>8. sar - 监控、收集和汇报系统活动</h3><p><code>sar</code> 命令用于收集、汇报和保存系统活动信息。要查看网络统计，请输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># sar -n DEV | more</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>显示 24 日的网络统计：</p><p><code># sar -n DEV -f /var/log/sa/sa24 | more</code></p><p>您还可以使用 <code>sar</code> 显示实时使用情况：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># sar 4 5</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Linux 2.6.18-128.1.14.el5 (www03.nixcraft.in)       06/26/2009</span><br><span class="line"></span><br><span class="line">06:45:12 PM CPU %user %nice %system %iowait %steal %idle</span><br><span class="line">06:45:16 PM all 2.00 0.00 0.22 0.00 0.00 97.78</span><br><span class="line">06:45:20 PM all 2.07 0.00 0.38 0.03 0.00 97.52</span><br><span class="line">06:45:24 PM all 0.94 0.00 0.28 0.00 0.00 98.78</span><br><span class="line">06:45:28 PM all 1.56 0.00 0.22 0.00 0.00 98.22</span><br><span class="line">06:45:32 PM all 3.53 0.00 0.25 0.03 0.00 96.19</span><br><span class="line">Average: all 2.02 0.00 0.27 0.01 0.00 97.70</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>相关链接：</p><ul><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/howto-write-system-utilization-data-to-file.html">如何将 Linux 系统资源利用率的数据写入文件中</a></li><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/identifying-linux-bottlenecks-sar-graphs-with-ksar.html">如何使用 kSar 创建 sar 性能图以找出系统瓶颈</a></li></ul><h3 id="9-mpstat-监控多处理器的使用情况"><a href="#9-mpstat-监控多处理器的使用情况" class="headerlink" title="9. mpstat - 监控多处理器的使用情况"></a>9. mpstat - 监控多处理器的使用情况</h3><p><code>mpstat</code> 命令显示每个可用处理器的使用情况，编号从 0 开始。命令 <code>mpstat -P ALL</code> 显示了每个处理器的平均使用率：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># mpstat -P ALL</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Linux 2.6.18-128.1.14.el5 (www03.nixcraft.in)       06/26/2009</span><br><span class="line"></span><br><span class="line">06:48:11 PM CPU %user %nice %sys %iowait %irq %soft %steal %idle intr/s</span><br><span class="line">06:48:11 PM all 3.50 0.09 0.34 0.03 0.01 0.17 0.00 95.86 1218.04</span><br><span class="line">06:48:11 PM 0 3.44 0.08 0.31 0.02 0.00 0.12 0.00 96.04 1000.31</span><br><span class="line">06:48:11 PM 1 3.10 0.08 0.32 0.09 0.02 0.11 0.00 96.28 34.93</span><br><span class="line">06:48:11 PM 2 4.16 0.11 0.36 0.02 0.00 0.11 0.00 95.25 0.00</span><br><span class="line">06:48:11 PM 3 3.77 0.11 0.38 0.03 0.01 0.24 0.00 95.46 44.80</span><br><span class="line">06:48:11 PM 4 2.96 0.07 0.29 0.04 0.02 0.10 0.00 96.52 25.91</span><br><span class="line">06:48:11 PM 5 3.26 0.08 0.28 0.03 0.01 0.10 0.00 96.23 14.98</span><br><span class="line">06:48:11 PM 6 4.00 0.10 0.34 0.01 0.00 0.13 0.00 95.42 3.75</span><br><span class="line">06:48:11 PM 7 3.30 0.11 0.39 0.03 0.01 0.46 0.00 95.69 76.89</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/linux-mpstat-command-report-processors-related-statistics/">多处理器的 Linux 上单独显示每个 CPU 的使用率</a>.</p><h3 id="10-pmap-监控进程的内存使用情况"><a href="#10-pmap-监控进程的内存使用情况" class="headerlink" title="10. pmap - 监控进程的内存使用情况"></a>10. pmap - 监控进程的内存使用情况</h3><p><code>pmap</code> 命令用以显示进程的内存映射，使用此命令可以查找内存瓶颈。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># pmap -d PID</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>显示 PID 为 47394 的进程的内存信息，请输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># pmap -d 47394</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">47394: /usr/bin/php-cgi</span><br><span class="line">Address Kbytes Mode Offset Device Mapping</span><br><span class="line">0000000000400000 2584 r-x-- 0000000000000000 008:00002 php-cgi</span><br><span class="line">0000000000886000 140 rw--- 0000000000286000 008:00002 php-cgi</span><br><span class="line">00000000008a9000 52 rw--- 00000000008a9000 000:00000 [ anon ]</span><br><span class="line">0000000000aa8000 76 rw--- 00000000002a8000 008:00002 php-cgi</span><br><span class="line">000000000f678000 1980 rw--- 000000000f678000 000:00000 [ anon ]</span><br><span class="line">000000314a600000 112 r-x-- 0000000000000000 008:00002 ld-2.5.so</span><br><span class="line">000000314a81b000 4 r---- 000000000001b000 008:00002 ld-2.5.so</span><br><span class="line">000000314a81c000 4 rw--- 000000000001c000 008:00002 ld-2.5.so</span><br><span class="line">000000314aa00000 1328 r-x-- 0000000000000000 008:00002 libc-2.5.so</span><br><span class="line">000000314ab4c000 2048 ----- 000000000014c000 008:00002 libc-2.5.so</span><br><span class="line">.....</span><br><span class="line">......</span><br><span class="line">..</span><br><span class="line">00002af8d48fd000 4 rw--- 0000000000006000 008:00002 xsl.so</span><br><span class="line">00002af8d490c000 40 r-x-- 0000000000000000 008:00002 libnss_files-2.5.so</span><br><span class="line">00002af8d4916000 2044 ----- 000000000000a000 008:00002 libnss_files-2.5.so</span><br><span class="line">00002af8d4b15000 4 r---- 0000000000009000 008:00002 libnss_files-2.5.so</span><br><span class="line">00002af8d4b16000 4 rw--- 000000000000a000 008:00002 libnss_files-2.5.so</span><br><span class="line">00002af8d4b17000 768000 rw-s- 0000000000000000 000:00009 zero (deleted)</span><br><span class="line">00007fffc95fe000 84 rw--- 00007ffffffea000 000:00000 [ stack ]</span><br><span class="line">ffffffffff600000 8192 ----- 0000000000000000 000:00000 [ anon ]</span><br><span class="line">mapped: 933712K writeable/private: 4304K shared: 768000K</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最后一行非常重要：</p><ul><li><code>mapped: 933712K</code> 映射到文件的内存量</li><li><code>writeable/private: 4304K</code> 私有地址空间</li><li><code>shared: 768000K</code> 此进程与其他进程共享的地址空间</li></ul><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/howto-find-memory-used-by-program.html">使用 pmap 命令查看 Linux 上单个程序或进程使用的内存</a></p><h3 id="11-netstat-Linux-网络统计监控工具"><a href="#11-netstat-Linux-网络统计监控工具" class="headerlink" title="11. netstat - Linux 网络统计监控工具"></a>11. netstat - Linux 网络统计监控工具</h3><p><code>netstat</code> 命令显示网络连接、路由表、接口统计、伪装连接和多播连接等信息。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># netstat -tulpn</span><br><span class="line"># netstat -nat</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="12-ss-网络统计"><a href="#12-ss-网络统计" class="headerlink" title="12. ss - 网络统计"></a>12. ss - 网络统计</h3><p><code>ss</code> 命令用于获取套接字统计信息。它可以显示类似于 <code>netstat</code> 的信息。不过 <code>netstat</code> 几乎要过时了，<code>ss</code> 命令更具优势。要显示所有 TCP 或 UDP 套接字：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ss -t -a</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ss -u -a</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>显示所有带有 SELinux <ruby>安全上下文 <rt>Security Context</rt></ruby>的 TCP 套接字：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ss -t -a -Z</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>请参阅以下关于 <code>ss</code> 和 <code>netstat</code> 命令的资料：</p><ul><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/linux-investigate-sockets-network-connections.html">ss：显示 Linux TCP &#x2F; UDP 网络套接字信息</a></li><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/netstat-command-tutorial-examples.html">使用 netstat 命令获取有关特定 IP 地址连接的详细信息</a></li></ul><h3 id="13-iptraf-获取实时网络统计信息"><a href="#13-iptraf-获取实时网络统计信息" class="headerlink" title="13. iptraf - 获取实时网络统计信息"></a>13. iptraf - 获取实时网络统计信息</h3><p><code>iptraf</code> 命令是一个基于 ncurses 的交互式 IP 网络监控工具。它可以生成多种网络统计信息，包括 TCP 信息、UDP 计数、ICMP 和 OSPF 信息、以太网负载信息、节点统计信息、IP 校验错误等。它以简单的格式提供了以下信息：</p><ul><li>基于 TCP 连接的网络流量统计</li><li>基于网络接口的 IP 流量统计</li><li>基于协议的网络流量统计</li><li>基于 TCP&#x2F;UDP 端口和数据包大小的网络流量统计</li><li>基于二层地址的网络流量统计</li></ul><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003617vegee3q22m51fng5.png" alt="Fig.02: General interface statistics: IP traffic statistics by network interface " title="Fig.02: General interface statistics: IP traffic statistics by network interface "></p><p><em>图 02：常规接口统计：基于网络接口的 IP 流量统计</em></p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003617afed2848vd2dfufw.png" alt="Fig.03 Network traffic statistics by TCP connection" title="Fig.03 Network traffic statistics by TCP connection"></p><p><em>图 03：基于 TCP 连接的网络流量统计</em></p><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/install-iptraf-centos-redhat-fedora-linux/">在 Centos &#x2F; RHEL &#x2F; Fedora Linux 上安装 IPTraf 以获取网络统计信息</a></p><h3 id="14-tcpdump-详细的网络流量分析"><a href="#14-tcpdump-详细的网络流量分析" class="headerlink" title="14. tcpdump - 详细的网络流量分析"></a>14. tcpdump - 详细的网络流量分析</h3><p><code>tcpdump</code> 命令是简单的分析网络通信的命令。您需要充分了解 TCP&#x2F;IP 协议才便于使用此工具。例如，要显示有关 DNS 的流量信息，请输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># tcpdump -i eth1 &#x27;udp port 53&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>查看所有去往和来自端口 80 的 IPv4 HTTP 数据包，仅打印真正包含数据的包，而不是像 SYN、FIN 和仅含 ACK 这类的数据包，请输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># tcpdump &#x27;tcp port 80 and (((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>显示所有目标地址为 202.54.1.5 的 FTP 会话，请输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># tcpdump -i eth1 &#x27;dst 202.54.1.5 and (port 21 or 20&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>打印所有目标地址为 192.168.1.5 的 HTTP 会话：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># tcpdump -ni eth0 &#x27;dst 192.168.1.5 and tcp and port http&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使用 <a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/linux-unix-bsd-apache-tcpdump-http-packets-sniffing/">wireshark</a> 查看文件的详细内容，请输入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># tcpdump -n -i eth1 -s 0 -w output.txt src or dst port 80</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="15-iotop-I-O-监控"><a href="#15-iotop-I-O-监控" class="headerlink" title="15. iotop - I&#x2F;O 监控"></a>15. iotop - I&#x2F;O 监控</h3><p><code>iotop</code> 命令利用 Linux 内核监控 I&#x2F;O 使用情况，它按进程或线程的顺序显示 I&#x2F;O 使用情况。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iotop</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003617v0k9dgp548dgwd0t.jpg" alt="iotop monitoring linux disk read write IO"></p><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/hardware/linux-iotop-simple-top-like-io-monitor/">Linux iotop：什么进程在增加硬盘负载</a></p><h3 id="16-htop-交互式的进程查看器"><a href="#16-htop-交互式的进程查看器" class="headerlink" title="16. htop - 交互式的进程查看器"></a>16. htop - 交互式的进程查看器</h3><p><code>htop</code> 是一款免费并开源的基于 ncurses 的 Linux 进程查看器。它比 <code>top</code> 命令更简单易用。您无需使用 PID、无需离开 <code>htop</code> 界面，便可以杀掉进程或调整其调度优先级。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ htop</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出示例：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003618lfboctxr5s1zoash.jpg" alt="htop process viewer for Linux"></p><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/centos-redhat-linux-install-htop-command-using-yum/">CentOS &#x2F; RHEL：安装 htop——交互式文本模式进程查看器</a></p><h3 id="17-atop-高级版系统与进程监控工具"><a href="#17-atop-高级版系统与进程监控工具" class="headerlink" title="17. atop - 高级版系统与进程监控工具"></a>17. atop - 高级版系统与进程监控工具</h3><p><code>atop</code> 是一个非常强大的交互式 Linux 系统负载监控器，它从性能的角度显示最关键的硬件资源信息。您可以快速查看 CPU、内存、磁盘和网络性能。它还可以从进程的级别显示哪些进程造成了相关 CPU 和内存的负载。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ atop</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003618uffd9f955nz8mc9n.jpg" alt="atop Command Line Tools to Monitor Linux Performance"></p><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/centos-redhat-linux-install-atop-command-using-yum/">CentOS &#x2F; RHEL：安装 atop 工具——高级系统和进程监控器</a></p><h3 id="18-ac-和-lastcomm"><a href="#18-ac-和-lastcomm" class="headerlink" title="18. ac 和 lastcomm"></a>18. ac 和 lastcomm</h3><p>您一定需要监控 Linux 服务器上的进程和登录活动吧。<code>psacct</code> 或 <code>acct</code> 软件包中包含了多个用于监控进程活动的工具，包括：</p><ol><li><code>ac</code> 命令：显示有关用户连接时间的统计信息</li><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/linux-unix-lastcomm-command-examples-usage-syntax/" title="See Linux&#x2F;Unix lastcomm command examples for more info">lastcomm 命令</a>：显示已执行过的命令</li><li><code>accton</code> 命令：打开或关闭进程账号记录功能</li><li><code>sa</code> 命令：进程账号记录信息的摘要</li></ol><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/howto-log-user-activity-using-process-accounting.html">如何对 Linux 系统的活动做详细的跟踪记录</a></p><h3 id="19-monit-进程监控器"><a href="#19-monit-进程监控器" class="headerlink" title="19. monit - 进程监控器"></a>19. monit - 进程监控器</h3><p><code>monit</code> 是一个免费且开源的进程监控软件，它可以自动重启停掉的服务。您也可以使用 Systemd、daemontools 或其他类似工具来达到同样的目的。<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/how-to-install-and-use-monit-on-ubuntudebian-linux-server/">本教程演示如何在 Debian 或 Ubuntu Linux 上安装和配置 monit 作为进程监控器</a>。</p><h3 id="20-NetHogs-找出占用带宽的进程"><a href="#20-NetHogs-找出占用带宽的进程" class="headerlink" title="20. NetHogs - 找出占用带宽的进程"></a>20. NetHogs - 找出占用带宽的进程</h3><p>NetHogs 是一个轻便的网络监控工具，它按照进程名称（如 Firefox、wget 等）对带宽进行分组。如果网络流量突然爆发，启动 NetHogs，您将看到哪个进程（PID）导致了带宽激增。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo nethogs</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003618dnv8ux8nukoo5nvv.jpg" alt="nethogs linux monitoring tools open source"></p><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/linux-find-out-what-process-is-using-bandwidth/">Linux：使用 Nethogs 工具查看每个进程的带宽使用情况</a></p><h3 id="21-iftop-显示主机上网络接口的带宽使用情况"><a href="#21-iftop-显示主机上网络接口的带宽使用情况" class="headerlink" title="21. iftop - 显示主机上网络接口的带宽使用情况"></a>21. iftop - 显示主机上网络接口的带宽使用情况</h3><p><code>iftop</code> 命令监听指定接口（如 eth0）上的网络通信情况。<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/linux-display-bandwidth-usage-on-network-interface-by-host.html">它显示了一对主机的带宽使用情况</a>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo iftop</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003618eekdbv23qho62fdk.gif" alt="iftop in action"></p><h3 id="22-vnstat-基于控制台的网络流量监控工具"><a href="#22-vnstat-基于控制台的网络流量监控工具" class="headerlink" title="22. vnstat - 基于控制台的网络流量监控工具"></a>22. vnstat - 基于控制台的网络流量监控工具</h3><p><code>vnstat</code> 是一个简单易用的基于控制台的网络流量监视器，它为指定网络接口保留每小时、每天和每月网络流量日志。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ vnstat</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003619j0qz1eb3gqv43pq3.jpg" alt="vnstat linux network traffic monitor"></p><p>相关链接：</p><ul><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/linux-display-bandwidth-usage-on-network-interface-by-host.html">为 ADSL 或专用远程 Linux 服务器保留日常网络流量日志</a></li><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/centos-redhat-fedora-linux-install-vnstat-bandwidth-monitor/">CentOS &#x2F; RHEL：安装 vnStat 网络流量监控器以保留日常网络流量日志</a></li><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/centos-redhat-fedora-linux-vnstat-php-webinterface-frontend-config/">CentOS &#x2F; RHEL：使用 PHP 网页前端接口查看 Vnstat 图表</a></li></ul><h3 id="23-nmon-Linux-系统管理员的调优和基准测量工具"><a href="#23-nmon-Linux-系统管理员的调优和基准测量工具" class="headerlink" title="23. nmon - Linux 系统管理员的调优和基准测量工具"></a>23. nmon - Linux 系统管理员的调优和基准测量工具</h3><p><code>nmon</code> 是 Linux 系统管理员用于性能调优的利器，它在命令行显示 CPU、内存、网络、磁盘、文件系统、NFS、消耗资源最多的进程和分区信息。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ nmon</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003619wvfjn0m0fjsmgxwl.jpg" alt="nmon command"></p><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/nmon-performance-analyzer-linux-server-tool/">安装并使用 nmon 工具来监控 Linux 系统的性能</a></p><h3 id="24-glances-密切关注-Linux-系统"><a href="#24-glances-密切关注-Linux-系统" class="headerlink" title="24. glances - 密切关注 Linux 系统"></a>24. glances - 密切关注 Linux 系统</h3><p><code>glances</code> 是一款开源的跨平台监控工具。它在小小的屏幕上提供了大量的信息，还可以工作于客户端-服务器模式下。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ glances</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003619rlt3p5pp3ge5jg45.jpg" alt="Glances"></p><p>相关链接：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/linux-install-glances-monitoring-tool/">Linux：通过 Glances 监控器密切关注您的系统</a></p><h3 id="25-strace-查看系统调用"><a href="#25-strace-查看系统调用" class="headerlink" title="25. strace - 查看系统调用"></a>25. strace - 查看系统调用</h3><p>想要跟踪 Linux 系统的调用和信号吗？试试 <code>strace</code> 命令吧。它对于调试网页服务器和其他服务器问题很有用。了解如何利用其 <a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/linux-strace-command-examples.html">追踪进程</a> 并查看它在做什么。</p><h3 id="26-proc-文件系统-各种内核信息"><a href="#26-proc-文件系统-各种内核信息" class="headerlink" title="26. &#x2F;proc 文件系统 - 各种内核信息"></a>26. &#x2F;proc 文件系统 - 各种内核信息</h3><p><code>/proc</code> 文件系统提供了不同硬件设备和 Linux 内核的详细信息。更多详细信息，请参阅 <a target="_blank" rel="noopener" href="https://www.cyberciti.biz/files/linux-kernel/Documentation/filesystems/proc.txt">Linux 内核 &#x2F;proc</a> 文档。常见的 <code>/proc</code> 例子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># cat /proc/cpuinfo</span><br><span class="line"># cat /proc/meminfo</span><br><span class="line"># cat /proc/zoneinfo</span><br><span class="line"># cat /proc/mounts</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="27-Nagios-Linux-服务器和网络监控"><a href="#27-Nagios-Linux-服务器和网络监控" class="headerlink" title="27. Nagios - Linux 服务器和网络监控"></a>27. Nagios - Linux 服务器和网络监控</h3><p><a target="_blank" rel="noopener" href="http://www.nagios.org/">Nagios</a> 是一款普遍使用的开源系统和网络监控软件。您可以轻松地监控所有主机、网络设备和服务，当状态异常和恢复正常时它都会发出警报通知。<a target="_blank" rel="noopener" href="http://fannagioscd.sourceforge.net/drupal/">FAN</a> 是“全自动 Nagios”的缩写。FAN 的目标是提供包含由 Nagios 社区提供的大多数工具包的 Nagios 安装。FAN 提供了标准 ISO 格式的 CD-Rom 镜像，使安装变得更加容易。除此之外，为了改善 Nagios 的用户体验，发行版还包含了大量的工具。</p><h3 id="28-Cacti-基于-Web-的-Linux-监控工具"><a href="#28-Cacti-基于-Web-的-Linux-监控工具" class="headerlink" title="28. Cacti - 基于 Web 的 Linux 监控工具"></a>28. Cacti - 基于 Web 的 Linux 监控工具</h3><p>Cacti 是一个完整的网络图形化解决方案，旨在充分利用 RRDTool 的数据存储和图形功能。Cacti 提供了快速轮询器、高级图形模板、多种数据采集方法和用户管理功能。这些功能被包装在一个直观易用的界面中，确保可以实现从局域网到拥有数百台设备的复杂网络上的安装。它可以提供有关网络、CPU、内存、登录用户、Apache、DNS 服务器等的数据。了解如何在 CentOS &#x2F; RHEL 下 <a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/fedora-rhel-install-cacti-monitoring-rrd-software/">安装和配置 Cacti 网络图形化工具</a>。</p><h3 id="29-KDE-系统监控器-实时系统报告和图形化显示"><a href="#29-KDE-系统监控器-实时系统报告和图形化显示" class="headerlink" title="29. KDE 系统监控器 - 实时系统报告和图形化显示"></a>29. KDE 系统监控器 - 实时系统报告和图形化显示</h3><p>KSysguard 是 KDE 桌面的网络化系统监控程序。这个工具可以通过 ssh 会话运行。它提供了许多功能，比如可以监控本地和远程主机的客户端-服务器模式。前端图形界面使用传感器来检索信息。传感器可以返回简单的值或更复杂的信息，如表格。每种类型的信息都有一个或多个显示界面，并被组织成工作表的形式，这些工作表可以分别保存和加载。所以，KSysguard 不仅是一个简单的任务管理器，还是一个控制大型服务器平台的强大工具。</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003619r9blsmq55lgw1uss.png" alt="Fig.05 KDE System Guard" title="Fig.05 KDE System Guard KDE task manager and performance monitor."></p><p><em>图 05：KDE System Guard {图片来源：维基百科}</em></p><p>详细用法，请参阅 <a target="_blank" rel="noopener" href="https://docs.kde.org/stable5/en/kde-workspace/ksysguard/index.html">KSysguard 手册</a>。</p><h3 id="30-GNOME-系统监控器"><a href="#30-GNOME-系统监控器" class="headerlink" title="30. GNOME 系统监控器"></a>30. GNOME 系统监控器</h3><p>系统监控程序能够显示系统基本信息，并监控系统进程、系统资源使用情况和文件系统。您还可以用其修改系统行为。虽然不如 KDE System Guard 强大，但它提供的基本信息对新用户还是有用的：</p><ul><li>显示关于计算机硬件和软件的各种基本信息</li><li>Linux 内核版本</li><li>GNOME 版本</li><li>硬件</li><li>安装的内存</li><li>处理器和速度</li><li>系统状况</li><li>可用磁盘空间</li><li>进程</li><li>内存和交换空间</li><li>网络使用情况</li><li>文件系统</li><li>列出所有挂载的文件系统及其基本信息</li></ul><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201802/23/003620wb8m90lmmp8e4wex.png" alt="Fig.06 The Gnome System Monitor application" title="Fig.06 The Gnome System Monitor application"></p><p><em>图 06：Gnome 系统监控程序</em></p><h3 id="福利：其他工具"><a href="#福利：其他工具" class="headerlink" title="福利：其他工具"></a>福利：其他工具</h3><p>更多工具：</p><ul><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/linux-scanning-network-for-open-ports.html">nmap</a> - 扫描服务器的开放端口</li><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/tag/lsof-command">lsof</a> - 列出打开的文件和网络连接等</li><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/debian-ubuntu-install-ntop-network-traffic-monitoring-software/" title="Debian &#x2F; Ubuntu Linux Install ntop To See Network Usage &#x2F; Network Status">ntop</a> 基于网页的工具 - <code>ntop</code> 是查看网络使用情况的最佳工具，与 <code>top</code> 命令之于进程的方式类似，即网络流量监控工具。您可以查看网络状态和 UDP、TCP、DNS、HTTP 等协议的流量分发。</li><li><a target="_blank" rel="noopener" href="https://github.com/brndnmtthws/conky">Conky</a> - X Window 系统下的另一个很好的监控工具。它具有很高的可配置性，能够监视许多系统变量，包括 CPU 状态、内存、交换空间、磁盘存储、温度、进程、网络接口、电池、系统消息和电子邮件等。</li><li><a target="_blank" rel="noopener" href="http://gkrellm.srcbox.net/">GKrellM</a> - 它可以用来监控 CPU 状态、主内存、硬盘、网络接口、本地和远程邮箱及其他信息。</li><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/finding-out-a-bad-or-simply-overloaded-network-link-with-linuxunix-oses.html">mtr</a> - <code>mtr</code> 将 <code>traceroute</code> 和 <code>ping</code> 程序的功能结合在一个网络诊断工具中。</li><li><a target="_blank" rel="noopener" href="https://www.cyberciti.biz/faq/how-to-install-and-use-vtop-graphical-terminal-activity-monitor-on-linux/">vtop</a> - 图形化活动监控终端</li></ul><p>如果您有其他推荐的系统监控工具，欢迎在评论区分享。</p><h3 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h3><p>作者 Vivek Gite 是 nixCraft 的创建者，也是经验丰富的系统管理员，以及 Linux 操作系统和 Unix shell 脚本的培训师。他的客户遍布全球，行业涉及 IT、教育、国防航天研究以及非营利部门等。您可以在 <a target="_blank" rel="noopener" href="https://twitter.com/nixcraft">Twitter</a>、<a target="_blank" rel="noopener" href="https://facebook.com/nixcraft">Facebook</a> 和 <a target="_blank" rel="noopener" href="https://plus.google.com/+CybercitiBiz">Google+</a> 上关注他。</p><hr><p>via: <a target="_blank" rel="noopener" href="https://www.cyberciti.biz/tips/top-linux-monitoring-tools.html">https://www.cyberciti.biz/tips/top-linux-monitoring-tools.html</a></p><p>作者：<a target="_blank" rel="noopener" href="https://www.cyberciti.biz/">Vivek Gite</a> 译者：<a target="_blank" rel="noopener" href="https://github.com/jessie-pang">jessie-pang</a> 校对：<a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p><p>本文由 <a target="_blank" rel="noopener" href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a target="_blank" rel="noopener" href="https://linux.cn/">Linux中国</a> 荣誉推出</p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p></div></div></body></html>