<!doctype html><html lang="en"><head><meta name="description" content="一个LinuxCN的镜像站"><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>RHEL/CentOS 7中安装并配置 PowerDNS 和 PowerAdmin - 归墟星火集 又一个 LinuxCN 站点</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 又一个 LinuxCN 站点 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">RHEL/CentOS 7中安装并配置 PowerDNS 和 PowerAdmin</h1><span class="post-date">2015-06-14</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E7%B3%BB%E7%BB%9F%E8%BF%90%E7%BB%B4/">系统运维</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/DNS/">DNS</a> <a href="/tags/PowerDNS/">PowerDNS</a></div><div class="post-content"><p>PowerDNS是一个运行在许多Linux&#x2F;Unix衍生版上的DNS服务器，它可以使用不同的后端进行配置，包括BIND类型的区域文件、关系型数据库，或者负载均衡&#x2F;失效转移算法。它也可以被配置成一台DNS递归器，作为服务器上的一个独立进程运行。</p><p>PowerDNS授权服务器的最新版本是3.4.4，但是当前EPEL仓库中可以获得的版本是3.4.3。我推荐安装EPEL仓库中提供的那一个，因为该版本已经在CentOS和Fedora中测试过。那样，你也可以在今后很容易地更新PowerDNS。</p><p>本文用于向你演示如何安装并配置以MariaDB作为后端的PowerDNS，以及它的界面友好的 Web 管理工具 PowerAdmin。</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233536yuijovqx3qqj90gg.png"></p><p>出于本文的写作目的，我将使用以下服务器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主机名： centos7.localhost </span><br><span class="line">IP地址： 192.168.0.102</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="第一部分：-安装带有MariaDB后端的PowerDNS"><a href="#第一部分：-安装带有MariaDB后端的PowerDNS" class="headerlink" title="第一部分： 安装带有MariaDB后端的PowerDNS"></a>第一部分： 安装带有MariaDB后端的PowerDNS</h3><p>1、 首先，你需要为你的系统启用EPEL仓库，只需使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># yum install epel-release.noarch </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233541u0ci4c6es3y33sds.png" alt="Enable Epel Repository"></p><p><em>启用Epel仓库</em></p><p>2、 下一步是安装MariaDB服务器。运行以下命令即可达成：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># yum -y install mariadb-server mariadb</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233542p3buljaupeu10551.png" alt="Install MariaDB Server"></p><p><em>安装MariaDB服务器</em></p><p>3、 接下来，我们将配置并启用MariaDB，并设置开机启动：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># systemctl enable mariadb.service</span><br><span class="line"># systemctl start mariadb.service</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233542wxkttidlkkdxdidk.png" alt="Enable Start MariaDB System Boot"></p><p><em>启用MariaDB开机启动</em></p><p>4、 现在MariaDB服务运行起来了，我们将为MariaDB设置密码进行安全加固，运行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># mysql_secure_installation</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>按照指示做</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">/bin/mysql_secure_installation: line 379: find_mysql_client: command not found</span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to log into MariaDB to secure it, we&#x27;ll need the current</span><br><span class="line">password for the root user.  If you&#x27;ve just installed MariaDB, and</span><br><span class="line">you haven&#x27;t set the root password yet, the password will be blank,</span><br><span class="line">so you should just press enter here.</span><br><span class="line"></span><br><span class="line">Enter current password for root (enter for none):  Press ENTER</span><br><span class="line">OK, successfully used password, moving on...</span><br><span class="line"></span><br><span class="line">Setting the root password ensures that nobody can log into the MariaDB</span><br><span class="line">root user without the proper authorisation.</span><br><span class="line"></span><br><span class="line">Set root password? [Y/n] y     </span><br><span class="line">New password:  ← Set New Password</span><br><span class="line">Re-enter new password:  ← Repeat Above Password</span><br><span class="line">Password updated successfully!</span><br><span class="line">Reloading privilege tables..</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">By default, a MariaDB installation has an anonymous user, allowing anyone</span><br><span class="line">to log into MariaDB without having to have a user account created for</span><br><span class="line">them.  This is intended only for testing, and to make the installation</span><br><span class="line">go a bit smoother.  You should remove them before moving into a</span><br><span class="line">production environment.</span><br><span class="line"></span><br><span class="line">Remove anonymous users? [Y/n] y ← Choose “y” to disable that user</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Normally, root should only be allowed to connect from &#x27;localhost&#x27;.  This</span><br><span class="line">ensures that someone cannot guess at the root password from the network.</span><br><span class="line"></span><br><span class="line">Disallow root login remotely? [Y/n] n ← Choose “n” for no</span><br><span class="line"> ... skipping.</span><br><span class="line"></span><br><span class="line">By default, MariaDB comes with a database named &#x27;test&#x27; that anyone can</span><br><span class="line">access.  This is also intended only for testing, and should be removed</span><br><span class="line">before moving into a production environment.</span><br><span class="line"></span><br><span class="line">Remove test database and access to it? [Y/n] y ← Choose “y” for yes</span><br><span class="line"> - Dropping test database...</span><br><span class="line"> ... Success!</span><br><span class="line"> - Removing privileges on test database...</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Reloading the privilege tables will ensure that all changes made so far</span><br><span class="line">will take effect immediately.</span><br><span class="line"></span><br><span class="line">Reload privilege tables now? [Y/n] y ← Choose “y” for yes</span><br><span class="line"> ... Success!</span><br><span class="line"></span><br><span class="line">Cleaning up...</span><br><span class="line"></span><br><span class="line">All done!  If you&#x27;ve completed all of the above steps, your MariaDB</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks for using MariaDB!</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>5、 MariaDB配置成功后，我们可以继续去安装PowerDNS。运行以下命令即可轻易完成：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># yum -y install pdns pdns-backend-mysql</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233543bx67fuezxehluyuk.png" alt="Install PowerDNS with MariaDB Backend"></p><p><em>安装带有MariaDB后端的PowerDNS</em></p><p>6、 PowerDNS的配置文件位于<code>/etc/pdns/pdns</code>，在编辑之前，我们将为PowerDNS服务配置一个MariaDB数据库。首先，我们将连接到MariaDB服务器并创建一个名为powerdns的数据库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># mysql -u root -p</span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE powerdns;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233543bsobejd8gt8t8kzr.png" alt="Create PowerDNS Database"></p><p><em>创建PowerDNS数据库</em></p><p>7、 接下来，我们将创建一个名为powerdns的数据库用户：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; GRANT ALL ON powerdns.* TO &#x27;powerdns&#x27;@&#x27;localhost&#x27; IDENTIFIED BY ‘tecmint123’;</span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL ON powerdns.* TO &#x27;powerdns&#x27;@&#x27;centos7.localdomain&#x27; IDENTIFIED BY &#x27;tecmint123&#x27;;</span><br><span class="line">MariaDB [(none)]&gt; FLUSH PRIVILEGES;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233543tpwpgqrgsl24g2cy.png" alt="Create PowerDNS User"></p><p><em>创建PowerDNS用户</em></p><p><strong>注意</strong>： 请将“tecmint123”替换为你想要设置的实际密码。</p><p>8、 我们继续创建PowerDNS要使用的数据库表。像堆积木一样执行以下这些：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; USE powerdns;</span><br><span class="line">MariaDB [(none)]&gt; CREATE TABLE domains (</span><br><span class="line">id INT auto_increment,</span><br><span class="line">name VARCHAR(255) NOT NULL,</span><br><span class="line">master VARCHAR(128) DEFAULT NULL,</span><br><span class="line">last_check INT DEFAULT NULL,</span><br><span class="line">type VARCHAR(6) NOT NULL,</span><br><span class="line">notified_serial INT DEFAULT NULL,</span><br><span class="line">account VARCHAR(40) DEFAULT NULL,</span><br><span class="line">primary key (id)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233546ce20hll0oio6a00k.png" alt="Create Table Domains for PowerDNS"></p><p><em>创建用于PowerDNS的表domains</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; CREATE UNIQUE INDEX name_index ON domains(name);</span><br><span class="line">MariaDB [(none)]&gt; CREATE TABLE records (</span><br><span class="line">id INT auto_increment,</span><br><span class="line">domain_id INT DEFAULT NULL,</span><br><span class="line">name VARCHAR(255) DEFAULT NULL,</span><br><span class="line">type VARCHAR(6) DEFAULT NULL,</span><br><span class="line">content VARCHAR(255) DEFAULT NULL,</span><br><span class="line">ttl INT DEFAULT NULL,</span><br><span class="line">prio INT DEFAULT NULL,</span><br><span class="line">change_date INT DEFAULT NULL,</span><br><span class="line">primary key(id)</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233548qyhfbfv36vwhof5f.png" alt="Create Table Records for PowerDNS"></p><p><em>创建用于PowerDNS的表 records</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; CREATE INDEX rec_name_index ON records(name);</span><br><span class="line">MariaDB [(none)]&gt; CREATE INDEX nametype_index ON records(name,type);</span><br><span class="line">MariaDB [(none)]&gt; CREATE INDEX domain_id ON records(domain_id);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233549zfed8fdznsdhhljs.png" alt="Create Index of Table"></p><p><em>创建表索引</em></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; CREATE TABLE supermasters (</span><br><span class="line">ip VARCHAR(25) NOT NULL,</span><br><span class="line">nameserver VARCHAR(255) NOT NULL,</span><br><span class="line">account VARCHAR(40) DEFAULT NULL</span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233552ink0onndo0006o1e.png" alt="Create Table Supermaster"></p><p><em>创建表supermasters</em></p><p>你现在可以输入以下命令退出MariaDB控制台：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; quit;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>9、 最后，我们可以继续配置PowerDNS了，以MariaDB作为后台。请打开PowerDNS的配置文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># vim /etc/pdns/pdns.conf </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在该文件中查找像下面这样的行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#################################</span><br><span class="line"># launch        Which backends to launch and order to query them in</span><br><span class="line">#</span><br><span class="line"># launch=</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在这后面放置以下代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">launch=gmysql</span><br><span class="line">gmysql-host=localhost</span><br><span class="line">gmysql-user=powerdns</span><br><span class="line">gmysql-password=user-pass</span><br><span class="line">gmysql-dbname=powerdns</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>修改“user-pass”为你先前设置的实际密码，配置如下：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233552wpbqquq33mqazqq4.png" alt="Configure PowerDNS"></p><p><em>配置PowerDNS</em></p><p>保存修改并退出。</p><p>10、 现在，我们将启动并添加PowerDNS到系统开机启动列表：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># systemctl enable pdns.service </span><br><span class="line"># systemctl start pdns.service </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233553tae7ukbckt17bkz9.png" alt="Enable and Start PowerDNS"></p><p><em>启用并启动PowerDNS</em></p><p>到这一步，你的PowerDNS服务器已经起来并运行了。要获取更多关于PowerDNS的信息，你可以参考手册<a target="_blank" rel="noopener" href="http://downloads.powerdns.com/documentation/html/index.html">http://downloads.powerdns.com/documentation/html/index.html</a>。</p><h3 id="第二部分：-安装PowerAdmin来管理PowerDNS"><a href="#第二部分：-安装PowerAdmin来管理PowerDNS" class="headerlink" title="第二部分： 安装PowerAdmin来管理PowerDNS"></a>第二部分： 安装PowerAdmin来管理PowerDNS</h3><p>11、 现在，我们将安装PowerAdmin——一个界面友好的PowerDNS服务器的 Web 管理器。由于它是用PHP写的，我们将需要安装PHP和一台网络服务器（Apache）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># yum install httpd php php-devel php-gd php-imap php-ldap php-mysql php-odbc php-pear php-xml php-xmlrpc php-mbstring php-mcrypt php-mhash gettext</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233556jrsrazjzcr1sesdc.jpg" alt="Install Apache PHP"></p><p><em>安装Apache 和 PHP</em></p><p>PowerAdmin也需要两个PEAR包：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># yum -y install php-pear-DB php-pear-MDB2-Driver-mysql </span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233558qqe6lq6x24xvl2gl.jpg" alt="Install Pear"></p><p><em>安装Pear</em></p><p>你也可以参考一下文章了解CentOS 7中安装LAMP堆栈的完整指南：</p><ul><li><a target="_blank" rel="noopener" href="http://www.tecmint.com/install-lamp-in-centos-7/">CentOS 7中安装LAMP</a></li></ul><p>安装完成后，我们将需要启动并设置Apache开机启动：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># systemctl enable httpd.service</span><br><span class="line"># systemctl start httpd.service</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233559r0fddga5xe0ff00f.png" alt="Enable Start Apache System Boot"></p><p><em>启用Apache开机启动</em></p><p>12、 由于已经满足PowerAdmin的所有系统要求，我们可以继续下载软件包。因为Apache默认的网页目录位于&#x2F;var&#x2F;www&#x2F;html&#x2F;，我们将下载软件包到这里。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># cd /var/www/html/</span><br><span class="line"># wget http://downloads.sourceforge.net/project/poweradmin/poweradmin-2.1.7.tgz </span><br><span class="line"># tar xfv poweradmin-2.1.7.tgz</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233602kg0bn2pdjwov0gbo.jpg" alt="Download PowerAdmin"></p><p><em>下载PowerAdmin</em></p><p>13、 现在，我们可以启动PowerAdmin的网页安装器了，只需打开：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.0.102/poweradmin-2.1.7/install/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这会进入安装过程的第一步：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233603jgknnznjf0vnlncp.png" alt="Select Installation Language"></p><p><em>选择安装语言</em></p><p>上面的页面会要求你为PowerAdmin选择语言，请选择你想要使用的那一个，然后点击“进入步骤 2”按钮。</p><p>14、 安装器需要PowerDNS数据库：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233604lxne1e5w5rsew8q6.png" alt="PowerDNS Database"></p><p><em>PowerDNS数据库</em></p><p>15、 因为我们已经创建了一个数据库，所以我们可以继续进入下一步。你会被要求提供先前配置的数据库详情，你也需要为Poweradmin设置管理员密码：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233605l5355hlqeqpqc4lo.png" alt="Enter PowerDNS Database Settings"></p><p><em>输入PowerDNS数据库配置</em></p><p>16、 输入这些信息后，进入步骤 4。你将创建为Poweradmin创建一个受限用户。这里你需要输入的字段是：</p><ul><li>用户名（Username） - PowerAdmin用户名。</li><li>密码（Password） – 上述用户的密码。</li><li>主机管理员（Hostmaster） - 当创建SOA记录而你没有指定主机管理员时，该值会被用作默认值。</li><li>主域名服务器 - 该值在创建新的DNS区域时会被用于作为主域名服务器。</li><li>辅域名服务器 – 该值在创建新的DNS区域时会被用于作为辅域名服务器。</li></ul><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233607zo11vci47ntodvv9.png" alt="PowerDNS Configuration Settings"></p><p><em>PowerDNS配置设置</em></p><p>17、 在下一步中，Poweradmin会要求你在数据库表中创建一个新的受限数据库用户，它会提供你需要在MariaDB控制台输入的代码：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233608u9acfinnnxiz1j9j.png" alt="Create New Database User"></p><p><em>创建新的数据库用户</em></p><p>18、 现在打开终端并运行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># mysql -u root -p</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>提供你的密码并执行由PowerAdmin提供的代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">MariaDB [(none)]&gt; GRANT SELECT, INSERT, UPDATE, DELETE</span><br><span class="line">ON powerdns.*</span><br><span class="line">TO &#x27;powermarin&#x27;@&#x27;localhost&#x27;</span><br><span class="line">IDENTIFIED BY &#x27;123qweasd&#x27;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233610bexxni8rndge9dsh.png" alt="Grant Mysql Permissions to User"></p><p><em>为用户授予Mysql权限</em></p><p>19、 现在，回到浏览器中并继续下一步。安装器将尝试创建配置文件到&#x2F;var&#x2F;www&#x2F;html&#x2F;poweradmin-2.1.7&#x2F;inc。</p><p>文件名是config.inc.php。为防止该脚本没有写权限，你可以手动复制这些内容到上述文件中：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233611qczd6p33n4ljvrv9.png" alt="Configuration Settings of PowerDNS"></p><p><em>配置PowerDNS设置</em></p><p>20、 现在，进入最后页面，该页面会告知你安装已经完成以及如何访问安装好的PowerAdmin：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233613taxng16l2d2zs2rr.png" alt="PowerDNS Installation Completed"></p><p><em>PowerDNS安装完成</em></p><p>你可以通过运行以下命令来启用用于其他动态DNS提供商的URL：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># cp install/htaccess.dist .htaccess </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>出于该目的，你将需要在Apache的配置中启用mod_rewrite。</p><p>21、 现在，需要移除从PowerAdmin的根目录中移除“install”文件夹，这一点很重要。使用以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># rm -fr /var/www/html/poweradmin/install/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在此之后，你可以通过以下方式访问PowerAdmin：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://192.168.0.102/poweradmin-2.1.7/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233614zj37eo6wiii347ox.png" alt="PowerDNS Login"></p><p><em>PowerDNS登录</em></p><p>在登录后，你应该会看到PowerAdmin的主页：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233615dscgjgpzdha6zdjl.png" alt="PowerDNS Dashboard"></p><p><em>PowerDNS仪表盘</em></p><p>到这里，安装已经完成了，你也可以开始管理你的DNS区域了。</p><h3 id="第三部分：-PowerDNS中添加、编辑和删除DNS区域"><a href="#第三部分：-PowerDNS中添加、编辑和删除DNS区域" class="headerlink" title="第三部分： PowerDNS中添加、编辑和删除DNS区域"></a>第三部分： PowerDNS中添加、编辑和删除DNS区域</h3><p>22、 要添加新的主区域，只需点击“添加主区域”：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233617wt49kztfghgjy5y5.png" alt="Add Master Zone"></p><p><em>添加主区域</em></p><p>在下一页中，你需要填写一些东西：</p><ul><li>域（Domain） – 你要添加区域的域。</li><li>所有者（Owner） – 设置DNS区域的所有者。</li><li>模板（Template）– DNS模板 – 留空。</li><li>DNSSEC – 域名系统安全扩展（可选——看看你是否需要）。</li></ul><p>点击“添加区域”按钮来添加DNS区域。</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233618awkozrtununwpwjz.png" alt="Master DNS Zone"></p><p><em>主DNS区域</em></p><p>现在，你可以点击“首页”链接回到PowerAdmin的首页。要查看所有现存的DNS区域，只需转到“列出区域（List Zones）”：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233619aru45mvrmwdu2r2d.png" alt="Check List of Zones"></p><p><em>查看区域列表</em></p><p>你现在应该看到一个可用DNS区域列表：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233621cnj90p2nqqn1x0hn.png" alt="Check List of DNS Zones"></p><p><em>检查DNS区域列表</em></p><p>23、 要编辑现存DNS区域或者添加新的记录，点击编辑图标：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233622fajzl7wfffddaw0a.png" alt="Edit DNS Zone"></p><p><em>编辑DNS区域</em></p><p>在接下来的页面，你会看到你选择的DNS区域的条目：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233624c794kyll330dmq44.png" alt="Domain DNS Zone Entries"></p><p><em>域名的DNS区域条目</em></p><p>24、 在此处添加新的DNS条目，你需要设置以下信息：</p><ul><li>名称（Name） – 条目名称。只需添加域&#x2F;子域的第一部分，PowerAdmin会添加剩下的。</li><li>类型（Type） – 选择记录类型。</li><li>优先级（Priority） – 记录优先级。</li><li>TTL – 存活时间，以秒计算。</li></ul><p>出于本文目的，我将为子域new.example.com添加一个A记录用于解析IP地址192.168.0.102，设置存活时间为14400秒：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233624nmx4vlmmlauf2l5a.png" alt="Add New DNS Record"></p><p><em>添加新DNS记录</em></p><p>最后，点击“添加记录”按钮。</p><p>25、 如果你想要删除DNS区域，你可以回到“列出区域”页面，然后点击你想要删除的DNS区域旁边“垃圾桶”图标：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201506/13/233625wlw2ij8ojfhhphr1.png" alt="Delete DNS Zone"></p><p><em>删除DNS区域</em></p><p>Poweradmin将问你是否确定想要删除DNS区域。只需点击“是”来完成删除。</p><p>如要获取更多关于怎样创建、编辑和删除区域的说明，你可以参与Poweradmin的文档：<a target="_blank" rel="noopener" href="https://github.com/poweradmin/poweradmin/wiki/Documentation">https://github.com/poweradmin/poweradmin/wiki/Documentation</a></p><p>我希望你已经发现本文很有趣，也很有用。一如既往，如果你有问题或要发表评论，请别犹豫，在下面评论区提交你的评论吧。</p><hr><p>via: <a target="_blank" rel="noopener" href="http://www.tecmint.com/install-powerdns-poweradmin-mariadb-in-centos-rhel/">http://www.tecmint.com/install-powerdns-poweradmin-mariadb-in-centos-rhel/</a></p><p>作者：<a target="_blank" rel="noopener" href="http://www.tecmint.com/author/marintodorov89/">Marin Todorov</a> 译者：<a target="_blank" rel="noopener" href="https://github.com/GOLinux">GOLinux</a> 校对：<a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p><p>本文由 <a target="_blank" rel="noopener" href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创翻译，<a target="_blank" rel="noopener" href="http://linux.cn/">Linux中国</a> 荣誉推出</p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p><script defer src="https://pv.undefined.today/tracker.min.js" data-website-id="LinuxCNMirror-tracker"></script></div></div></body></html>