<!doctype html><html lang="en"><head><meta name="description" content="一个LinuxCN的镜像站"><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>常用 GDB 命令中文速览 - 归墟星火集 又一个 LinuxCN 站点</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 又一个 LinuxCN 站点 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">常用 GDB 命令中文速览</h1><span class="post-date">2017-09-24</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/%E8%B0%83%E8%AF%95/">调试</a> <a href="/tags/gdb/">gdb</a></div><div class="post-content"><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201709/24/150421z8qnabqpphbs1a8o.jpg"></p><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><ul><li>break – 在指定的行或函数处设置断点，缩写为 <code>b</code></li><li>info breakpoints – 打印未删除的所有断点，观察点和捕获点的列表，缩写为 <code>i b</code></li><li>disable – 禁用断点，缩写为 <code>dis</code></li><li>enable – 启用断点</li><li>clear – 清除指定行或函数处的断点</li><li>delete – 删除断点，缩写为 <code>d</code></li><li>tbreak – 设置临时断点，参数同 <code>break</code>，但在程序第一次停住后会被自动删除</li><li>watch – 为表达式（或变量）设置观察点，当表达式（或变量）的值有变化时，暂停程序执行</li><li>step – 单步跟踪，如果有函数调用，会进入该函数，缩写为 <code>s</code></li><li>reverse-step – 反向单步跟踪，如果有函数调用，会进入该函数</li><li>next – 单步跟踪，如果有函数调用，不会进入该函数，缩写为 <code>n</code></li><li>reverse-next – 反向单步跟踪，如果有函数调用，不会进入该函数</li><li>return – 使选定的栈帧返回到其调用者</li><li>finish – 执行直到选择的栈帧返回，缩写为 <code>fin</code></li><li>until – 执行直到达到当前栈帧中当前行后的某一行（用于跳过循环、递归函数调用），缩写为 <code>u</code></li><li>continue – 恢复程序执行，缩写为 <code>c</code></li><li>print – 打印表达式 EXP 的值，缩写为 <code>p</code></li><li>x – 查看内存</li><li>display – 每次程序停止时打印表达式 EXP 的值（自动显示）</li><li>info display – 打印早先设置为自动显示的表达式列表</li><li>disable display – 禁用自动显示</li><li>enable display – 启用自动显示</li><li>undisplay – 删除自动显示项</li><li>help – 打印命令列表（带参数时查找命令的帮助），缩写为 <code>h</code></li><li>attach – 挂接到已在运行的进程来调试</li><li>run – 启动被调试的程序，缩写为 <code>r</code></li><li>backtrace – 查看程序调用栈的信息，缩写为 <code>bt</code></li><li>ptype – 打印类型 TYPE 的定义</li></ul><hr><h3 id="break"><a href="#break" class="headerlink" title="break"></a>break</h3><p>使用 <code>break</code> 命令（缩写 <code>b</code>）来设置断点。</p><p>用法：</p><ul><li><code>break</code> 当不带参数时，在所选栈帧中执行的下一条指令处设置断点。</li><li><code>break &lt;function-name&gt;</code> 在函数体入口处打断点，在 C++ 中可以使用 <code>class::function</code> 或 <code>function(type, ...)</code> 格式来指定函数名。</li><li><code>break &lt;line-number&gt;</code> 在当前源码文件指定行的开始处打断点。</li><li><code>break -N</code> <code>break +N</code> 在当前源码行前面或后面的 <code>N</code> 行开始处打断点，<code>N</code> 为正整数。</li><li><code>break &lt;filename:linenum&gt;</code> 在源码文件 <code>filename</code> 的 <code>linenum</code> 行处打断点。</li><li><code>break &lt;filename:function&gt;</code> 在源码文件 <code>filename</code> 的 <code>function</code> 函数入口处打断点。</li><li><code>break &lt;address&gt;</code> 在程序指令的地址处打断点。</li><li><code>break ... if &lt;cond&gt;</code> 设置条件断点，<code>...</code> 代表上述参数之一（或无参数），<code>cond</code> 为条件表达式，仅在 <code>cond</code> 值非零时暂停程序执行。</li></ul><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Breaks.html">官方文档</a>。</p><h3 id="info-breakpoints"><a href="#info-breakpoints" class="headerlink" title="info breakpoints"></a>info breakpoints</h3><p>查看断点，观察点和捕获点的列表。</p><p>用法：</p><ul><li><code>info breakpoints [list...]</code></li><li><code>info break [list...]</code></li><li><code>list...</code> 用来指定若干个断点的编号（可省略），可以是 <code>2</code>， <code>1-3</code>， <code>2 5</code> 等。</li></ul><h3 id="disable"><a href="#disable" class="headerlink" title="disable"></a>disable</h3><p>禁用一些断点。参数是用空格分隔的断点编号。要禁用所有断点，不加参数。</p><p>禁用的断点不会被忘记，但直到重新启用才有效。</p><p>用法：</p><ul><li><code>disable [breakpoints] [list...]</code></li><li><code>breakpoints</code> 是 <code>disable</code> 的子命令（可省略），<code>list...</code> 同 <code>info breakpoints</code> 中的描述。</li></ul><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Disabling.html">官方文档</a>。</p><h3 id="enable"><a href="#enable" class="headerlink" title="enable"></a>enable</h3><p>启用一些断点。给出断点编号（以空格分隔）作为参数。没有参数时，所有断点被启用。</p><p>用法：</p><ul><li><code>enable [breakpoints] [list...]</code> 启用指定的断点（或所有定义的断点）。</li><li><code>enable [breakpoints] once list...</code> 临时启用指定的断点。GDB 在停止您的程序后立即禁用这些断点。</li><li><code>enable [breakpoints] delete list...</code> 使指定的断点启用一次，然后删除。一旦您的程序停止，GDB 就会删除这些断点。等效于用 <code>tbreak</code> 设置的断点。</li></ul><p><code>breakpoints</code> 同 <code>disable</code> 中的描述。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Disabling.html">官方文档</a>。</p><h3 id="clear"><a href="#clear" class="headerlink" title="clear"></a>clear</h3><p>在指定行或函数处清除断点。参数可以是行号，函数名称或 <code>*</code> 跟一个地址。</p><p>用法：</p><ul><li><code>clear</code> 当不带参数时，清除所选栈帧在执行的源码行中的所有断点。</li><li><code>clear &lt;function&gt;</code>, <code>clear &lt;filename:function&gt;</code> 删除在命名函数的入口处设置的任何断点。</li><li><code>clear &lt;linenum&gt;</code>, <code>clear &lt;filename:linenum&gt;</code> 删除在指定的文件指定的行号的代码中设置的任何断点。</li><li><code>clear &lt;address&gt;</code> 清除指定程序指令的地址处的断点。</li></ul><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Delete-Breaks.html">官方文档</a>。</p><h3 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h3><p>删除一些断点或自动显示表达式。参数是用空格分隔的断点编号。要删除所有断点，不加参数。</p><p>用法： <code>delete [breakpoints] [list...]</code></p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Delete-Breaks.html">官方文档</a>。</p><h3 id="tbreak"><a href="#tbreak" class="headerlink" title="tbreak"></a>tbreak</h3><p>设置临时断点。参数形式同 <code>break</code> 一样。</p><p>除了断点是临时的之外，其他同 <code>break</code> 一样，所以在命中时会被删除。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Breaks.html">官方文档</a>。</p><h3 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h3><p>为表达式设置观察点。</p><p>用法： <code>watch [-l|-location] &lt;expr&gt;</code> 每当一个表达式的值改变时，观察点就会暂停程序执行。</p><p>如果给出了 <code>-l</code> 或者 <code>-location</code>，则它会对 <code>expr</code> 求值并观察它所指向的内存。例如，<code>watch *(int *)0x12345678</code> 将在指定的地址处观察一个 4 字节的区域（假设 int 占用 4 个字节）。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Set-Watchpoints.html">官方文档</a>。</p><h3 id="step"><a href="#step" class="headerlink" title="step"></a>step</h3><p>单步执行程序，直到到达不同的源码行。</p><p>用法： <code>step [N]</code> 参数 <code>N</code> 表示执行 N 次（或由于另一个原因直到程序停止）。</p><p>警告：如果当控制在没有调试信息的情况下编译的函数中使用 <code>step</code> 命令，则执行将继续进行，直到控制到达具有调试信息的函数。 同样，它不会进入没有调试信息编译的函数。</p><p>要执行没有调试信息的函数，请使用 <code>stepi</code> 命令，详见后文。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html">官方文档</a>。</p><h3 id="reverse-step"><a href="#reverse-step" class="headerlink" title="reverse-step"></a>reverse-step</h3><p>反向单步执行程序，直到到达另一个源码行的开头。</p><p>用法： <code>reverse-step [N]</code> 参数 <code>N</code> 表示执行 N 次（或由于另一个原因直到程序停止）。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Reverse-Execution.html">官方文档</a>。</p><h3 id="next"><a href="#next" class="headerlink" title="next"></a>next</h3><p>单步执行程序，执行完子程序调用。</p><p>用法： <code>next [N]</code></p><p>与 <code>step</code> 不同，如果当前的源代码行调用子程序，则此命令不会进入子程序，而是将其视为单个源代码行，继续执行。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html">官方文档</a>。</p><h3 id="reverse-next"><a href="#reverse-next" class="headerlink" title="reverse-next"></a>reverse-next</h3><p>反向步进程序，执行完子程序调用。</p><p>用法： <code>reverse-next [N]</code></p><p>如果要执行的源代码行调用子程序，则此命令不会进入子程序，调用被视为一个指令。</p><p>参数 <code>N</code> 表示执行 N 次（或由于另一个原因直到程序停止）。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Reverse-Execution.html">官方文档</a>。</p><h3 id="return"><a href="#return" class="headerlink" title="return"></a>return</h3><p>您可以使用 <code>return</code> 命令取消函数调用的执行。如果你给出一个表达式参数，它的值被用作函数的返回值。</p><p>用法： <code>return &lt;expression&gt;</code> 将 <code>expression</code> 的值作为函数的返回值并使函数直接返回。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Returning.html">官方文档</a>。</p><h3 id="finish"><a href="#finish" class="headerlink" title="finish"></a>finish</h3><p>执行直到选定的栈帧返回。</p><p>用法： <code>finish</code> 返回后，返回的值将被打印并放入到值历史记录中。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html">官方文档</a>。</p><h3 id="until"><a href="#until" class="headerlink" title="until"></a>until</h3><p>执行直到程序到达当前栈帧中当前行之后（与 <a href="#break">break</a> 命令相同的参数）的源码行。此命令用于通过一个多次的循环，以避免单步执行。</p><p>用法：<code>until &lt;location&gt;</code> 或 <code>u &lt;location&gt;</code> 继续运行程序，直到达到指定的位置，或者当前栈帧返回。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html">官方文档</a>。</p><h3 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h3><p>在信号或断点之后，继续运行被调试的程序。</p><p>用法： <code>continue [N]</code> 如果从断点开始，可以使用数字 <code>N</code> 作为参数，这意味着将该断点的忽略计数设置为 <code>N - 1</code>(以便断点在第 N 次到达之前不会中断)。如果启用了非停止模式（使用 <code>show non-stop</code> 查看），则仅继续当前线程，否则程序中的所有线程都将继续。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Continuing-and-Stepping.html">官方文档</a>。</p><h3 id="print"><a href="#print" class="headerlink" title="print"></a>print</h3><p>求值并打印表达式 EXP 的值。可访问的变量是所选栈帧的词法环境，以及范围为全局或整个文件的所有变量。</p><p>用法：</p><ul><li><code>print [expr]</code> 或 <code>print /f [expr]</code> <code>expr</code> 是一个（在源代码语言中的）表达式。</li></ul><p>默认情况下，<code>expr</code> 的值以适合其数据类型的格式打印；您可以通过指定 <code>/f</code> 来选择不同的格式，其中 <code>f</code> 是一个指定格式的字母；详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Output-Formats.html">输出格式</a>。</p><p>如果省略 <code>expr</code>，GDB 再次显示最后一个值。</p><p>要以每行一个成员带缩进的格式打印结构体变量请使用命令 <code>set print pretty on</code>，取消则使用命令 <code>set print pretty off</code>。</p><p>可使用命令 <code>show print</code> 查看所有打印的设置。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Data.html">官方文档</a>。</p><h3 id="x"><a href="#x" class="headerlink" title="x"></a>x</h3><p>检查内存。</p><p>用法： <code>x/nfu &lt;addr&gt;</code> 或 <code>x &lt;addr&gt;</code> <code>n</code>、<code>f</code> 和 <code>u</code> 都是可选参数，用于指定要显示的内存以及如何格式化。<code>addr</code> 是要开始显示内存的地址的表达式。</p><p><code>n</code> 重复次数（默认值是 1），指定要显示多少个单位（由 <code>u</code> 指定）的内存值。</p><p><code>f</code> 显示格式（初始默认值是 <code>x</code>），显示格式是 <code>print(&#39;x&#39;，&#39;d&#39;，&#39;u&#39;，&#39;o&#39;，&#39;t&#39;，&#39;a&#39;，&#39;c&#39;，&#39;f&#39;，&#39;s&#39;)</code> 使用的格式之一，再加 <code>i</code>（机器指令）。</p><p><code>u</code> 单位大小，<code>b</code> 表示单字节，<code>h</code> 表示双字节，<code>w</code> 表示四字节，<code>g</code> 表示八字节。</p><p>例如：</p><p><code>x/3uh 0x54320</code> 表示从地址 0x54320 开始以无符号十进制整数的格式，双字节为单位来显示 3 个内存值。</p><p><code>x/16xb 0x7f95b7d18870</code> 表示从地址 0x7f95b7d18870 开始以十六进制整数的格式，单字节为单位显示 16 个内存值。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Memory.html">官方文档</a>。</p><h3 id="display"><a href="#display" class="headerlink" title="display"></a>display</h3><p>每次程序暂停时，打印表达式 EXP 的值。</p><p>用法： <code>display &lt;expr&gt;</code>, <code>display/fmt &lt;expr&gt;</code> 或 <code>display/fmt &lt;addr&gt;</code> <code>fmt</code> 用于指定显示格式。像 <a href="#print">print</a> 命令里的 <code>/f</code> 一样。</p><p>对于格式 <code>i</code> 或 <code>s</code>，或者包括单位大小或单位数量，将表达式 <code>addr</code> 添加为每次程序停止时要检查的内存地址。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Auto-Display.html">官方文档</a>。</p><h3 id="info-display"><a href="#info-display" class="headerlink" title="info display"></a>info display</h3><p>打印自动显示的表达式列表，每个表达式都带有项目编号，但不显示其值。</p><p>包括被禁用的表达式和不能立即显示的表达式（当前不可用的自动变量）。</p><h3 id="undisplay"><a href="#undisplay" class="headerlink" title="undisplay"></a>undisplay</h3><p>取消某些表达式在程序暂停时的自动显示。参数是表达式的编号（使用 <code>info display</code> 查询编号）。不带参数表示取消所有自动显示表达式。</p><p><code>delete display</code> 具有与此命令相同的效果。</p><h3 id="disable-display"><a href="#disable-display" class="headerlink" title="disable display"></a>disable display</h3><p>禁用某些表达式在程序暂停时的自动显示。禁用的显示项目不会被自动打印，但不会被忘记。 它可能稍后再次被启用。</p><p>参数是表达式的编号（使用 <code>info display</code> 查询编号）。不带参数表示禁用所有自动显示表达式。</p><h3 id="enable-display"><a href="#enable-display" class="headerlink" title="enable display"></a>enable display</h3><p>启用某些表达式在程序暂停时的自动显示。</p><p>参数是重新显示的表达式的编号（使用 <code>info display</code> 查询编号）。不带参数表示启用所有自动显示表达式。</p><h3 id="help"><a href="#help" class="headerlink" title="help"></a>help</h3><p>打印命令列表。</p><p>您可以使用不带参数的 <code>help</code>（缩写为 <code>h</code>）来显示命令的类别名的简短列表。</p><p>使用 <code>help &lt;class&gt;</code> 您可以获取该类中的各个命令的列表。使用 <code>help &lt;command&gt;</code> 显示如何使用该命令。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Help.html">官方文档</a>。</p><h3 id="attach"><a href="#attach" class="headerlink" title="attach"></a>attach</h3><p>挂接到 GDB 之外的进程或文件。该命令可以将进程 ID 或设备文件作为参数。</p><p>对于进程 ID，您必须具有向进程发送信号的权限，并且必须具有与调试器相同的有效的 uid。</p><p>用法： <code>attach &lt;process-id&gt;</code> GDB 在安排调试指定的进程之后做的第一件事是暂停该进程。</p><p>无论是通过 <code>attach</code> 命令挂接的进程还是通过 <code>run</code> 命令启动的进程，您都可以使用的 GDB 命令来检查和修改挂接的进程。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Attach.html">官方文档</a>。</p><h3 id="run"><a href="#run" class="headerlink" title="run"></a>run</h3><p>启动被调试的程序。</p><p>可以直接指定参数，也可以用 <a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Arguments.html">set args</a> 设置（启动所需的）参数。</p><p>例如： <code>run arg1 arg2 ...</code> 等效于</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set args arg1 arg2 ...</span><br><span class="line">run</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>还允许使用 <code>&gt;</code>、 <code>&lt;</code> 或 <code>&gt;&gt;</code> 进行输入和输出重定向。</p><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Starting.html">官方文档</a>。</p><h3 id="backtrace"><a href="#backtrace" class="headerlink" title="backtrace"></a>backtrace</h3><p>打印整体栈帧信息。</p><ul><li><code>bt</code> 打印整体栈帧信息，每个栈帧一行。</li><li><code>bt n</code> 类似于上，但只打印最内层的 n 个栈帧。</li><li><code>bt -n</code> 类似于上，但只打印最外层的 n 个栈帧。</li><li><code>bt full n</code> 类似于 <code>bt n</code>，还打印局部变量的值。</li></ul><p><code>where</code> 和 <code>info stack</code>(缩写 <code>info s</code>) 是 <code>backtrace</code> 的别名。调用栈信息类似如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(gdb) where</span><br><span class="line">#0  vconn_stream_run (vconn=0x99e5e38) at lib/vconn-stream.c:232</span><br><span class="line">#1  0x080ed68a in vconn_run (vconn=0x99e5e38) at lib/vconn.c:276</span><br><span class="line">#2  0x080dc6c8 in rconn_run (rc=0x99dbbe0) at lib/rconn.c:513</span><br><span class="line">#3  0x08077b83 in ofconn_run (ofconn=0x99e8070, handle_openflow=0x805e274 &lt;handle_openflow&gt;) at ofproto/connmgr.c:1234</span><br><span class="line">#4  0x08075f92 in connmgr_run (mgr=0x99dc878, handle_openflow=0x805e274 &lt;handle_openflow&gt;) at ofproto/connmgr.c:286</span><br><span class="line">#5  0x08057d58 in ofproto_run (p=0x99d9ba0) at ofproto/ofproto.c:1159</span><br><span class="line">#6  0x0804f96b in bridge_run () at vswitchd/bridge.c:2248</span><br><span class="line">#7  0x08054168 in main (argc=4, argv=0xbf8333e4) at vswitchd/ovs-vswitchd.c:125</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Backtrace.html">官方文档</a>。</p><h3 id="ptype"><a href="#ptype" class="headerlink" title="ptype"></a>ptype</h3><p>打印类型 TYPE 的定义。</p><p>用法： <code>ptype[/FLAGS] TYPE-NAME | EXPRESSION</code></p><p>参数可以是由 <code>typedef</code> 定义的类型名， 或者 <code>struct STRUCT-TAG</code> 或者 <code>class CLASS-NAME</code> 或者 <code>union UNION-TAG</code> 或者 <code>enum ENUM-TAG</code>。</p><p>根据所选的栈帧的词法上下文来查找该名字。</p><p>类似的命令是 <code>whatis</code>，区别在于 <code>whatis</code> 不展开由 <code>typedef</code> 定义的数据类型，而 <code>ptype</code> 会展开，举例如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/* 类型声明与变量定义 */</span><br><span class="line">typedef double real_t;</span><br><span class="line">struct complex &#123;</span><br><span class="line">    real_t real;</span><br><span class="line">    double imag;</span><br><span class="line">&#125;;</span><br><span class="line">typedef struct complex complex_t;</span><br><span class="line"></span><br><span class="line">complex_t var;</span><br><span class="line">real_t *real_pointer_var;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这两个命令给出了如下输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">(gdb) whatis var</span><br><span class="line">type = complex_t</span><br><span class="line">(gdb) ptype var</span><br><span class="line">type = struct complex &#123;</span><br><span class="line">    real_t real;</span><br><span class="line">    double imag;</span><br><span class="line">&#125;</span><br><span class="line">(gdb) whatis complex_t</span><br><span class="line">type = struct complex</span><br><span class="line">(gdb) whatis struct complex</span><br><span class="line">type = struct complex</span><br><span class="line">(gdb) ptype struct complex</span><br><span class="line">type = struct complex &#123;</span><br><span class="line">    real_t real;</span><br><span class="line">    double imag;</span><br><span class="line">&#125;</span><br><span class="line">(gdb) whatis real_pointer_var</span><br><span class="line">type = real_t *</span><br><span class="line">(gdb) ptype real_pointer_var</span><br><span class="line">type = double *</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>详见<a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/Symbols.html">官方文档</a>。</p><hr><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><ul><li><a target="_blank" rel="noopener" href="https://sourceware.org/gdb/current/onlinedocs/gdb/">Debugging with GDB</a></li></ul><hr><p>译者：<a target="_blank" rel="noopener" href="https://github.com/robot527">robot527</a> 校对：<a target="_blank" rel="noopener" href="https://github.com/mudongliang">mudongliang</a>， <a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p><script defer src="https://pv.undefined.today/tracker.min.js" data-website-id="LinuxCNMirror-tracker"></script></div></div></body></html>