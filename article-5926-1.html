<!doctype html><html lang="en"><head><meta name="description" content="一个LinuxCN的镜像站"><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>systemctl 命令完全指南 - 归墟星火集 又一个 LinuxCN 站点</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 又一个 LinuxCN 站点 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">systemctl 命令完全指南</h1><span class="post-date">2015-07-31</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/systemd/">systemd</a> <a href="/tags/systemctl/">systemctl</a></div><div class="post-content"><p>Systemctl是一个systemd工具，主要负责控制systemd系统和服务管理器。</p><p>Systemd是一个系统管理守护进程、工具和库的集合，用于取代System V初始进程。Systemd的功能是用于集中管理和配置类UNIX系统。</p><p>在Linux生态系统中，Systemd被部署到了大多数的标准Linux发行版中，只有为数不多的几个发行版尚未部署。Systemd通常是所有其它守护进程的父进程，但并非总是如此。</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201507/30/210221zg6czg8yogegegay.jpg" alt="Manage Linux Services Using Systemctl"></p><p><em>使用Systemctl管理Linux服务</em></p><p>本文旨在阐明在运行systemd的系统上“如何控制系统和服务”。</p><h3 id="Systemd初体验和Systemctl基础"><a href="#Systemd初体验和Systemctl基础" class="headerlink" title="Systemd初体验和Systemctl基础"></a>Systemd初体验和Systemctl基础</h3><h4 id="1-首先检查你的系统中是否安装有systemd并确定当前安装的版本"><a href="#1-首先检查你的系统中是否安装有systemd并确定当前安装的版本" class="headerlink" title="1. 首先检查你的系统中是否安装有systemd并确定当前安装的版本"></a>1. 首先检查你的系统中是否安装有systemd并确定当前安装的版本</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># systemctl --version</span><br><span class="line"></span><br><span class="line">systemd 215</span><br><span class="line">+PAM +AUDIT +SELINUX +IMA +SYSVINIT +LIBCRYPTSETUP +GCRYPT +ACL +XZ -SECCOMP -APPARMOR</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上例中很清楚地表明，我们安装了215版本的systemd。</p><h4 id="2-检查systemd和systemctl的二进制文件和库文件的安装位置"><a href="#2-检查systemd和systemctl的二进制文件和库文件的安装位置" class="headerlink" title="2. 检查systemd和systemctl的二进制文件和库文件的安装位置"></a>2. 检查systemd和systemctl的二进制文件和库文件的安装位置</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># whereis systemd </span><br><span class="line">systemd: /usr/lib/systemd /etc/systemd /usr/share/systemd /usr/share/man/man1/systemd.1.gz</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># whereis systemctl</span><br><span class="line">systemctl: /usr/bin/systemctl /usr/share/man/man1/systemctl.1.gz</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3-检查systemd是否运行"><a href="#3-检查systemd是否运行" class="headerlink" title="3. 检查systemd是否运行"></a>3. 检查systemd是否运行</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># ps -eaf | grep [s]ystemd</span><br><span class="line"></span><br><span class="line">root         1     0  0 16:27 ?        00:00:00 /usr/lib/systemd/systemd --switched-root --system --deserialize 23</span><br><span class="line">root       444     1  0 16:27 ?        00:00:00 /usr/lib/systemd/systemd-journald</span><br><span class="line">root       469     1  0 16:27 ?        00:00:00 /usr/lib/systemd/systemd-udevd</span><br><span class="line">root       555     1  0 16:27 ?        00:00:00 /usr/lib/systemd/systemd-logind</span><br><span class="line">dbus       556     1  0 16:27 ?        00:00:00 /bin/dbus-daemon --system --address=systemd: --nofork --nopidfile --systemd-activation</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：systemd是作为父进程（PID&#x3D;1）运行的。在上面带（-e）参数的ps命令输出中，选择所有进程，（-a）选择除会话前导外的所有进程，并使用（-f）参数输出完整格式列表（即 -eaf）。</p><p>也请注意上例中后随的方括号和例子中剩余部分。方括号表达式是grep的字符类表达式的一部分。</p><h4 id="4-分析systemd启动进程"><a href="#4-分析systemd启动进程" class="headerlink" title="4. 分析systemd启动进程"></a>4. 分析systemd启动进程</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># systemd-analyze</span><br><span class="line">Startup finished in 487ms (kernel) + 2.776s (initrd) + 20.229s (userspace) = 23.493s</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="5-分析启动时各个进程花费的时间"><a href="#5-分析启动时各个进程花费的时间" class="headerlink" title="5. 分析启动时各个进程花费的时间"></a>5. 分析启动时各个进程花费的时间</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># systemd-analyze blame</span><br><span class="line"></span><br><span class="line">8.565s mariadb.service</span><br><span class="line">7.991s webmin.service</span><br><span class="line">6.095s postfix.service</span><br><span class="line">4.311s httpd.service</span><br><span class="line">3.926s firewalld.service</span><br><span class="line">3.780s kdump.service</span><br><span class="line">3.238s tuned.service</span><br><span class="line">1.712s network.service</span><br><span class="line">1.394s lvm2-monitor.service</span><br><span class="line">1.126s systemd-logind.service</span><br><span class="line">....</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="6-分析启动时的关键链"><a href="#6-分析启动时的关键链" class="headerlink" title="6. 分析启动时的关键链"></a>6. 分析启动时的关键链</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># systemd-analyze critical-chain</span><br><span class="line"></span><br><span class="line">The time after the unit is active or started is printed after the &quot;@&quot; character.</span><br><span class="line">The time the unit takes to start is printed after the &quot;+&quot; character.</span><br><span class="line"></span><br><span class="line">multi-user.target @20.222s</span><br><span class="line">└─mariadb.service @11.657s +8.565s</span><br><span class="line">  └─network.target @11.168s</span><br><span class="line">    └─network.service @9.456s +1.712s</span><br><span class="line">      └─NetworkManager.service @8.858s +596ms</span><br><span class="line">        └─firewalld.service @4.931s +3.926s</span><br><span class="line">          └─basic.target @4.916s</span><br><span class="line">            └─sockets.target @4.916s</span><br><span class="line">              └─dbus.socket @4.916s</span><br><span class="line">                └─sysinit.target @4.905s</span><br><span class="line">                  └─systemd-update-utmp.service @4.864s +39ms</span><br><span class="line">                    └─auditd.service @4.563s +301ms</span><br><span class="line">                      └─systemd-tmpfiles-setup.service @4.485s +69ms</span><br><span class="line">                        └─rhel-import-state.service @4.342s +142ms</span><br><span class="line">                          └─local-fs.target @4.324s</span><br><span class="line">                            └─boot.mount @4.286s +31ms</span><br><span class="line">                              └─systemd-fsck@dev-disk-by\x2duuid-79f594ad\x2da332\x2d4730\x2dbb5f\x2d85d19608096</span><br><span class="line">                                └─dev-disk-by\x2duuid-79f594ad\x2da332\x2d4730\x2dbb5f\x2d85d196080964.device @4</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>重要</strong>：Systemctl接受服务（.service），挂载点（.mount），套接口（.socket）和设备（.device）作为单元。</p><h4 id="7-列出所有可用单元"><a href="#7-列出所有可用单元" class="headerlink" title="7. 列出所有可用单元"></a>7. 列出所有可用单元</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># systemctl list-unit-files</span><br><span class="line"></span><br><span class="line">UNIT FILE                                   STATE   </span><br><span class="line">proc-sys-fs-binfmt_misc.automount           static  </span><br><span class="line">dev-hugepages.mount                         static  </span><br><span class="line">dev-mqueue.mount                            static  </span><br><span class="line">proc-sys-fs-binfmt_misc.mount               static  </span><br><span class="line">sys-fs-fuse-connections.mount               static  </span><br><span class="line">sys-kernel-config.mount                     static  </span><br><span class="line">sys-kernel-debug.mount                      static  </span><br><span class="line">tmp.mount                                   disabled</span><br><span class="line">brandbot.path                               disabled</span><br><span class="line">.....</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="8-列出所有运行中单元"><a href="#8-列出所有运行中单元" class="headerlink" title="8. 列出所有运行中单元"></a>8. 列出所有运行中单元</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># systemctl list-units</span><br><span class="line"></span><br><span class="line">UNIT                                        LOAD   ACTIVE SUB       DESCRIPTION</span><br><span class="line">proc-sys-fs-binfmt_misc.automount           loaded active waiting   Arbitrary Executable File Formats File Syste</span><br><span class="line">sys-devices-pc...0-1:0:0:0-block-sr0.device loaded active plugged   VBOX_CD-ROM</span><br><span class="line">sys-devices-pc...:00:03.0-net-enp0s3.device loaded active plugged   PRO/1000 MT Desktop Adapter</span><br><span class="line">sys-devices-pc...00:05.0-sound-card0.device loaded active plugged   82801AA AC&#x27;97 Audio Controller</span><br><span class="line">sys-devices-pc...:0:0-block-sda-sda1.device loaded active plugged   VBOX_HARDDISK</span><br><span class="line">sys-devices-pc...:0:0-block-sda-sda2.device loaded active plugged   LVM PV Qzyo3l-qYaL-uRUa-Cjuk-pljo-qKtX-VgBQ8</span><br><span class="line">sys-devices-pc...0-2:0:0:0-block-sda.device loaded active plugged   VBOX_HARDDISK</span><br><span class="line">sys-devices-pl...erial8250-tty-ttyS0.device loaded active plugged   /sys/devices/platform/serial8250/tty/ttyS0</span><br><span class="line">sys-devices-pl...erial8250-tty-ttyS1.device loaded active plugged   /sys/devices/platform/serial8250/tty/ttyS1</span><br><span class="line">sys-devices-pl...erial8250-tty-ttyS2.device loaded active plugged   /sys/devices/platform/serial8250/tty/ttyS2</span><br><span class="line">sys-devices-pl...erial8250-tty-ttyS3.device loaded active plugged   /sys/devices/platform/serial8250/tty/ttyS3</span><br><span class="line">sys-devices-virtual-block-dm\x2d0.device    loaded active plugged   /sys/devices/virtual/block/dm-0</span><br><span class="line">sys-devices-virtual-block-dm\x2d1.device    loaded active plugged   /sys/devices/virtual/block/dm-1</span><br><span class="line">sys-module-configfs.device                  loaded active plugged   /sys/module/configfs</span><br><span class="line">...</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="9-列出所有失败单元"><a href="#9-列出所有失败单元" class="headerlink" title="9. 列出所有失败单元"></a>9. 列出所有失败单元</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># systemctl --failed</span><br><span class="line"></span><br><span class="line">UNIT          LOAD   ACTIVE SUB    DESCRIPTION</span><br><span class="line">kdump.service loaded failed failed Crash recovery kernel arming</span><br><span class="line"></span><br><span class="line">LOAD   = Reflects whether the unit definition was properly loaded.</span><br><span class="line">ACTIVE = The high-level unit activation state, i.e. generalization of SUB.</span><br><span class="line">SUB    = The low-level unit activation state, values depend on unit type.</span><br><span class="line"></span><br><span class="line">1 loaded units listed. Pass --all to see loaded but inactive units, too.</span><br><span class="line">To show all installed unit files use &#x27;systemctl list-unit-files&#x27;.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="10-检查某个单元（如-cron-service）是否启用"><a href="#10-检查某个单元（如-cron-service）是否启用" class="headerlink" title="10. 检查某个单元（如 cron.service）是否启用"></a>10. 检查某个单元（如 cron.service）是否启用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># systemctl is-enabled crond.service</span><br><span class="line"></span><br><span class="line">enabled</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="11-检查某个单元或服务是否运行"><a href="#11-检查某个单元或服务是否运行" class="headerlink" title="11. 检查某个单元或服务是否运行"></a>11. 检查某个单元或服务是否运行</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># systemctl status firewalld.service</span><br><span class="line"></span><br><span class="line">firewalld.service - firewalld - dynamic firewall daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled)</span><br><span class="line">   Active: active (running) since Tue 2015-04-28 16:27:55 IST; 34min ago</span><br><span class="line"> Main PID: 549 (firewalld)</span><br><span class="line">   CGroup: /system.slice/firewalld.service</span><br><span class="line">           └─549 /usr/bin/python -Es /usr/sbin/firewalld --nofork --nopid</span><br><span class="line"></span><br><span class="line">Apr 28 16:27:51 tecmint systemd[1]: Starting firewalld - dynamic firewall daemon...</span><br><span class="line">Apr 28 16:27:55 tecmint systemd[1]: Started firewalld - dynamic firewall daemon.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="使用Systemctl控制并管理服务"><a href="#使用Systemctl控制并管理服务" class="headerlink" title="使用Systemctl控制并管理服务"></a>使用Systemctl控制并管理服务</h3><h4 id="12-列出所有服务（包括启用的和禁用的）"><a href="#12-列出所有服务（包括启用的和禁用的）" class="headerlink" title="12. 列出所有服务（包括启用的和禁用的）"></a>12. 列出所有服务（包括启用的和禁用的）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># systemctl list-unit-files --type=service</span><br><span class="line"></span><br><span class="line">UNIT FILE                                   STATE   </span><br><span class="line">arp-ethers.service                          disabled</span><br><span class="line">auditd.service                              enabled </span><br><span class="line">autovt@.service                             disabled</span><br><span class="line">blk-availability.service                    disabled</span><br><span class="line">brandbot.service                            static  </span><br><span class="line">collectd.service                            disabled</span><br><span class="line">console-getty.service                       disabled</span><br><span class="line">console-shell.service                       disabled</span><br><span class="line">cpupower.service                            disabled</span><br><span class="line">crond.service                               enabled </span><br><span class="line">dbus-org.fedoraproject.FirewallD1.service   enabled </span><br><span class="line">....</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="13-Linux中如何启动、重启、停止、重载服务以及检查服务（如-httpd-service）状态"><a href="#13-Linux中如何启动、重启、停止、重载服务以及检查服务（如-httpd-service）状态" class="headerlink" title="13. Linux中如何启动、重启、停止、重载服务以及检查服务（如 httpd.service）状态"></a>13. Linux中如何启动、重启、停止、重载服务以及检查服务（如 httpd.service）状态</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># systemctl start httpd.service</span><br><span class="line"># systemctl restart httpd.service</span><br><span class="line"># systemctl stop httpd.service</span><br><span class="line"># systemctl reload httpd.service</span><br><span class="line"># systemctl status httpd.service</span><br><span class="line"></span><br><span class="line">httpd.service - The Apache HTTP Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled)</span><br><span class="line">   Active: active (running) since Tue 2015-04-28 17:21:30 IST; 6s ago</span><br><span class="line">  Process: 2876 ExecStop=/bin/kill -WINCH $&#123;MAINPID&#125; (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 2881 (httpd)</span><br><span class="line">   Status: &quot;Processing requests...&quot;</span><br><span class="line">   CGroup: /system.slice/httpd.service</span><br><span class="line">           ├─2881 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─2884 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─2885 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─2886 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           ├─2887 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">           └─2888 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line"></span><br><span class="line">Apr 28 17:21:30 tecmint systemd[1]: Starting The Apache HTTP Server...</span><br><span class="line">Apr 28 17:21:30 tecmint httpd[2881]: AH00558: httpd: Could not reliably determine the server&#x27;s fully q...ssage</span><br><span class="line">Apr 28 17:21:30 tecmint systemd[1]: Started The Apache HTTP Server.</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show in full.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：当我们使用systemctl的start，restart，stop和reload命令时，我们不会从终端获取到任何输出内容，只有status命令可以打印输出。</p><h4 id="14-如何激活服务并在启动时启用或禁用服务（即系统启动时自动启动服务）"><a href="#14-如何激活服务并在启动时启用或禁用服务（即系统启动时自动启动服务）" class="headerlink" title="14. 如何激活服务并在启动时启用或禁用服务（即系统启动时自动启动服务）"></a>14. 如何激活服务并在启动时启用或禁用服务（即系统启动时自动启动服务）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># systemctl is-active httpd.service</span><br><span class="line"># systemctl enable httpd.service</span><br><span class="line"># systemctl disable httpd.service</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="15-如何屏蔽（让它不能启动）或显示服务（如-httpd-service）"><a href="#15-如何屏蔽（让它不能启动）或显示服务（如-httpd-service）" class="headerlink" title="15. 如何屏蔽（让它不能启动）或显示服务（如 httpd.service）"></a>15. 如何屏蔽（让它不能启动）或显示服务（如 httpd.service）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># systemctl mask httpd.service</span><br><span class="line">ln -s &#x27;/dev/null&#x27; &#x27;/etc/systemd/system/httpd.service&#x27;</span><br><span class="line"></span><br><span class="line"># systemctl unmask httpd.service</span><br><span class="line">rm &#x27;/etc/systemd/system/httpd.service&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="16-使用systemctl命令杀死服务"><a href="#16-使用systemctl命令杀死服务" class="headerlink" title="16. 使用systemctl命令杀死服务"></a>16. 使用systemctl命令杀死服务</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># systemctl kill httpd</span><br><span class="line"># systemctl status httpd</span><br><span class="line"></span><br><span class="line">httpd.service - The Apache HTTP Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled)</span><br><span class="line">   Active: failed (Result: exit-code) since Tue 2015-04-28 18:01:42 IST; 28min ago</span><br><span class="line"> Main PID: 2881 (code=exited, status=0/SUCCESS)</span><br><span class="line">   Status: &quot;Total requests: 0; Current requests/sec: 0; Current traffic:   0 B/sec&quot;</span><br><span class="line"></span><br><span class="line">Apr 28 17:37:29 tecmint systemd[1]: httpd.service: Got notification message from PID 2881, but recepti...bled.</span><br><span class="line">Apr 28 17:37:29 tecmint systemd[1]: httpd.service: Got notification message from PID 2881, but recepti...bled.</span><br><span class="line">Apr 28 17:37:39 tecmint systemd[1]: httpd.service: Got notification message from PID 2881, but recepti...bled.</span><br><span class="line">Apr 28 17:37:39 tecmint systemd[1]: httpd.service: Got notification message from PID 2881, but recepti...bled.</span><br><span class="line">Apr 28 17:37:49 tecmint systemd[1]: httpd.service: Got notification message from PID 2881, but recepti...bled.</span><br><span class="line">Apr 28 17:37:49 tecmint systemd[1]: httpd.service: Got notification message from PID 2881, but recepti...bled.</span><br><span class="line">Apr 28 17:37:59 tecmint systemd[1]: httpd.service: Got notification message from PID 2881, but recepti...bled.</span><br><span class="line">Apr 28 17:37:59 tecmint systemd[1]: httpd.service: Got notification message from PID 2881, but recepti...bled.</span><br><span class="line">Apr 28 18:01:42 tecmint systemd[1]: httpd.service: control process exited, code=exited status=226</span><br><span class="line">Apr 28 18:01:42 tecmint systemd[1]: Unit httpd.service entered failed state.</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show in full.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="使用Systemctl控制并管理挂载点"><a href="#使用Systemctl控制并管理挂载点" class="headerlink" title="使用Systemctl控制并管理挂载点"></a>使用Systemctl控制并管理挂载点</h3><h4 id="17-列出所有系统挂载点"><a href="#17-列出所有系统挂载点" class="headerlink" title="17. 列出所有系统挂载点"></a>17. 列出所有系统挂载点</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># systemctl list-unit-files --type=mount</span><br><span class="line"></span><br><span class="line">UNIT FILE                     STATE   </span><br><span class="line">dev-hugepages.mount           static  </span><br><span class="line">dev-mqueue.mount              static  </span><br><span class="line">proc-sys-fs-binfmt_misc.mount static  </span><br><span class="line">sys-fs-fuse-connections.mount static  </span><br><span class="line">sys-kernel-config.mount       static  </span><br><span class="line">sys-kernel-debug.mount        static  </span><br><span class="line">tmp.mount                     disabled</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="18-挂载、卸载、重新挂载、重载系统挂载点并检查系统中挂载点状态"><a href="#18-挂载、卸载、重新挂载、重载系统挂载点并检查系统中挂载点状态" class="headerlink" title="18. 挂载、卸载、重新挂载、重载系统挂载点并检查系统中挂载点状态"></a>18. 挂载、卸载、重新挂载、重载系统挂载点并检查系统中挂载点状态</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># systemctl start tmp.mount</span><br><span class="line"># systemctl stop tmp.mount</span><br><span class="line"># systemctl restart tmp.mount</span><br><span class="line"># systemctl reload tmp.mount</span><br><span class="line"># systemctl status tmp.mount</span><br><span class="line"></span><br><span class="line">tmp.mount - Temporary Directory</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/tmp.mount; disabled)</span><br><span class="line">   Active: active (mounted) since Tue 2015-04-28 17:46:06 IST; 2min 48s ago</span><br><span class="line">    Where: /tmp</span><br><span class="line">     What: tmpfs</span><br><span class="line">     Docs: man:hier(7)</span><br><span class="line"></span><br><span class="line">http://www.freedesktop.org/wiki/Software/systemd/APIFileSystems</span><br><span class="line"></span><br><span class="line">  Process: 3908 ExecMount=/bin/mount tmpfs /tmp -t tmpfs -o mode=1777,strictatime (code=exited, status=0/SUCCESS)</span><br><span class="line"></span><br><span class="line">Apr 28 17:46:06 tecmint systemd[1]: Mounting Temporary Directory...</span><br><span class="line">Apr 28 17:46:06 tecmint systemd[1]: tmp.mount: Directory /tmp to mount over is not empty, mounting anyway.</span><br><span class="line">Apr 28 17:46:06 tecmint systemd[1]: Mounted Temporary Directory.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="19-在启动时激活、启用或禁用挂载点（系统启动时自动挂载）"><a href="#19-在启动时激活、启用或禁用挂载点（系统启动时自动挂载）" class="headerlink" title="19. 在启动时激活、启用或禁用挂载点（系统启动时自动挂载）"></a>19. 在启动时激活、启用或禁用挂载点（系统启动时自动挂载）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># systemctl is-active tmp.mount</span><br><span class="line"># systemctl enable tmp.mount</span><br><span class="line"># systemctl disable  tmp.mount</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="20-在Linux中屏蔽（让它不能启用）或可见挂载点"><a href="#20-在Linux中屏蔽（让它不能启用）或可见挂载点" class="headerlink" title="20. 在Linux中屏蔽（让它不能启用）或可见挂载点"></a>20. 在Linux中屏蔽（让它不能启用）或可见挂载点</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># systemctl mask tmp.mount</span><br><span class="line"></span><br><span class="line">ln -s &#x27;/dev/null&#x27; &#x27;/etc/systemd/system/tmp.mount&#x27;</span><br><span class="line"></span><br><span class="line"># systemctl unmask tmp.mount</span><br><span class="line"></span><br><span class="line">rm &#x27;/etc/systemd/system/tmp.mount&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="使用Systemctl控制并管理套接口"><a href="#使用Systemctl控制并管理套接口" class="headerlink" title="使用Systemctl控制并管理套接口"></a>使用Systemctl控制并管理套接口</h3><h4 id="21-列出所有可用系统套接口"><a href="#21-列出所有可用系统套接口" class="headerlink" title="21. 列出所有可用系统套接口"></a>21. 列出所有可用系统套接口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># systemctl list-unit-files --type=socket</span><br><span class="line"></span><br><span class="line">UNIT FILE                    STATE   </span><br><span class="line">dbus.socket                  static  </span><br><span class="line">dm-event.socket              enabled </span><br><span class="line">lvm2-lvmetad.socket          enabled </span><br><span class="line">rsyncd.socket                disabled</span><br><span class="line">sshd.socket                  disabled</span><br><span class="line">syslog.socket                static  </span><br><span class="line">systemd-initctl.socket       static  </span><br><span class="line">systemd-journald.socket      static  </span><br><span class="line">systemd-shutdownd.socket     static  </span><br><span class="line">systemd-udevd-control.socket static  </span><br><span class="line">systemd-udevd-kernel.socket  static  </span><br><span class="line"></span><br><span class="line">11 unit files listed.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="22-在Linux中启动、重启、停止、重载套接口并检查其状态"><a href="#22-在Linux中启动、重启、停止、重载套接口并检查其状态" class="headerlink" title="22. 在Linux中启动、重启、停止、重载套接口并检查其状态"></a>22. 在Linux中启动、重启、停止、重载套接口并检查其状态</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># systemctl start cups.socket</span><br><span class="line"># systemctl restart cups.socket</span><br><span class="line"># systemctl stop cups.socket</span><br><span class="line"># systemctl reload cups.socket</span><br><span class="line"># systemctl status cups.socket</span><br><span class="line"></span><br><span class="line">cups.socket - CUPS Printing Service Sockets</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/cups.socket; enabled)</span><br><span class="line">   Active: active (listening) since Tue 2015-04-28 18:10:59 IST; 8s ago</span><br><span class="line">   Listen: /var/run/cups/cups.sock (Stream)</span><br><span class="line"></span><br><span class="line">Apr 28 18:10:59 tecmint systemd[1]: Starting CUPS Printing Service Sockets.</span><br><span class="line">Apr 28 18:10:59 tecmint systemd[1]: Listening on CUPS Printing Service Sockets.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="23-在启动时激活套接口，并启用或禁用它（系统启动时自启动）"><a href="#23-在启动时激活套接口，并启用或禁用它（系统启动时自启动）" class="headerlink" title="23. 在启动时激活套接口，并启用或禁用它（系统启动时自启动）"></a>23. 在启动时激活套接口，并启用或禁用它（系统启动时自启动）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># systemctl is-active cups.socket</span><br><span class="line"># systemctl enable cups.socket</span><br><span class="line"># systemctl disable cups.socket</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="24-屏蔽（使它不能启动）或显示套接口"><a href="#24-屏蔽（使它不能启动）或显示套接口" class="headerlink" title="24. 屏蔽（使它不能启动）或显示套接口"></a>24. 屏蔽（使它不能启动）或显示套接口</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># systemctl mask cups.socket</span><br><span class="line">ln -s &#x27;/dev/null&#x27; &#x27;/etc/systemd/system/cups.socket&#x27;</span><br><span class="line"></span><br><span class="line"># systemctl unmask cups.socket</span><br><span class="line">rm &#x27;/etc/systemd/system/cups.socket&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="服务的CPU利用率（分配额）"><a href="#服务的CPU利用率（分配额）" class="headerlink" title="服务的CPU利用率（分配额）"></a>服务的CPU利用率（分配额）</h3><h4 id="25-获取当前某个服务的CPU分配额（如httpd）"><a href="#25-获取当前某个服务的CPU分配额（如httpd）" class="headerlink" title="25. 获取当前某个服务的CPU分配额（如httpd）"></a>25. 获取当前某个服务的CPU分配额（如httpd）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># systemctl show -p CPUShares httpd.service</span><br><span class="line"></span><br><span class="line">CPUShares=1024</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：各个服务的默认CPU分配份额&#x3D;1024，你可以增加&#x2F;减少某个进程的CPU分配份额。</p><h4 id="26-将某个服务（httpd-service）的CPU分配份额限制为2000-CPUShares"><a href="#26-将某个服务（httpd-service）的CPU分配份额限制为2000-CPUShares" class="headerlink" title="26. 将某个服务（httpd.service）的CPU分配份额限制为2000 CPUShares&#x2F;"></a>26. 将某个服务（httpd.service）的CPU分配份额限制为2000 CPUShares&#x2F;</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># systemctl set-property httpd.service CPUShares=2000</span><br><span class="line"># systemctl show -p CPUShares httpd.service</span><br><span class="line"></span><br><span class="line">CPUShares=2000</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>注意</strong>：当你为某个服务设置CPUShares，会自动创建一个以服务名命名的目录（如 httpd.service），里面包含了一个名为90-CPUShares.conf的文件，该文件含有CPUShare限制信息，你可以通过以下方式查看该文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># vi /etc/systemd/system/httpd.service.d/90-CPUShares.conf </span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">CPUShares=2000        </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="27-检查某个服务的所有配置细节"><a href="#27-检查某个服务的所有配置细节" class="headerlink" title="27. 检查某个服务的所有配置细节"></a>27. 检查某个服务的所有配置细节</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># systemctl show httpd</span><br><span class="line"></span><br><span class="line">Id=httpd.service</span><br><span class="line">Names=httpd.service</span><br><span class="line">Requires=basic.target</span><br><span class="line">Wants=system.slice</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line">Conflicts=shutdown.target</span><br><span class="line">Before=shutdown.target multi-user.target</span><br><span class="line">After=network.target remote-fs.target nss-lookup.target systemd-journald.socket basic.target system.slice</span><br><span class="line">Description=The Apache HTTP Server</span><br><span class="line">LoadState=loaded</span><br><span class="line">ActiveState=active</span><br><span class="line">SubState=running</span><br><span class="line">FragmentPath=/usr/lib/systemd/system/httpd.service</span><br><span class="line">....</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="28-分析某个服务（httpd）的关键链"><a href="#28-分析某个服务（httpd）的关键链" class="headerlink" title="28. 分析某个服务（httpd）的关键链"></a>28. 分析某个服务（httpd）的关键链</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># systemd-analyze critical-chain httpd.service</span><br><span class="line"></span><br><span class="line">The time after the unit is active or started is printed after the &quot;@&quot; character.</span><br><span class="line">The time the unit takes to start is printed after the &quot;+&quot; character.</span><br><span class="line"></span><br><span class="line">httpd.service +142ms</span><br><span class="line">└─network.target @11.168s</span><br><span class="line">  └─network.service @9.456s +1.712s</span><br><span class="line">    └─NetworkManager.service @8.858s +596ms</span><br><span class="line">      └─firewalld.service @4.931s +3.926s</span><br><span class="line">        └─basic.target @4.916s</span><br><span class="line">          └─sockets.target @4.916s</span><br><span class="line">            └─dbus.socket @4.916s</span><br><span class="line">              └─sysinit.target @4.905s</span><br><span class="line">                └─systemd-update-utmp.service @4.864s +39ms</span><br><span class="line">                  └─auditd.service @4.563s +301ms</span><br><span class="line">                    └─systemd-tmpfiles-setup.service @4.485s +69ms</span><br><span class="line">                      └─rhel-import-state.service @4.342s +142ms</span><br><span class="line">                        └─local-fs.target @4.324s</span><br><span class="line">                          └─boot.mount @4.286s +31ms</span><br><span class="line">                            └─systemd-fsck@dev-disk-by\x2duuid-79f594ad\x2da332\x2d4730\x2dbb5f\x2d85d196080964.service @4.092s +149ms</span><br><span class="line">                              └─dev-disk-by\x2duuid-79f594ad\x2da332\x2d4730\x2dbb5f\x2d85d196080964.device @4.092s</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="29-获取某个服务（httpd）的依赖性列表"><a href="#29-获取某个服务（httpd）的依赖性列表" class="headerlink" title="29. 获取某个服务（httpd）的依赖性列表"></a>29. 获取某个服务（httpd）的依赖性列表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># systemctl list-dependencies httpd.service</span><br><span class="line"></span><br><span class="line">httpd.service</span><br><span class="line">├─system.slice</span><br><span class="line">└─basic.target</span><br><span class="line">  ├─firewalld.service</span><br><span class="line">  ├─microcode.service</span><br><span class="line">  ├─rhel-autorelabel-mark.service</span><br><span class="line">  ├─rhel-autorelabel.service</span><br><span class="line">  ├─rhel-configure.service</span><br><span class="line">  ├─rhel-dmesg.service</span><br><span class="line">  ├─rhel-loadmodules.service</span><br><span class="line">  ├─paths.target</span><br><span class="line">  ├─slices.target</span><br><span class="line">  │ ├─-.slice</span><br><span class="line">  │ └─system.slice</span><br><span class="line">  ├─sockets.target</span><br><span class="line">  │ ├─dbus.socket</span><br><span class="line">....</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="30-按等级列出控制组"><a href="#30-按等级列出控制组" class="headerlink" title="30. 按等级列出控制组"></a>30. 按等级列出控制组</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># systemd-cgls</span><br><span class="line"></span><br><span class="line">├─1 /usr/lib/systemd/systemd --switched-root --system --deserialize 23</span><br><span class="line">├─user.slice</span><br><span class="line">│ └─user-0.slice</span><br><span class="line">│   └─session-1.scope</span><br><span class="line">│     ├─2498 sshd: root@pts/0    </span><br><span class="line">│     ├─2500 -bash</span><br><span class="line">│     ├─4521 systemd-cgls</span><br><span class="line">│     └─4522 systemd-cgls</span><br><span class="line">└─system.slice</span><br><span class="line">  ├─httpd.service</span><br><span class="line">  │ ├─4440 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">  │ ├─4442 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">  │ ├─4443 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">  │ ├─4444 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">  │ ├─4445 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">  │ └─4446 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">  ├─polkit.service</span><br><span class="line">  │ └─721 /usr/lib/polkit-1/polkitd --no-debug</span><br><span class="line">....</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="31-按CPU、内存、输入和输出列出控制组"><a href="#31-按CPU、内存、输入和输出列出控制组" class="headerlink" title="31. 按CPU、内存、输入和输出列出控制组"></a>31. 按CPU、内存、输入和输出列出控制组</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># systemd-cgtop</span><br><span class="line"></span><br><span class="line">Path                                                              Tasks   %CPU   Memory  Input/s Output/s</span><br><span class="line"></span><br><span class="line">/                                                                    83    1.0   437.8M        -        -</span><br><span class="line">/system.slice                                                         -    0.1        -        -        -</span><br><span class="line">/system.slice/mariadb.service                                         2    0.1        -        -        -</span><br><span class="line">/system.slice/tuned.service                                           1    0.0        -        -        -</span><br><span class="line">/system.slice/httpd.service                                           6    0.0        -        -        -</span><br><span class="line">/system.slice/NetworkManager.service                                  1      -        -        -        -</span><br><span class="line">/system.slice/atop.service                                            1      -        -        -        -</span><br><span class="line">/system.slice/atopacct.service                                        1      -        -        -        -</span><br><span class="line">/system.slice/auditd.service                                          1      -        -        -        -</span><br><span class="line">/system.slice/crond.service                                           1      -        -        -        -</span><br><span class="line">/system.slice/dbus.service                                            1      -        -        -        -</span><br><span class="line">/system.slice/firewalld.service                                       1      -        -        -        -</span><br><span class="line">/system.slice/lvm2-lvmetad.service                                    1      -        -        -        -</span><br><span class="line">/system.slice/polkit.service                                          1      -        -        -        -</span><br><span class="line">/system.slice/postfix.service                                         3      -        -        -        -</span><br><span class="line">/system.slice/rsyslog.service                                         1      -        -        -        -</span><br><span class="line">/system.slice/system-getty.slice/getty@tty1.service                   1      -        -        -        -</span><br><span class="line">/system.slice/systemd-journald.service                                1      -        -        -        -</span><br><span class="line">/system.slice/systemd-logind.service                                  1      -        -        -        -</span><br><span class="line">/system.slice/systemd-udevd.service                                   1      -        -        -        -</span><br><span class="line">/system.slice/webmin.service                                          1      -        -        -        -</span><br><span class="line">/user.slice/user-0.slice/session-1.scope                              3      -        -        -        -</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="控制系统运行等级"><a href="#控制系统运行等级" class="headerlink" title="控制系统运行等级"></a>控制系统运行等级</h3><h4 id="32-启动系统救援模式"><a href="#32-启动系统救援模式" class="headerlink" title="32. 启动系统救援模式"></a>32. 启动系统救援模式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># systemctl rescue</span><br><span class="line"></span><br><span class="line">Broadcast message from root@tecmint on pts/0 (Wed 2015-04-29 11:31:18 IST):</span><br><span class="line"></span><br><span class="line">The system is going down to rescue mode NOW!</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="33-进入紧急模式"><a href="#33-进入紧急模式" class="headerlink" title="33. 进入紧急模式"></a>33. 进入紧急模式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># systemctl emergency</span><br><span class="line"></span><br><span class="line">Welcome to emergency mode! After logging in, type &quot;journalctl -xb&quot; to view</span><br><span class="line">system logs, &quot;systemctl reboot&quot; to reboot, &quot;systemctl default&quot; to try again</span><br><span class="line">to boot into default mode.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="34-列出当前使用的运行等级"><a href="#34-列出当前使用的运行等级" class="headerlink" title="34. 列出当前使用的运行等级"></a>34. 列出当前使用的运行等级</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># systemctl get-default</span><br><span class="line"></span><br><span class="line">multi-user.target</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="35-启动运行等级5，即图形模式"><a href="#35-启动运行等级5，即图形模式" class="headerlink" title="35. 启动运行等级5，即图形模式"></a>35. 启动运行等级5，即图形模式</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># systemctl isolate runlevel5.target</span><br><span class="line">或</span><br><span class="line"># systemctl isolate graphical.target</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="36-启动运行等级3，即多用户模式（命令行）"><a href="#36-启动运行等级3，即多用户模式（命令行）" class="headerlink" title="36. 启动运行等级3，即多用户模式（命令行）"></a>36. 启动运行等级3，即多用户模式（命令行）</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># systemctl isolate runlevel3.target</span><br><span class="line">或</span><br><span class="line"># systemctl isolate multiuser.target</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="36-设置多用户模式或图形模式为默认运行等级"><a href="#36-设置多用户模式或图形模式为默认运行等级" class="headerlink" title="36. 设置多用户模式或图形模式为默认运行等级"></a>36. 设置多用户模式或图形模式为默认运行等级</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># systemctl set-default runlevel3.target</span><br><span class="line"></span><br><span class="line"># systemctl set-default runlevel5.target</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="37-重启、停止、挂起、休眠系统或使系统进入混合睡眠"><a href="#37-重启、停止、挂起、休眠系统或使系统进入混合睡眠" class="headerlink" title="37. 重启、停止、挂起、休眠系统或使系统进入混合睡眠"></a>37. 重启、停止、挂起、休眠系统或使系统进入混合睡眠</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># systemctl reboot</span><br><span class="line"></span><br><span class="line"># systemctl halt</span><br><span class="line"></span><br><span class="line"># systemctl suspend</span><br><span class="line"></span><br><span class="line"># systemctl hibernate</span><br><span class="line"></span><br><span class="line"># systemctl hybrid-sleep</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>对于不知运行等级为何物的人，说明如下。</p><ul><li>Runlevel 0 : 关闭系统</li><li>Runlevel 1 : 救援？维护模式</li><li>Runlevel 3 : 多用户，无图形系统</li><li>Runlevel 4 : 多用户，无图形系统</li><li>Runlevel 5 : 多用户，图形化系统</li><li>Runlevel 6 : 关闭并重启机器</li></ul><p>到此为止吧。保持连线，进行评论。别忘了在下面的评论中为我们提供一些有价值的反馈哦。喜欢我们、与我们分享，求扩散。</p><hr><p>via: <a target="_blank" rel="noopener" href="http://www.tecmint.com/manage-services-using-systemd-and-systemctl-in-linux/">http://www.tecmint.com/manage-services-using-systemd-and-systemctl-in-linux/</a></p><p>作者：<a target="_blank" rel="noopener" href="http://www.tecmint.com/author/avishek/">Avishek Kumar</a> 译者：<a target="_blank" rel="noopener" href="https://github.com/GOLinux">GOLinux</a> 校对：<a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p><p>本文由 <a target="_blank" rel="noopener" href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创翻译，<a target="_blank" rel="noopener" href="https://linux.cn/">Linux中国</a> 荣誉推出</p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p><script defer src="https://pv.undefined.today/tracker.min.js" data-website-id="LinuxCNMirror-tracker"></script></div></div></body></html>