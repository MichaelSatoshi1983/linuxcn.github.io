<!doctype html><html lang="en"><head><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>一个涵盖 Unix 44 年进化史的版本仓库 - 归墟星火集 又一个 LinuxCN 站点</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 又一个 LinuxCN 站点 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">一个涵盖 Unix 44 年进化史的版本仓库</h1><span class="post-date">2015-12-23</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E8%A7%82%E7%82%B9/">观点</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/%E8%BF%9B%E5%8C%96/">进化</a> <a href="/tags/BSD/">BSD</a> <a href="/tags/UNIX/">UNIX</a> <a href="/tags/%E6%BC%94%E5%8C%96/">演化</a></div><div class="post-content"><blockquote><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html">http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html</a></p><p>This is an HTML rendering of a working paper draft that led to a publication. The publication should always be cited in preference to this draft using the following reference:</p><ul><li><strong>Diomidis Spinellis</strong>. <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html">A repository with 44 years of Unix evolution</a>. In MSR ‘15: Proceedings of the 12th Working Conference on Mining Software Repositories, pages 13-16. IEEE, 2015. Best Data Showcase Award. (<a target="_blank" rel="noopener" href="http://dx.doi.org/10.1109/MSR.2015.6">doi:10.1109&#x2F;MSR.2015.6</a>)</li></ul><p>This document is also available in <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.pdf">PDF format</a>.</p><p>The document’s metadata is available in <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c-bibtex.html">BibTeX format</a>.</p><p>This material is presented to ensure timely dissemination of scholarly and technical work. Copyright and all rights therein are retained by authors or by other copyright holders. All persons copying this information are expected to adhere to the terms and constraints invoked by each author’s copyright. In most cases, these works may not be reposted without the explicit permission of the copyright holder.</p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/">Diomidis Spinellis Publications</a></p><p>© 2015 IEEE. Personal use of this material is permitted. However, permission to reprint&#x2F;republish this material for advertising or promotional purposes or for creating new collective works for resale or redistribution to servers or lists, or to reuse any copyrighted component of this work in other works must be obtained from the IEEE.</p></blockquote><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201512/23/175143h2ks9ccy1cnv2z29.jpg"></p><h3 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h3><p>Unix 操作系统的进化历史，可以从一个版本控制仓库中窥见，时间跨度从 1972 年的 5000 行内核代码开始，到 2015 年成为一个含有 26,000,000 行代码的被广泛使用的系统。该仓库包含 659,000 条提交，和 2306 次合并。仓库部署了被普遍采用的 Git 系统用于储存其代码，并且在时下流行的 GitHub 上建立了存档。它由来自<ruby>贝尔实验室 <rp>（ </rp><rt>Bell Labs</rt> <rp>）</rp></ruby>，<ruby>伯克利大学 <rp>（ </rp><rt>Berkeley University</rt> <rp>）</rp></ruby>，386BSD 团队所开发的系统软件的 24 个快照综合定制而成，这包括两个老式仓库和一个开源 FreeBSD 系统的仓库。总的来说，可以确认其中的 850 位个人贡献者，更早些时候的一批人主要做基础研究。这些数据可以用于一些经验性的研究，在软件工程，信息系统和软件考古学领域。</p><h3 id="1、介绍"><a href="#1、介绍" class="headerlink" title="1、介绍"></a>1、介绍</h3><p>Unix 操作系统作为一个主要的工程上的突破而脱颖而出，得益于其模范的设计、大量的技术贡献、它的开发模型及广泛的使用。Unix 编程环境的设计已经被视为一个提供非常简洁、强大而优雅的设计 [<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#MPT78">1</a>] 。在技术方面，许多对 Unix 有直接贡献的，或者因 Unix 而流行的特性就包括 [<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#RT78">2</a>] ：用高级语言编写的可移植部署的内核；一个分层式设计的文件系统；兼容的文件，设备，网络和进程间 I&#x2F;O；管道和过滤架构；虚拟文件系统；和作为普通进程的可由用户选择的不同 shell。很早的时候，就有一个庞大的社区为 Unix 贡献软件 [<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#Rit84">3</a>] ，[<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#Sal94">4</a>,pp. 65-72] 。随时间流逝，这个社区不断壮大，并且以现在称为开源软件开发的方式在工作着 [<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#Ray03">5</a>,pp. 440-442] 。Unix 和其睿智的晚辈们也将 C 和 C++ 编程语言、分析程序和词法分析生成器（<em>yacc</em>，<em>lex</em>）、文档编制工具（<em>troff</em>，<em>eqn</em>，<em>tbl</em>）、脚本语言（<em>awk</em>，<em>sed</em>，<em>Perl</em>）、TCP&#x2F;IP 网络、和<ruby>配置管理系统 <rp>（ </rp><rt>configuration management system</rt> <rp>）</rp></ruby>（<em>SCSS</em>，<em>RCS</em>，<em>Subversion</em>，<em>Git</em>）发扬广大了，同时也形成了现代互联网基础设施和网络的最大的部分。</p><p>幸运的是，一些重要的具有历史意义的 Unix 材料已经保存下来了，现在保持对外开放。尽管 Unix 最初是由相对严格的协议发行，但在早期的开发中，很多重要的部分是通过 Unix 的版权拥有者之一（Caldera International) （LCTT 译注：2002年改名为 SCO Group）以一个自由的协议发行。通过将这些部分再结合上由<ruby>加州大学伯克利分校 <rp>（ </rp><rt>University of California, Berkeley</rt> <rp>）</rp></ruby>和 FreeBSD 项目组开发或发布的开源软件，贯穿了从 1972 年六月二十日开始到现在的整个系统的开发。</p><p>通过规划和处理这些可用的快照以及或旧或新的配置管理仓库，将这些可用数据的大部分重建到一个新合成的 Git 仓库之中。这个仓库以数字的形式记录了过去44年来最重要的数字时代产物的详细的进化。下列章节描述了该仓库的结构和内容（第<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#sec:data">2</a>节）、创建方法（第<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#sec:dev">3</a>节）和该如何使用（第<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#sec:use">4</a>节）。</p><h3 id="2、数据概览"><a href="#2、数据概览" class="headerlink" title="2、数据概览"></a>2、数据概览</h3><p>这 1GB 的 Unix 历史仓库可以从 <a target="_blank" rel="noopener" href="https://github.com/dspinellis/unix-history-repo">GitHub</a> 上克隆<sup> <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFtNtAAB">1 </a></sup>。如今<sup> <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFtNtAAC">2 </a></sup>，这个仓库包含来自 850 个贡献者的 659,000 个提交和 2,306 个合并。贡献者有来自<ruby>贝尔实验室 <rp>（ </rp><rt>Bell Labs</rt> <rp>）</rp></ruby>的 23 个员工，<ruby>伯克利大学 <rp>（ </rp><rt>Berkeley University</rt> <rp>）</rp></ruby>的<ruby>计算机系统研究组 <rp>（ </rp><rt>Computer Systems Research Group</rt> <rp>）</rp></ruby>（CSRG）的 158 个人，和 FreeBSD 项目的 660 个成员。</p><p>这个仓库的生命始于一个 <em>Epoch</em> 的标签，这里面只包含了证书信息和现在的 README 文件。其后各种各样的标签和分支记录了很多重要的时刻。</p><ul><li><em>Research-VX</em> 标签对应来自<ruby>贝尔实验室 <rp>（ </rp><rt>Bell Labs</rt> <rp>）</rp></ruby>六个研究版本。从 <em>Research-V1</em> （4768 行 PDP-11 汇编代码）开始，到以 <em>Research-V7</em> （大约 324,000 行代码，1820 个 C 文件）结束。</li><li><em>Bell-32V</em> 是第七个版本 Unix 在 DEC&#x2F;VAX 架构上的移植。</li><li><em>BSD-X</em> 标签对应<ruby>伯克利大学 <rp>（ </rp><rt>Berkeley University</rt> <rp>）</rp></ruby>释出的 15 个快照。</li><li><em>386BSD-X</em> 标签对应该系统的两个开源版本，主要是 Lynne 和 William Jolitz 写的适用于 Intel 386 架构的内核代码。</li><li><em>FreeBSD-release&#x2F;X</em> 标签和分支标记了来自 FreeBSD 项目的 116 个发行版。</li></ul><p>另外，以 <em>-Snapshot-Development</em> 为后缀的分支，表示该提交由来自一个以时间排序的快照文件序列而合成；而以一个 <em>-VCS-Development</em> 为后缀的标签，标记了有特定发行版出现的历史分支的时刻。</p><p>仓库的历史包含从系统开发早期的一些提交，比如下面这些。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">commit c9f643f59434f14f774d61ee3856972b8c3905b1</span><br><span class="line">Author: Dennis Ritchie &lt;research!dmr&gt;</span><br><span class="line">Date:   Mon Dec 2 18:18:02 1974 -0500</span><br><span class="line">    Research V5 development</span><br><span class="line">    Work on file usr/sys/dmr/kl.c</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>两个发布之间的合并代表着系统发生了进化，比如 BSD 3 的开发来自 BSD2 和 Unix 32&#x2F;V，它在 Git 仓库里正是被表示为带两个父节点的图形节点。</p><p>更为重要的是，以这种方式构造的仓库允许 <strong>git blame</strong>，就是可以给源代码行加上注释，如版本、日期和它们第一次出现相关联的作者，这样可以知道任何代码的起源。比如说，检出 <strong>BSD-4</strong> 这个标签，并在内核的 <em>pipe.c</em> 文件上运行一下 git blame，就会显示出由 Ken Thompson 写于 1974，1975 和 1979年的代码行，和 Bill Joy 写于 1980 年的。这就可以自动（尽管计算上比较费事）检测出任何时刻出现的代码。</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201512/23/175502ctm4thin2bpnbnr4.png"></p><p><em>图1：各个重大 Unix 发行版的代码来源</em></p><p>如<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#fig:provenance">上图</a>所示，现代版本的 Unix（FreeBSD 9）依然有相当部分的来自 BSD 4.3，BSD 4.3 Net&#x2F;2 和 BSD 2.0 的代码块。有趣的是，这图片显示有部分代码好像没有保留下来，当时激进地要创造一个脱离于伯克利（386BSD 和 FreeBSD 1.0）所释出代码的开源操作系统。FreeBSD 9 中最古老的代码是一个 18 行的队列，在 C 库里面的 timezone.c 文件里，该文件也可以在第七版的 Unix 文件里找到，同样的名字，时间戳是 1979 年一月十日 - 36 年前。</p><h3 id="3、数据收集和处理"><a href="#3、数据收集和处理" class="headerlink" title="3、数据收集和处理"></a>3、数据收集和处理</h3><p>这个项目的目的是以某种方式巩固从数据方面说明 Unix 的进化，通过将其并入一个现代的版本仓库，帮助人们对系统进化的研究。项目工作包括收录数据，分类并综合到一个单独的 Git 仓库里。</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201512/23/175222mhed8yeg2y8y78ey.png"></p><p><em>图2：导入 Unix 快照、仓库及其合并</em></p><p>项目以三种数据类型为基础（见<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#fig:branches">图2</a>）。首先，早期发布版本的快照，获取自<ruby><a target="_blank" rel="noopener" href="http://www.tuhs.org/archive_sites.html">Unix 遗产社会归档 </a><rp>（ </rp><rt>Unix Heritage Society archive</rt> <rp>）</rp></ruby><sup><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFtNtAAD">3 </a></sup>、包括了 CSRG 全部的源代码归档的 <a target="_blank" rel="noopener" href="https://www.mckusick.com/csrg/">CD-ROM 镜像</a><sup> <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFtNtAAE">4 </a></sup>， <a target="_blank" rel="noopener" href="http://www.oldlinux.org/Linux.old/distributions/386BSD">Oldlinux 网站</a><sup> <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFtNtAAF">5 </a></sup>和 <a target="_blank" rel="noopener" href="http://ftp-archive.freebsd.org/pub/FreeBSD-Archive/old-releases/">FreeBSD 归档</a><sup> <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFtNtAAG">6 </a></sup>。 其次，以前的和现在的仓库，即 CSRG SCCS [<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#SCCS">6</a>] 仓库，FreeBSD 1 CVS 仓库，和<a target="_blank" rel="noopener" href="https://github.com/freebsd/freebsd">现代 FreeBSD 开发的 Git 镜像</a><sup> <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFtNtAAH">7 </a></sup>。前两个都是从和快照相同的来源获得的。</p><p>最后，也是最费力的数据源是<ruby><strong>初步研究 </strong><rp>（ </rp><rt>primary research</rt> <rp>）</rp></ruby>。释出的快照并没有提供关于它们的源头和每个文件贡献者的信息。因此，这些信息片段需要通过<ruby>初步研究 <rp>（ </rp><rt>primary research</rt> <rp>）</rp></ruby>验证。至于作者信息主要通过作者的自传，研究论文，内部备忘录和旧文档扫描件；通过阅读并且自动处理源代码和帮助页面补充；通过与那个年代的人用电子邮件交流；在 <em>StackExchange</em> 网站上贴出疑问；查看文件的位置（在早期的内核版本的源代码，分为 <code>usr/sys/dmr</code> 和 <code>/usr/sys/ken</code> 两个位置）；从研究论文和帮助手册披露的作者找到源代码，从一个又一个的发行版中获取。（有趣的是，第一和第二的<ruby>研究版 <rp>（ </rp><rt>Research Edition</rt> <rp>）</rp></ruby>帮助页面都有一个 “owner” 部分，列出了作者（比如，<em>Ken</em>）及对应的系统命令、文件、系统调用或库函数。在第四版中这个部分就没了，而在 BSD 发行版中又浮现了 “Author” 部分。）关于作者信息更为详细地写在了项目的文件中，这些文件被用于匹配源代码文件和它们的作者和对应的提交信息。最后，关于源代码库之间的合并信息是获取自 <a target="_blank" rel="noopener" href="http://ftp.netbsd.org/pub/NetBSD/NetBSD-current/src/share/misc/bsd-family-tree">NetBSD 项目所维护的 BSD 家族树</a><sup> <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFtNtAAI">8 </a></sup>。</p><p>作为本项目的一部分而开发的软件和数据文件，现在可以<a target="_blank" rel="noopener" href="https://github.com/dspinellis/unix-history-make">在线获取</a><sup> <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFtNtAAJ">9 </a></sup>，并且，如果有合适的网络环境，CPU 和磁盘资源，可以用来从头构建这样一个仓库。关于主要发行版的作者信息，都存储在本项目的 <code>author-path</code> 目录下的文件里。它们的内容中带有正则表达式的文件路径后面指出了相符的作者。可以指定多个作者。正则表达式是按线性处理的，所以一个文件末尾的匹配一切的表达式可以指定一个发行版的默认作者。为避免重复，一个以 <code>.au</code> 后缀的独立文件专门用于映射作者的<ruby>识别号 <rp>（ </rp><rt>identifier</rt> <rp>）</rp></ruby>和他们的名字及 email。这样一个文件为每个与该系统进化相关的社区都建立了一个：<ruby>贝尔实验室 <rp>（ </rp><rt>Bell Labs</rt> <rp>）</rp></ruby>，<ruby>伯克利大学 <rp>（ </rp><rt>Berkeley University</rt> <rp>）</rp></ruby><ruby></ruby>，386BSD 和 FreeBSD。为了真实性的需要，早期<ruby>贝尔实验室 <rp>（ </rp><rt>Bell Labs</rt> <rp>）</rp></ruby>发行版的 emails 都以 <ruby>UUCP 注释 <rp>（ </rp><rt>UUCP notation</rt> <rp>）</rp></ruby>方式列出（例如， <code>research!ken</code>)。FreeBSD 作者的识别映射，需要导入早期的 CVS 仓库，通过从如今项目的 Git 仓库里拆解对应的数据构建。总的来说，由 1107 行构成了注释作者信息的文件（828 个规则），并且另有 640 行用于映射作者的识别号到名字。</p><p>现在项目的数据源被编码成了一个 168 行的 <code>Makefile</code>。它包括下面的步骤。</p><p><strong>Fetching</strong> 从远程站点复制和克隆大约 11GB 的镜像、归档和仓库。</p><p><strong>Tooling</strong> 从 2.9 BSD 中为旧的 PDP-11 归档获取一个归档器，并调整它以在现代的 Unix 版本下编译；编译 4.3 BSD 的 <em>compress</em> 程序来解压 386BSD 发行版，这个程序不再是现代 Unix 系统的组成部分了。</p><p><strong>Organizing</strong> 用 <em>tar</em> 和 <em>cpio</em> 解压缩包；合并第六个研究版的三个目录；用旧的 PDP-11 归档器解压全部一个 BSD 归档；挂载 CD-ROM 镜像，这样可以作为文件系统处理；合并第 8 和 62 的 386BSD 磁盘镜像为两个独立的文件。</p><p><strong>Cleaning</strong> 恢复第一个研究版的内核源代码文件，这个可以通过 OCR 从打印件上得到近似其原始状态的的格式；给第七个研究版的源代码文件打补丁；移除发行后被添加进来的元数据和其他文件，为避免得到错误的时间戳信息；修复毁坏的 SCCS 文件；用一个定制的 Perl 脚本移除指定到多个版本的 CVS 符号、删除与现在冲突的 CVS <em>Attr</em> 文件、用 <em>cvs2svn</em> 将 CVS 仓库转换为 Git 仓库，以处理早期的 FreeBSD CVS 仓库。</p><p>在仓库<ruby>再现 <rp>（ </rp><rt>representation</rt> <rp>）</rp></ruby>中有一个很有意思的部分就是，如何导入那些快照，并以一种方式联系起来，使得 <em>git blame</em> 可以发挥它的魔力。快照导入到仓库是基于每个文件的时间戳作为一系列的提交实现的。当所有文件导入后，就被用对应发行版的名字给标记了。然后，可以删除那些文件，并开始导入下一个快照。注意 <em>git blame</em> 命令是通过回溯一个仓库的历史来工作的，并使用<ruby>启发法 <rp>（ </rp><rt>heuristics</rt> <rp>）</rp></ruby>来检测文件之间或文件内的代码移动和复制。因此，删除掉的快照间会产生中断，以防止它们之间的代码被追踪。</p><p>相反，在下一个快照导入之前，之前快照的所有文件都被移动到了一个隐藏的后备目录里，叫做 <code>.ref</code>（引用）。它们保存在那，直到下个快照的所有文件都被导入了，这时候它们就会被删掉。因为 <code>.ref</code> 目录下的每个文件都精确对应一个原始文件，<em>git blame</em> 可以知道多少源代码通过 <code>.ref</code> 文件从一个版本移到了下一个，而不用显示出 <code>.ref</code> 文件。为了更进一步帮助检测代码起源，同时增加<ruby>再现 <rp>（ </rp><rt>representation</rt> <rp>）</rp></ruby>的真实性，每个发行版都被<ruby>再现 <rp>（ </rp><rt>represented</rt> <rp>）</rp></ruby>为一个有增量文件的分支（<em>-Development</em>）与之前发行版之间的合并。</p><p>上世纪 80 年代时期，只有<ruby>伯克利大学 <rp>（ </rp><rt>Berkeley University</rt> <rp>）</rp></ruby>开发的文件的一个子集是用 SCCS 版本控制的。在那个期间，我们的统一仓库里包含了来自 SCCS 的提交和快照的增量文件的导入数据。对于每个发行版，可用最近的时间戳找到该 SCCS 提交，并被标记为一个与发行版增量导入分支的合并。这些合并可以在<a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#fig:branches">图2</a> 的中间看到。</p><p>将各种数据资源综合到一个仓库的工作，主要是用两个脚本来完成的。一个 780 行的 Perl 脚本（<code>import-dir.pl</code>）可以从一个单独的数据源（快照目录、SCCS 仓库，或者 Git 仓库）中，以 <em>Git fast export</em> 格式导出（真实的或者综合的）提交历史。输出是一个简单的文本格式，Git 工具用这个来导入和导出提交。其他方面，这个脚本以一些东西为参数，如文件到贡献者的映射、贡献者登录名和他们的全名间的映射、哪个导入的提交会被合并、哪些文件要处理和忽略、以及“引用”文件的处理。一个 450 行的 Shell 脚本创建 Git 仓库，并调用带适当参数的 Perl 脚本，来导入 27 个可用的历史数据资源。Shell 脚本也会运行 30 个测试，比较特定标签的仓库和对应的数据源，核对查看的目录中出现的和没出现的，并回溯查看分支树和合并的数量，<em>git blame</em> 和 <em>git log</em> 的输出。最后，调用 <em>git</em> 作垃圾收集和仓库压缩，从最初的 6GB 降到分发的 1GB 大小。</p><h3 id="4、数据使用"><a href="#4、数据使用" class="headerlink" title="4、数据使用"></a>4、数据使用</h3><p>该数据可以用于软件工程、信息系统和<ruby>软件考古学 <rp>（ </rp><rt>software archeology</rt> <rp>）</rp></ruby>领域的经验性研究。鉴于它从不间断而独一无二的存在了超过了 40 年，可以供软件进化和跨代更迭参考。从那时以来，处理速度已经成千倍地增长、存储容量扩大了百万倍，该数据同样可以用于软件和硬件技术<ruby>交叉进化 <rp>（ </rp><rt>co-evolution</rt> <rp>）</rp></ruby>的研究。软件开发从研究中心到大学，到开源社区的转移，可以用来研究组织文化对于软件开发的影响。该仓库也可以用于学习著名人物的实际编程，比如 Turing 奖获得者（Dennis Ritchie 和 Ken Thompson）和 IT 产业的大佬（Bill Joy 和 Eric Schmidt）。另一个值得学习的现象是代码的长寿，无论是单行的水平，或是作为那个时代随 Unix 发布的完整的系统（Ingres、 Lisp、 Pascal、 Ratfor、 Snobol、 TMP），和导致代码存活或消亡的因素。最后，因为该数据让 Git 感到了压力，底层的软件仓库存储技术达到了其极限，这会推动版本管理系统领域的工程进度。</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201512/23/175229n3iydd44vvgh4vsd.png"></p><p><em>图3：Unix 发行版的代码风格进化</em></p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#fig:metrics">图3</a> 根据 36 个主要 Unix 发行版描述了一些有趣的代码统计的趋势线（用 R 语言的局部多项式回归拟合函数生成），验证了代码风格和编程语言的使用在很长的时间尺度上的进化。这种进化是软硬件技术的需求和支持、软件构筑理论，甚至社会力量所驱动的。图片中的日期计算了出现在一个给定发行版中的所有文件的平均日期。正如可以从中看到，在过去的 40 年中，标示符和文件名字的长度已经稳步从 4 到 6 个字符增长到 7 到 11 个字符。我们也可以看到注释数量的少量稳步增加，以及 <em>goto</em> 语句的使用量减少，同时 <em>register</em> 这个类型修饰符的消失。</p><h3 id="5、未来的工作"><a href="#5、未来的工作" class="headerlink" title="5、未来的工作"></a>5、未来的工作</h3><p>可以做很多事情去提高仓库的正确性和有效性。创建过程以开源代码共享了，通过 GitHub 的<ruby>拉取请求 <rp>（ </rp><rt>pull request</rt> <rp>）</rp></ruby>，可以很容易地贡献更多代码和修复。最有用的社区贡献将使得导入的快照文件的覆盖面增长，以便归属于某个具体的作者。现在，大约 90,000 个文件（在 160,000 总量之外）通过默认规则指定了作者。类似地，大约有 250 个作者（最初 FreeBSD 那些）仅知道其识别号。两个都列在了 build 仓库的 unmatched 目录里，欢迎贡献数据。进一步，BSD SCCS 和 FreeBSD CVS 的提交共享相同的作者和时间戳，这些可以结合成一个单独的 Git 提交。导入 SCCS 文件提交的支持会被添加进来，以便引入仓库对应的元数据。最后，也是最重要的，开源系统的更多分支会添加进来，比如 NetBSD、 OpenBSD、DragonFlyBSD 和 <em>illumos</em>。理想情况下，其他历史上重要的 Unix 发行版，如 System III、System V、 NeXTSTEP 和 SunOS 等的当前版权拥有者，也会在一个允许他们的合作伙伴使用仓库用于研究的协议下释出他们的系统。</p><h3 id="鸣谢"><a href="#鸣谢" class="headerlink" title="鸣谢"></a>鸣谢</h3><p>本文作者感谢很多付出努力的人们。 Brian W. Kernighan, Doug McIlroy 和 Arnold D. Robbins 在贝尔实验室（Bell Labs）的登录识别号方面提供了帮助。 Clem Cole， Era Erikson， Mary Ann Horton, Kirk McKusick, Jeremy C. Reed, Ingo Schwarze 和 Anatole Shaw 在 BSD 的登录识别号方面提供了帮助。BSD SCCS 的导入代码是基于 H. Merijn Brand 和 Jonathan Gray 的工作。</p><p>这次研究由欧盟 ( <ruby>欧洲社会基金 <rp>（ </rp><rt>European Social Fund，ESF</rt> <rp>）</rp></ruby>) 和 <ruby>希腊国家基金 <rp>（ </rp><rt>Greek national funds</rt> <rp>）</rp></ruby>通过<ruby>国家战略参考框架 <rp>（ </rp><rt>National Strategic Reference Framework ，NSRF</rt> <rp>）</rp></ruby>的 Operational Program “ Education and Lifelong Learning” - Research Funding Program: Thalis - Athens University of Economics and Business - Software Engineering Research Platform ，共同出资赞助。</p><h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#MPT78">1</a> M. D. McIlroy, E. N. Pinson, and B. A. Tague, “UNIX time-sharing system: Foreword,” <em>The Bell System Technical Journal</em>, vol. 57, no. 6, pp. 1899-1904, July-August 1978.</p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#RT78">2</a> D. M. Ritchie and K. Thompson, “The UNIX time-sharing system,” <em>Bell System Technical Journal</em>, vol. 57, no. 6, pp. 1905-1929, July-August 1978.</p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#Rit84">3</a> D. M. Ritchie, “The evolution of the UNIX time-sharing system,” <em>AT&amp;T Bell Laboratories Technical Journal</em>, vol. 63, no. 8, pp. 1577-1593, Oct. 1984.</p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#Sal94">4</a> P. H. Salus, <em>A Quarter Century of UNIX</em>. Boston, MA: Addison-Wesley, 1994.</p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#Ray03">5</a> E. S. Raymond, <em>The Art of Unix Programming</em>. Addison-Wesley, 2003.</p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#sec:data">6</a> M. J. Rochkind, “The source code control system,” <em>IEEE Transactions on Software Engineering</em>, vol. SE-1, no. 4, pp. 255-265, 1975.</p><h3 id="脚注"><a href="#脚注" class="headerlink" title="脚注"></a>脚注</h3><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFrefAAB">1</a> - <a target="_blank" rel="noopener" href="https://github.com/dspinellis/unix-history-repo">https://github.com/dspinellis/unix-history-repo</a></p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFrefAAC">2</a> - Updates may add or modify material. To ensure replicability the repository’s users are encouraged to fork it or archive it.</p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFrefAAD">3</a> - <a target="_blank" rel="noopener" href="http://www.tuhs.org/archive_sites.html">http://www.tuhs.org/archive_sites.html</a></p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFrefAAE">4</a> - <a target="_blank" rel="noopener" href="https://www.mckusick.com/csrg/">https://www.mckusick.com/csrg/</a></p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFrefAAF">5</a> - <a target="_blank" rel="noopener" href="http://www.oldlinux.org/Linux.old/distributions/386BSD">http://www.oldlinux.org/Linux.old/distributions/386BSD</a></p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFrefAAG">6</a> - <a target="_blank" rel="noopener" href="http://ftp-archive.freebsd.org/pub/FreeBSD-Archive/old-releases/">http://ftp-archive.freebsd.org/pub/FreeBSD-Archive/old-releases/</a></p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFrefAAH">7</a> - <a target="_blank" rel="noopener" href="https://github.com/freebsd/freebsd">https://github.com/freebsd/freebsd</a></p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFrefAAI">8</a> - <a target="_blank" rel="noopener" href="http://ftp.netbsd.org/pub/NetBSD/NetBSD-current/src/share/misc/bsd-family-tree">http://ftp.netbsd.org/pub/NetBSD/NetBSD-current/src/share/misc/bsd-family-tree</a></p><p><a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html#tthFrefAAJ">9</a> - <a target="_blank" rel="noopener" href="https://github.com/dspinellis/unix-history-make">https://github.com/dspinellis/unix-history-make</a></p><hr><p>via: <a target="_blank" rel="noopener" href="http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html">http://www.dmst.aueb.gr/dds/pubs/conf/2015-MSR-Unix-History/html/Spi15c.html</a></p><p>作者：Diomidis Spinellis译者：<a target="_blank" rel="noopener" href="https://github.com/wi-cuckoo">wi-cuckoo</a> 校对：<a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p><p>本文由 <a target="_blank" rel="noopener" href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a target="_blank" rel="noopener" href="https://linux.cn/">Linux中国</a> 荣誉推出</p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p></div></div></body></html>