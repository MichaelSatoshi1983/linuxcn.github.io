<!doctype html><html lang="en"><head><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>Linux 下 cut 命令的 4 个基础实用的示例 - 归墟星火集</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a href="/about/">关于</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">Linux 下 cut 命令的 4 个基础实用的示例</h1><span class="post-date">2018-08-03</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/cut/">cut</a></div><div class="post-content"><p><code>cut</code> 命令是用来从文本文件中移除“某些列”的经典工具。在本文中的“一列”可以被定义为按照一行中位置区分的一系列字符串或者字节，或者是以某个分隔符为间隔的某些域。</p><p>先前我已经介绍了<a target="_blank" rel="noopener" href="https://linuxhandbook.com/awk-command-tutorial/">如何使用 AWK 命令</a>。在本文中，我将解释 linux 下 <code>cut</code> 命令的 4 个本质且实用的例子，有时这些例子将帮你节省很多时间。</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201808/03/232916wwz8ff5q1zt8sa0z.jpg" alt="Cut Linux 命令示例"></p><h3 id="Linux-下-cut-命令的-4-个实用示例"><a href="#Linux-下-cut-命令的-4-个实用示例" class="headerlink" title="Linux 下 cut 命令的 4 个实用示例"></a>Linux 下 cut 命令的 4 个实用示例</h3><p>假如你想，你可以观看下面的视频，视频中解释了本文中我列举的 cut 命令的使用例子。</p><ul><li><a target="_blank" rel="noopener" href="https://www.youtube.com/PhE_cFLzVFw">https://www.youtube.com/PhE_cFLzVFw</a></li></ul><h3 id="1、-作用在一系列字符上"><a href="#1、-作用在一系列字符上" class="headerlink" title="1、 作用在一系列字符上"></a>1、 作用在一系列字符上</h3><p>当启用 <code>-c</code> 命令行选项时，<code>cut</code> 命令将移除一系列字符。</p><p>和其他的过滤器类似， <code>cut</code> 命令不会直接改变输入的文件，它将复制已修改的数据到它的标准输出里去。你可以通过重定向命令的结果到一个文件中来保存修改后的结果，或者使用管道将结果送到另一个命令的输入中，这些都由你来负责。</p><p>假如你已经下载了上面视频中的<a target="_blank" rel="noopener" href="https://static.yesik.it/EP22/Yes_I_Know_IT-EP22.tar.gz">示例测试文件</a>，你将看到一个名为 <code>BALANCE.txt</code> 的数据文件，这些数据是直接从我妻子在她工作中使用的某款会计软件中导出的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sh$ head BALANCE.txt</span><br><span class="line">ACCDOC    ACCDOCDATE    ACCOUNTNUM ACCOUNTLIB              ACCDOCLIB                        DEBIT          CREDIT</span><br><span class="line">4         1012017       623477     TIDE SCHEDULE           ALNEENRE-4701-LOC                00000001615,00</span><br><span class="line">4         1012017       445452     VAT BS/ENC              ALNEENRE-4701-LOC                00000000323,00</span><br><span class="line">4         1012017       4356       PAYABLES                ALNEENRE-4701-LOC                               00000001938,00</span><br><span class="line">5         1012017       623372     ACCOMODATION GUIDE      ALNEENRE-4771-LOC                00000001333,00</span><br><span class="line">5         1012017       445452     VAT BS/ENC              ALNEENRE-4771-LOC                00000000266,60</span><br><span class="line">5         1012017       4356       PAYABLES                ALNEENRE-4771-LOC                               00000001599,60</span><br><span class="line">6         1012017       4356       PAYABLES                FACT FA00006253 - BIT QUIROBEN                  00000001837,20</span><br><span class="line">6         1012017       445452     VAT BS/ENC              FACT FA00006253 - BIT QUIROBEN   00000000306,20</span><br><span class="line">6         1012017       623795     TOURIST GUIDE BOOK      FACT FA00006253 - BIT QUIROBEN   00000001531,00</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上述文件是一个固定宽度的文本文件，因为对于每一项数据，都使用了不定长的空格做填充，使得它看起来是一个对齐的列表。</p><p>这样一来，每一列数据开始和结束的位置都是一致的。从 <code>cut</code> 命令的字面意思去理解会给我们带来一个小陷阱：<code>cut</code> 命令实际上需要你指出你想<em>保留</em>的数据范围，而不是你想<em>移除</em>的范围。所以，假如我<em>只</em>需要上面文件中的 <code>ACCOUNTNUM</code> 和 <code>ACCOUNTLIB</code> 列，我需要这么做：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sh$ cut -c 25-59 BALANCE.txt | head</span><br><span class="line">ACCOUNTNUM ACCOUNTLIB</span><br><span class="line">623477     TIDE SCHEDULE</span><br><span class="line">445452     VAT BS/ENC</span><br><span class="line">4356       /accountPAYABLES</span><br><span class="line">623372     ACCOMODATION GUIDE</span><br><span class="line">445452     VAT BS/ENC</span><br><span class="line">4356       PAYABLES</span><br><span class="line">4356       PAYABLES</span><br><span class="line">445452     VAT BS/ENC</span><br><span class="line">623795     TOURIST GUIDE BOOK</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="范围如何定义？"><a href="#范围如何定义？" class="headerlink" title="范围如何定义？"></a>范围如何定义？</h4><p>正如我们上面看到的那样， <code>cut</code> 命令需要我们特别指定需要保留的数据的<em>范围</em>。所以，下面我将更正式地介绍如何定义范围：对于 <code>cut</code> 命令来说，范围是由连字符(<code>-</code>)分隔的起始和结束位置组成，范围是基于 1 计数的，即每行的第一项是从 1 开始计数的，而不是从 0 开始。范围是一个闭区间，开始和结束位置都将包含在结果之中，正如它们之间的所有字符那样。如果范围中的结束位置比起始位置小，则这种表达式是错误的。作为快捷方式，你可以省略起始<em>或</em>结束值，正如下面的表格所示：</p><table><thead><tr><th>范围</th><th>含义</th></tr></thead><tbody><tr><td><code>a-b</code></td><td>a 和 b 之间的范围（闭区间）</td></tr><tr><td><code>a</code></td><td>与范围 <code>a-a</code> 等价</td></tr><tr><td><code>-b</code></td><td>与范围 <code>1-a</code> 等价</td></tr><tr><td><code>b-</code></td><td>与范围 <code>b-∞</code> 等价</td></tr></tbody></table><p><code>cut</code> 命令允许你通过逗号分隔多个范围，下面是一些示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 保留 1 到 24 之间（闭区间）的字符</span><br><span class="line">cut -c -24 BALANCE.txt</span><br><span class="line"></span><br><span class="line"># 保留 1 到 24（闭区间）以及 36 到 59（闭区间）之间的字符</span><br><span class="line">cut -c -24,36-59 BALANCE.txt</span><br><span class="line"></span><br><span class="line"># 保留 1 到 24（闭区间）、36 到 59（闭区间）和 93 到该行末尾之间的字符</span><br><span class="line">cut -c -24,36-59,93- BALANCE.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>cut</code> 命令的一个限制（或者是特性，取决于你如何看待它）是它将 <em>不会对数据进行重排</em>。所以下面的命令和先前的命令将产生相同的结果，尽管范围的顺序做了改变：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cut -c 93-,-24,36-59 BALANCE.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你可以轻易地使用 <code>diff</code> 命令来验证：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">diff -s &lt;(cut -c -24,36-59,93- BALANCE.txt) \</span><br><span class="line">              &lt;(cut -c 93-,-24,36-59 BALANCE.txt)</span><br><span class="line">Files /dev/fd/63 and /dev/fd/62 are identical</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>类似的，<code>cut</code> 命令 <em>不会重复数据</em>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 某人或许期待这可以第一列三次，但并不会……</span><br><span class="line">cut -c -10,-10,-10 BALANCE.txt | head -5</span><br><span class="line">ACCDOC</span><br><span class="line">4</span><br><span class="line">4</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>值得提及的是，曾经有一个提议，建议使用 <code>-o</code> 选项来去除上面提到的两个限制，使得 <code>cut</code> 工具可以重排或者重复数据。但这个提议被 <a target="_blank" rel="noopener" href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/cut.html#tag_20_28_18">POSIX 委员会拒绝了</a>，<em>“因为这类增强不属于 IEEE P1003.2b 草案标准的范围”</em>。</p><p>据我所知，我还没有见过哪个版本的 <code>cut</code> 程序实现了上面的提议，以此来作为扩展，假如你知道某些例外，请使用下面的评论框分享给大家！</p><h3 id="2、-作用在一系列字节上"><a href="#2、-作用在一系列字节上" class="headerlink" title="2、 作用在一系列字节上"></a>2、 作用在一系列字节上</h3><p>当使用 <code>-b</code> 命令行选项时，<code>cut</code> 命令将移除字节范围。</p><p>咋一看，使用<em>字符</em>范围和使用<em>字节</em>没有什么明显的不同：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sh$ diff -s &lt;(cut -b -24,36-59,93- BALANCE.txt) \</span><br><span class="line">              &lt;(cut -c -24,36-59,93- BALANCE.txt)</span><br><span class="line">Files /dev/fd/63 and /dev/fd/62 are identical</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这是因为我们的示例数据文件使用的是 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/ASCII#Character_set">US-ASCII 编码</a>（字符集），使用 <code>file -i</code> 便可以正确地猜出来：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sh$ file -i BALANCE.txt</span><br><span class="line">BALANCE.txt: text/plain; charset=us-ascii</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在 US-ASCII 编码中，字符和字节是一一对应的。理论上，你只需要使用一个字节就可以表示 256 个不同的字符（数字、字母、标点符号和某些符号等）。实际上，你能表达的字符数比 256 要更少一些，因为字符编码中为某些特定值做了规定（例如 32 或 65 就是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Control_character">控制字符</a>）。即便我们能够使用上述所有的字节范围，但对于存储种类繁多的人类手写符号来说，256 是远远不够的。所以如今字符和字节间的一一对应更像是某种例外，并且几乎总是被无处不在的 UTF-8 多字节编码所取代。下面让我们看看如何来处理多字节编码的情形。</p><h4 id="作用在多字节编码的字符上"><a href="#作用在多字节编码的字符上" class="headerlink" title="作用在多字节编码的字符上"></a>作用在多字节编码的字符上</h4><p>正如我前面提到的那样，示例数据文件来源于我妻子使用的某款会计软件。最近好像她升级了那个软件，然后呢，导出的文本就完全不同了，你可以试试和上面的数据文件相比，找找它们之间的区别：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sh$ head BALANCE-V2.txt</span><br><span class="line">ACCDOC    ACCDOCDATE    ACCOUNTNUM ACCOUNTLIB              ACCDOCLIB                        DEBIT          CREDIT</span><br><span class="line">4         1012017       623477     TIDE SCHEDULE           ALNÉENRE-4701-LOC                00000001615,00</span><br><span class="line">4         1012017       445452     VAT BS/ENC              ALNÉENRE-4701-LOC                00000000323,00</span><br><span class="line">4         1012017       4356       PAYABLES                ALNÉENRE-4701-LOC                               00000001938,00</span><br><span class="line">5         1012017       623372     ACCOMODATION GUIDE      ALNÉENRE-4771-LOC                00000001333,00</span><br><span class="line">5         1012017       445452     VAT BS/ENC              ALNÉENRE-4771-LOC                00000000266,60</span><br><span class="line">5         1012017       4356       PAYABLES                ALNÉENRE-4771-LOC                               00000001599,60</span><br><span class="line">6         1012017       4356       PAYABLES                FACT FA00006253 - BIT QUIROBEN                  00000001837,20</span><br><span class="line">6         1012017       445452     VAT BS/ENC              FACT FA00006253 - BIT QUIROBEN   00000000306,20</span><br><span class="line">6         1012017       623795     TOURIST GUIDE BOOK      FACT FA00006253 - BIT QUIROBEN   00000001531,00</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上面的标题栏或许能够帮助你找到什么被改变了，但无论你找到与否，现在让我们看看上面的更改过后的结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">sh$ cut -c 93-,-24,36-59 BALANCE-V2.txt</span><br><span class="line">ACCDOC    ACCDOCDATE    ACCOUNTLIB              DEBIT          CREDIT</span><br><span class="line">4         1012017       TIDE SCHEDULE            00000001615,00</span><br><span class="line">4         1012017       VAT BS/ENC               00000000323,00</span><br><span class="line">4         1012017       PAYABLES                                00000001938,00</span><br><span class="line">5         1012017       ACCOMODATION GUIDE       00000001333,00</span><br><span class="line">5         1012017       VAT BS/ENC               00000000266,60</span><br><span class="line">5         1012017       PAYABLES                                00000001599,60</span><br><span class="line">6         1012017       PAYABLES                               00000001837,20</span><br><span class="line">6         1012017       VAT BS/ENC              00000000306,20</span><br><span class="line">6         1012017       TOURIST GUIDE BOOK      00000001531,00</span><br><span class="line">19        1012017       SEMINAR FEES            00000000080,00</span><br><span class="line">19        1012017       PAYABLES                               00000000080,00</span><br><span class="line">28        1012017       MAINTENANCE             00000000746,58</span><br><span class="line">28        1012017       VAT BS/ENC              00000000149,32</span><br><span class="line">28        1012017       PAYABLES                               00000000895,90</span><br><span class="line">31        1012017       PAYABLES                                00000000240,00</span><br><span class="line">31        1012017       VAT BS/DEBIT             00000000040,00</span><br><span class="line">31        1012017       ADVERTISEMENTS           00000000200,00</span><br><span class="line">32        1012017       WATER                   00000000202,20</span><br><span class="line">32        1012017       VAT BS/DEBIT            00000000020,22</span><br><span class="line">32        1012017       WATER                   00000000170,24</span><br><span class="line">32        1012017       VAT BS/DEBIT            00000000009,37</span><br><span class="line">32        1012017       PAYABLES                               00000000402,03</span><br><span class="line">34        1012017       RENTAL COSTS            00000000018,00</span><br><span class="line">34        1012017       PAYABLES                               00000000018,00</span><br><span class="line">35        1012017       MISCELLANEOUS CHARGES   00000000015,00</span><br><span class="line">35        1012017       VAT BS/DEBIT            00000000003,00</span><br><span class="line">35        1012017       PAYABLES                               00000000018,00</span><br><span class="line">36        1012017       LANDLINE TELEPHONE        00000000069,14</span><br><span class="line">36        1012017       VAT BS/ENC                00000000013,83</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>我<em>毫无删减地</em>复制了上面命令的输出。所以可以很明显地看出列对齐那里有些问题。</p><p>对此我的解释是原来的数据文件只包含 US-ASCII 编码的字符（符号、标点符号、数字和没有发音符号的拉丁字母）。</p><p>但假如你仔细地查看经软件升级后产生的文件，你可以看到新导出的数据文件保留了带发音符号的字母。例如现在合理地记录了名为 “ALNÉENRE” 的公司，而不是先前的 “ALNEENRE”（没有发音符号）。</p><p><code>file -i</code> 正确地识别出了改变，因为它报告道现在这个文件是 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/UTF-8#Codepage_layout">UTF-8 编码</a> 的。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sh$ file -i BALANCE-V2.txt</span><br><span class="line">BALANCE-V2.txt: text/plain; charset=utf-8</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果想看看 UTF-8 文件中那些带发音符号的字母是如何编码的，我们可以使用 <code>[hexdump][12]</code>，它可以让我们直接以字节形式查看文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 为了减少输出，让我们只关注文件的第 2 行</span><br><span class="line">sh$ sed &#x27;2!d&#x27; BALANCE-V2.txt</span><br><span class="line">4         1012017       623477     TIDE SCHEDULE           ALNÉENRE-4701-LOC                00000001615,00</span><br><span class="line">sh$ sed &#x27;2!d&#x27; BALANCE-V2.txt  | hexdump -C</span><br><span class="line">00000000  34 20 20 20 20 20 20 20  20 20 31 30 31 32 30 31  |4         101201|</span><br><span class="line">00000010  37 20 20 20 20 20 20 20  36 32 33 34 37 37 20 20  |7       623477  |</span><br><span class="line">00000020  20 20 20 54 49 44 45 20  53 43 48 45 44 55 4c 45  |   TIDE SCHEDULE|</span><br><span class="line">00000030  20 20 20 20 20 20 20 20  20 20 20 41 4c 4e c3 89  |           ALN..|</span><br><span class="line">00000040  45 4e 52 45 2d 34 37 30  31 2d 4c 4f 43 20 20 20  |ENRE-4701-LOC   |</span><br><span class="line">00000050  20 20 20 20 20 20 20 20  20 20 20 20 20 30 30 30  |             000|</span><br><span class="line">00000060  30 30 30 30 31 36 31 35  2c 30 30 20 20 20 20 20  |00001615,00     |</span><br><span class="line">00000070  20 20 20 20 20 20 20 20  20 20 20 0a              |           .|</span><br><span class="line">0000007c</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在 <code>hexdump</code> 输出的 00000030 那行，在一系列的空格（字节 <code>20</code>）之后，你可以看到：</p><ul><li>字母 <code>A</code> 被编码为 <code>41</code>，</li><li>字母 <code>L</code> 被编码为 <code>4c</code>，</li><li>字母 <code>N</code> 被编码为 <code>4e</code>。</li></ul><p>但对于大写的<a target="_blank" rel="noopener" href="https://www.fileformat.info/info/unicode/char/00c9/index.htm">带有注音的拉丁大写字母 E</a> （这是它在 Unicode 标准中字母 <em>É</em> 的官方名称），则是使用 <em>2</em> 个字节 <code>c3 89</code> 来编码的。</p><p>这样便出现问题了：对于使用固定宽度编码的文件， 使用字节位置来表示范围的 <code>cut</code> 命令工作良好，但这并不适用于使用变长编码的 UTF-8 或者 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Shift_JIS#Shift_JIS_byte_map">Shift JIS</a> 编码。这种情况在下面的 <a target="_blank" rel="noopener" href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/cut.html#tag_20_28_16">POSIX 标准的非规范性摘录</a> 中被明确地解释过：</p><blockquote><p>先前版本的 <code>cut</code> 程序将字节和字符视作等同的环境下运作（正如在某些实现下对退格键 <code>&lt;backspace&gt;</code> 和制表键 <code>&lt;tab&gt;</code> 的处理）。在针对多字节字符的情况下，特别增加了 <code>-b</code> 选项。</p></blockquote><p>嘿，等一下！我并没有在上面“有错误”的例子中使用 ‘-b’ 选项，而是 <code>-c</code> 选项呀！所以，难道<em>不应该</em>能够成功处理了吗！？</p><p>是的，确实<em>应该</em>：但是很不幸，即便我们现在已身处 2018 年，GNU Coreutils 的版本为 8.30 了，<code>cut</code> 程序的 GNU 版本实现仍然不能很好地处理多字节字符。引用 <a target="_blank" rel="noopener" href="https://www.gnu.org/software/coreutils/manual/html_node/cut-invocation.html#cut-invocation">GNU 文档</a> 的话说，<em><code>-c</code> 选项“现在和 <code>-b</code> 选项是相同的，但对于国际化的情形将有所不同[…]”</em>。需要提及的是，这个问题距今已有 10 年之久了！</p><p>另一方面，<a target="_blank" rel="noopener" href="https://www.openbsd.org/">OpenBSD</a> 的实现版本和 POSIX 相吻合，这将归功于当前的本地化（<code>locale</code>）设定来合理地处理多字节字符：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"># 确保随后的命令知晓我们现在处理的是 UTF-8 编码的文本文件</span><br><span class="line">openbsd-6.3$ export LC_CTYPE=en_US.UTF-8</span><br><span class="line"></span><br><span class="line"># 使用 `-c` 选项， `cut` 能够合理地处理多字节字符</span><br><span class="line">openbsd-6.3$ cut -c -24,36-59,93- BALANCE-V2.txt</span><br><span class="line">ACCDOC    ACCDOCDATE    ACCOUNTLIB              DEBIT          CREDIT</span><br><span class="line">4         1012017       TIDE SCHEDULE           00000001615,00</span><br><span class="line">4         1012017       VAT BS/ENC              00000000323,00</span><br><span class="line">4         1012017       PAYABLES                               00000001938,00</span><br><span class="line">5         1012017       ACCOMODATION GUIDE      00000001333,00</span><br><span class="line">5         1012017       VAT BS/ENC              00000000266,60</span><br><span class="line">5         1012017       PAYABLES                               00000001599,60</span><br><span class="line">6         1012017       PAYABLES                               00000001837,20</span><br><span class="line">6         1012017       VAT BS/ENC              00000000306,20</span><br><span class="line">6         1012017       TOURIST GUIDE BOOK      00000001531,00</span><br><span class="line">19        1012017       SEMINAR FEES            00000000080,00</span><br><span class="line">19        1012017       PAYABLES                               00000000080,00</span><br><span class="line">28        1012017       MAINTENANCE             00000000746,58</span><br><span class="line">28        1012017       VAT BS/ENC              00000000149,32</span><br><span class="line">28        1012017       PAYABLES                               00000000895,90</span><br><span class="line">31        1012017       PAYABLES                               00000000240,00</span><br><span class="line">31        1012017       VAT BS/DEBIT            00000000040,00</span><br><span class="line">31        1012017       ADVERTISEMENTS          00000000200,00</span><br><span class="line">32        1012017       WATER                   00000000202,20</span><br><span class="line">32        1012017       VAT BS/DEBIT            00000000020,22</span><br><span class="line">32        1012017       WATER                   00000000170,24</span><br><span class="line">32        1012017       VAT BS/DEBIT            00000000009,37</span><br><span class="line">32        1012017       PAYABLES                               00000000402,03</span><br><span class="line">34        1012017       RENTAL COSTS            00000000018,00</span><br><span class="line">34        1012017       PAYABLES                               00000000018,00</span><br><span class="line">35        1012017       MISCELLANEOUS CHARGES   00000000015,00</span><br><span class="line">35        1012017       VAT BS/DEBIT            00000000003,00</span><br><span class="line">35        1012017       PAYABLES                               00000000018,00</span><br><span class="line">36        1012017       LANDLINE TELEPHONE      00000000069,14</span><br><span class="line">36        1012017       VAT BS/ENC              00000000013,83</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>正如期望的那样，当使用 <code>-b</code> 选项而不是 <code>-c</code> 选项后， OpenBSD 版本的 <code>cut</code> 实现和传统的 <code>cut</code> 表现是类似的：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">openbsd-6.3$ cut -b -24,36-59,93- BALANCE-V2.txt</span><br><span class="line">ACCDOC    ACCDOCDATE    ACCOUNTLIB              DEBIT          CREDIT</span><br><span class="line">4         1012017       TIDE SCHEDULE            00000001615,00</span><br><span class="line">4         1012017       VAT BS/ENC               00000000323,00</span><br><span class="line">4         1012017       PAYABLES                                00000001938,00</span><br><span class="line">5         1012017       ACCOMODATION GUIDE       00000001333,00</span><br><span class="line">5         1012017       VAT BS/ENC               00000000266,60</span><br><span class="line">5         1012017       PAYABLES                                00000001599,60</span><br><span class="line">6         1012017       PAYABLES                               00000001837,20</span><br><span class="line">6         1012017       VAT BS/ENC              00000000306,20</span><br><span class="line">6         1012017       TOURIST GUIDE BOOK      00000001531,00</span><br><span class="line">19        1012017       SEMINAR FEES            00000000080,00</span><br><span class="line">19        1012017       PAYABLES                               00000000080,00</span><br><span class="line">28        1012017       MAINTENANCE             00000000746,58</span><br><span class="line">28        1012017       VAT BS/ENC              00000000149,32</span><br><span class="line">28        1012017       PAYABLES                               00000000895,90</span><br><span class="line">31        1012017       PAYABLES                                00000000240,00</span><br><span class="line">31        1012017       VAT BS/DEBIT             00000000040,00</span><br><span class="line">31        1012017       ADVERTISEMENTS           00000000200,00</span><br><span class="line">32        1012017       WATER                   00000000202,20</span><br><span class="line">32        1012017       VAT BS/DEBIT            00000000020,22</span><br><span class="line">32        1012017       WATER                   00000000170,24</span><br><span class="line">32        1012017       VAT BS/DEBIT            00000000009,37</span><br><span class="line">32        1012017       PAYABLES                               00000000402,03</span><br><span class="line">34        1012017       RENTAL COSTS            00000000018,00</span><br><span class="line">34        1012017       PAYABLES                               00000000018,00</span><br><span class="line">35        1012017       MISCELLANEOUS CHARGES   00000000015,00</span><br><span class="line">35        1012017       VAT BS/DEBIT            00000000003,00</span><br><span class="line">35        1012017       PAYABLES                               00000000018,00</span><br><span class="line">36        1012017       LANDLINE TELEPHONE        00000000069,14</span><br><span class="line">36        1012017       VAT BS/ENC                00000000013,83</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3、-作用在域上"><a href="#3、-作用在域上" class="headerlink" title="3、 作用在域上"></a>3、 作用在域上</h3><p>从某种意义上说，使用 <code>cut</code> 来处理用特定分隔符隔开的文本文件要更加容易一些，因为只需要确定好每行中域之间的分隔符，然后复制域的内容到输出就可以了，而不需要烦恼任何与编码相关的问题。</p><p>下面是一个用分隔符隔开的示例文本文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sh$ head BALANCE.csv</span><br><span class="line">ACCDOC;ACCDOCDATE;ACCOUNTNUM;ACCOUNTLIB;ACCDOCLIB;DEBIT;CREDIT</span><br><span class="line">4;1012017;623477;TIDE SCHEDULE;ALNEENRE-4701-LOC;00000001615,00;</span><br><span class="line">4;1012017;445452;VAT BS/ENC;ALNEENRE-4701-LOC;00000000323,00;</span><br><span class="line">4;1012017;4356;PAYABLES;ALNEENRE-4701-LOC;;00000001938,00</span><br><span class="line">5;1012017;623372;ACCOMODATION GUIDE;ALNEENRE-4771-LOC;00000001333,00;</span><br><span class="line">5;1012017;445452;VAT BS/ENC;ALNEENRE-4771-LOC;00000000266,60;</span><br><span class="line">5;1012017;4356;PAYABLES;ALNEENRE-4771-LOC;;00000001599,60</span><br><span class="line">6;1012017;4356;PAYABLES;FACT FA00006253 - BIT QUIROBEN;;00000001837,20</span><br><span class="line">6;1012017;445452;VAT BS/ENC;FACT FA00006253 - BIT QUIROBEN;00000000306,20;</span><br><span class="line">6;1012017;623795;TOURIST GUIDE BOOK;FACT FA00006253 - BIT QUIROBEN;00000001531,00;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你可能知道上面文件是一个 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> 格式的文件（它以逗号来分隔），即便有时候域分隔符不是逗号。例如分号（<code>;</code>）也常被用来作为分隔符，并且对于那些总使用逗号作为 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Decimal_separator">十进制分隔符</a>的国家（例如法国，所以上面我的示例文件中选用了他们国家的字符），当导出数据为 “CSV” 格式时，默认将使用分号来分隔数据。另一种常见的情况是使用 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Tab-separated_values">tab 键</a> 来作为分隔符，从而生成叫做 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Tab-separated_values">tab 分隔的值</a> 的文件。最后，在 Unix 和 Linux 领域，冒号 (<code>:</code>) 是另一种你能找到的常见分隔符号，例如在标准的 <code>/etc/passwd</code> 和 <code>/etc/group</code> 这两个文件里。</p><p>当处理使用分隔符隔开的文本文件格式时，你可以向带有 <code>-f</code> 选项的 <code>cut</code> 命令提供需要保留的域的范围，并且你也可以使用 <code>-d</code> 选项来指定分隔符（当没有使用 <code>-d</code> 选项时，默认以 tab 字符来作为分隔符）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sh$ cut -f 5- -d&#x27;;&#x27; BALANCE.csv | head</span><br><span class="line">ACCDOCLIB;DEBIT;CREDIT</span><br><span class="line">ALNEENRE-4701-LOC;00000001615,00;</span><br><span class="line">ALNEENRE-4701-LOC;00000000323,00;</span><br><span class="line">ALNEENRE-4701-LOC;;00000001938,00</span><br><span class="line">ALNEENRE-4771-LOC;00000001333,00;</span><br><span class="line">ALNEENRE-4771-LOC;00000000266,60;</span><br><span class="line">ALNEENRE-4771-LOC;;00000001599,60</span><br><span class="line">FACT FA00006253 - BIT QUIROBEN;;00000001837,20</span><br><span class="line">FACT FA00006253 - BIT QUIROBEN;00000000306,20;</span><br><span class="line">FACT FA00006253 - BIT QUIROBEN;00000001531,00;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="处理不包含分隔符的行"><a href="#处理不包含分隔符的行" class="headerlink" title="处理不包含分隔符的行"></a>处理不包含分隔符的行</h4><p>但要是输入文件中的某些行没有分隔符又该怎么办呢？很容易地认为可以将这样的行视为只包含第一个域。但 <code>cut</code> 程序并 <em>不是</em> 这样做的。</p><p>默认情况下，当使用 <code>-f</code> 选项时，<code>cut</code> 将总是原样输出不包含分隔符的那一行（可能假设它是非数据行，就像表头或注释等）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sh$ (echo &quot;# 2018-03 BALANCE&quot;; cat BALANCE.csv) &gt; BALANCE-WITH-HEADER.csv</span><br><span class="line"></span><br><span class="line">sh$ cut -f 6,7 -d&#x27;;&#x27; BALANCE-WITH-HEADER.csv | head -5</span><br><span class="line"># 2018-03 BALANCE</span><br><span class="line">DEBIT;CREDIT</span><br><span class="line">00000001615,00;</span><br><span class="line">00000000323,00;</span><br><span class="line">;00000001938,00</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使用 <code>-s</code> 选项，你可以做出相反的行为，这样 <code>cut</code> 将总是忽略这些行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sh$ cut -s -f 6,7 -d&#x27;;&#x27; BALANCE-WITH-HEADER.csv | head -5</span><br><span class="line">DEBIT;CREDIT</span><br><span class="line">00000001615,00;</span><br><span class="line">00000000323,00;</span><br><span class="line">;00000001938,00</span><br><span class="line">00000001333,00;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>假如你好奇心强，你还可以探索这种特性，来作为一种相对隐晦的方式去保留那些只包含给定字符的行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 保留含有一个 `e` 的行</span><br><span class="line">sh$ printf &quot;%s\n&quot; &#123;mighty,bold,great&#125;-&#123;condor,monkey,bear&#125; | cut -s -f 1- -d&#x27;e&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="改变输出的分隔符"><a href="#改变输出的分隔符" class="headerlink" title="改变输出的分隔符"></a>改变输出的分隔符</h4><p>作为一种扩展， GNU 版本实现的 <code>cut</code> 允许通过使用 <code>--output-delimiter</code> 选项来为结果指定一个不同的域分隔符：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sh$ cut -f 5,6- -d&#x27;;&#x27; --output-delimiter=&quot;*&quot; BALANCE.csv | head</span><br><span class="line">ACCDOCLIB*DEBIT*CREDIT</span><br><span class="line">ALNEENRE-4701-LOC*00000001615,00*</span><br><span class="line">ALNEENRE-4701-LOC*00000000323,00*</span><br><span class="line">ALNEENRE-4701-LOC**00000001938,00</span><br><span class="line">ALNEENRE-4771-LOC*00000001333,00*</span><br><span class="line">ALNEENRE-4771-LOC*00000000266,60*</span><br><span class="line">ALNEENRE-4771-LOC**00000001599,60</span><br><span class="line">FACT FA00006253 - BIT QUIROBEN**00000001837,20</span><br><span class="line">FACT FA00006253 - BIT QUIROBEN*00000000306,20*</span><br><span class="line">FACT FA00006253 - BIT QUIROBEN*00000001531,00*</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>需要注意的是，在上面这个例子中，所有出现域分隔符的地方都被替换掉了，而不仅仅是那些在命令行中指定的作为域范围边界的分隔符。</p><h3 id="4、-非-POSIX-GNU-扩展"><a href="#4、-非-POSIX-GNU-扩展" class="headerlink" title="4、 非 POSIX GNU 扩展"></a>4、 非 POSIX GNU 扩展</h3><p>说到非 POSIX GNU 扩展，它们中的某些特别有用。特别需要提及的是下面的扩展也同样对字节、字符或者域范围工作良好（相对于当前的 GNU 实现来说）。</p><p><code>--complement</code>：</p><p>想想在 sed 地址中的感叹符号(<code>!</code>)，使用它，<code>cut</code> 将只保存<strong>没有</strong>被匹配到的范围:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 只保留第 5 个域</span><br><span class="line">sh$ cut -f 5 -d&#x27;;&#x27; BALANCE.csv |head -3</span><br><span class="line">ACCDOCLIB</span><br><span class="line">ALNEENRE-4701-LOC</span><br><span class="line">ALNEENRE-4701-LOC</span><br><span class="line"></span><br><span class="line"># 保留除了第 5 个域之外的内容</span><br><span class="line">sh$ cut --complement -f 5 -d&#x27;;&#x27; BALANCE.csv |head -3</span><br><span class="line">ACCDOC;ACCDOCDATE;ACCOUNTNUM;ACCOUNTLIB;DEBIT;CREDIT</span><br><span class="line">4;1012017;623477;TIDE SCHEDULE;00000001615,00;</span><br><span class="line">4;1012017;445452;VAT BS/ENC;00000000323,00;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>--zero-terminated (-z)</code>：</p><p>使用 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Null_character">NUL 字符</a> 来作为行终止符，而不是 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Newline"><ruby>新行 <rt>newline</rt></ruby>字符</a>。当你的数据包含 新行字符时， <code>-z</code> 选项就特别有用了，例如当处理文件名的时候（因为在文件名中新行字符是可以使用的，而 NUL 则不可以）。</p><p>为了展示 <code>-z</code> 选项，让我们先做一点实验。首先，我们将创建一个文件名中包含换行符的文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bash$ touch $&#x27;EMPTY\nFILE\nWITH FUNKY\nNAME&#x27;.txt</span><br><span class="line">bash$ ls -1 *.txt</span><br><span class="line">BALANCE.txt</span><br><span class="line">BALANCE-V2.txt</span><br><span class="line">EMPTY?FILE?WITH FUNKY?NAME.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>现在假设我想展示每个 <code>*.txt</code> 文件的前 5 个字符。一个想当然的解决方法将会失败：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sh$ ls -1 *.txt | cut -c 1-5</span><br><span class="line">BALAN</span><br><span class="line">BALAN</span><br><span class="line">EMPTY</span><br><span class="line">FILE</span><br><span class="line">WITH</span><br><span class="line">NAME.</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你可以已经知道 <a target="_blank" rel="noopener" href="https://linux.die.net/man/1/ls">ls</a> 是为了<a target="_blank" rel="noopener" href="http://lists.gnu.org/archive/html/coreutils/2014-02/msg00005.html">方便人类使用</a>而特别设计的，并且在一个命令管道中使用它是一个反模式（确实是这样的）。所以让我们用 <a target="_blank" rel="noopener" href="https://linux.die.net/man/1/find">find</a> 来替换它：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sh$ find . -name &#x27;*.txt&#x27; -printf &quot;%f\n&quot; | cut -c 1-5</span><br><span class="line">BALAN</span><br><span class="line">EMPTY</span><br><span class="line">FILE</span><br><span class="line">WITH</span><br><span class="line">NAME.</span><br><span class="line">BALAN</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上面的命令基本上产生了与先前类似的结果（尽管以不同的次序，因为 <code>ls</code> 会隐式地对文件名做排序，而 <code>find</code> 则不会）。</p><p>在上面的两个例子中，都有一个相同的问题，<code>cut</code> 命令不能区分 新行 字符是数据域的一部分（即文件名），还是作为最后标记的 新行 记号。但使用 NUL 字节（<code>\0</code>）来作为行终止符就将排除掉这种混淆的情况，使得我们最后可以得到期望的结果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 我被告知在某些旧版的 `tr` 程序中需要使用 `\000` 而不是 `\0` 来代表 NUL 字符（假如你需要这种改变请让我知晓！）</span><br><span class="line">sh$ find . -name &#x27;*.txt&#x27; -printf &quot;%f\0&quot; | cut -z -c 1-5| tr &#x27;\0&#x27; &#x27;\n&#x27;</span><br><span class="line">BALAN</span><br><span class="line">EMPTY</span><br><span class="line">BALAN</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>通过上面最后的例子，我们就达到了本文的最后部分了，所以我将让你自己试试 <code>-printf</code> 后面那个有趣的 <code>&quot;%f\0&quot;</code> 参数或者理解为什么我在管道的最后使用了 <a target="_blank" rel="noopener" href="https://linux.die.net/man/1/tr">tr</a> 命令。</p><h3 id="使用-cut-命令可以实现更多功能"><a href="#使用-cut-命令可以实现更多功能" class="headerlink" title="使用 cut 命令可以实现更多功能"></a>使用 cut 命令可以实现更多功能</h3><p>我只是列举了 <code>cut</code> 命令的最常见且在我眼中最基础的使用方式。你甚至可以将它以更加实用的方式加以运用，这取决于你的逻辑和想象。</p><p>不要再犹豫了，请使用下面的评论框贴出你的发现。最后一如既往的，假如你喜欢这篇文章，请不要忘记将它分享到你最喜爱网站和社交媒体中！</p><hr><p>via: <a target="_blank" rel="noopener" href="https://linuxhandbook.com/cut-command/">https://linuxhandbook.com/cut-command/</a></p><p>作者：<a target="_blank" rel="noopener" href="https://linuxhandbook.com/author/sylvain/">Sylvain Leroux</a> 译者：<a target="_blank" rel="noopener" href="https://github.com/FSSlc">FSSlc</a> 校对：<a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p><p>本文由 <a target="_blank" rel="noopener" href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a target="_blank" rel="noopener" href="https://linux.cn/">Linux中国</a> 荣誉推出</p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p></div></div></body></html>