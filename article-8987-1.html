<!doctype html><html lang="en"><head><meta name="description" content="一个LinuxCN的镜像站"><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>构建你的数据科学作品集：用数据讲故事 - 归墟星火集 又一个 LinuxCN 站点</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 又一个 LinuxCN 站点 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">构建你的数据科学作品集：用数据讲故事</h1><span class="post-date">2017-10-22</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E8%BD%AF%E4%BB%B6%E5%BC%80%E5%8F%91/">软件开发</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/">数据科学</a></div><div class="post-content"><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/205831m4we17ipgm7e66us.jpg"></p><blockquote><p>这是如何建立<ruby>数据科学作品集 <rt>Data Science Portfolio</rt></ruby>系列文章中的第一篇。如果你喜欢这篇文章并且想知道此系列的下一篇文章何时发表，你可以<a target="_blank" rel="noopener" href="https://www.dataquest.io/blog/data-science-portfolio-project/#email-signup">在页面底部订阅</a>。</p></blockquote><p>数据科学公司们在决定雇佣一个人时越来越看重其作品集。其中一个原因就是<ruby>作品集 <rt>portfolio</rt></ruby>是分析一个人真实技能的最好方式。好消息是，作品集是完全可以被你掌控的。如果你在其上投入了一些工作，你就能够做出一个令那些公司印象深刻的作品集结果。</p><p>建立一个高质量作品集的第一步就是知道展示什么技能。那些公司们主要希望数据科学工作者拥有的技能，或者说他们主要希望作品集所展示的技能是：</p><ul><li>表达能力</li><li>合作能力</li><li>专业技能</li><li>解释数据的能力</li><li>有目标和有积极性的</li></ul><p>任何一个好的作品集都由多个工程构成，每一个工程都会展示 1-2 个上面所说的点。这是涵盖了“如何完成一个完整的数据科学作品集”系列文章的第一篇。在这篇文章中，我们将会涵括如何完成你的第一项数据科学作品集工程，并且对此进行有效的解释。在最后，你将会得到一个帮助展示你表达能力和解释数据能力的工程。</p><h3 id="用数据讲故事"><a href="#用数据讲故事" class="headerlink" title="用数据讲故事"></a>用数据讲故事</h3><p>数据科学是表达的基础。你将会在数据中发现一些观点，并且找出一个高效的方式来向他人表达这些，之后向他们展示你所开展的课题。数据科学最关键的手法之一就是能够用数据讲述一个清晰的故事。一个清晰的故事能够使你的观点更加引人注目，并且能使别人理解你的想法。</p><p>数据科学中的故事是一个讲述你发现了什么，你怎么发现它的，并且它意味着什么的故事。例如假使发现你公司的收入相对去年减少了百分之二十。这并不能够确定原因，你可能需要和其它人沟通为什么收入会减少，并且在尝试修复它。</p><p>用数据讲故事主要包含：</p><ul><li>理解并确定上下文</li><li>从多角度发掘</li><li>使用有趣的表示方法</li><li>使用多种数据来源</li><li>一致的表述</li></ul><p>用来讲述数据的故事最有效率的工具就是 <a target="_blank" rel="noopener" href="http://www.jupyter.org/">Jupyter notebook</a>。如果你不熟悉，<a target="_blank" rel="noopener" href="https://www.dataquest.io/blog/python-data-science/">此处</a>有一个好的教程。Jupyter notebook 允许你交互式的发掘数据，并且将你的结果分享到多个网站，包括 Github。分享你的结果有助于合作研究和其他人拓展你的分析。</p><p>在这篇文章中，我们将使用 Jupyter notebook，以及 Pandas 和 matplotlib 这样的 Python 库。</p><h3 id="为你的数据科学工程选择一个主题"><a href="#为你的数据科学工程选择一个主题" class="headerlink" title="为你的数据科学工程选择一个主题"></a>为你的数据科学工程选择一个主题</h3><p>建立一个工程的第一步就是决定你的主题。你要让你的主题是你兴趣所在，有动力去挖掘。进行数据挖掘时，为了完成而完成和有兴趣完成的区别是很明显的。这个步骤是值得花费时间的，所以确保你找到了你真正感兴趣的东西。</p><p>一个寻找主题的好方法就是浏览不同的数据集并且寻找感兴趣的部分。这里有一些作为起点的好的网站：</p><ul><li><a target="_blank" rel="noopener" href="https://www.data.gov/">Data.gov</a> - 包含了政府数据。</li><li><a target="_blank" rel="noopener" href="https://reddit.com/r/datasets">&#x2F;r&#x2F;datasets</a> – 一个有着上百个有趣数据集的 reddit 板块。</li><li><a target="_blank" rel="noopener" href="https://github.com/caesar0301/awesome-public-datasets">Awesome datasets</a> – 一个数据集的列表，位于 Github 上。</li><li><a target="_blank" rel="noopener" href="https://www.dataquest.io/blog/free-datasets-for-projects/">17 个找到数据集的地方</a> – 这篇博文列出了 17 个数据集，每个都包含了示例数据集。</li></ul><p>真实世界中的数据科学，你经常无法找到可以浏览的合适的单个数据集。你可能需要聚合多个独立的数据源，或者做数量庞大的数据清理。如果该主题非常吸引你，这是值得这样做的，并且也能更好的展示你的技能。</p><p>关于这篇文章的主题，我们将使用纽约市公立学校的数据，我们可以在<a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/data?cat=education">这里</a>找到它。</p><h3 id="选择主题"><a href="#选择主题" class="headerlink" title="选择主题"></a>选择主题</h3><p>这对于项目全程来说是十分重要的。因为主题能很好的限制项目的范围，并且它能够使我们知道它可以被完成。比起一个没有足够动力完成的工程来说，添加到一个完成的工程更加容易。</p><p>所以，我们将关注高中的<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/SAT">学术评估测试</a>，伴随着多种人口统计和它们的其它数据。关于学习评估测试， 或者说 SAT，是美国高中生申请大学前的测试。大学在做判定时将考虑该成绩，所以高分是十分重要的。考试分为三个阶段，每个阶段总分为 800。全部分数为 2400（即使这个前后更改了几次，在数据中总分还是 2400）。高中经常通过平均 SAT分数进行排名，并且 SAT 是评判高中有多好的标准。</p><p>因为由关于 SAT 分数对于美国中某些种族群体是不公平的，所以对纽约市这个数据做分析能够对 SAT 的公平性有些许帮助。</p><p>我们在<a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/SAT-Results/f9bf-2cp4">这里</a>有 SAT 成绩的数据集，并且在<a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/DOE-High-School-Directory-2014-2015/n3p6-zve2">这里</a>有包含了每所高中的信息的数据集。这些将构成我们的工程的基础，但是我们将加入更多的信息来创建有趣的分析。</p><h3 id="补充数据"><a href="#补充数据" class="headerlink" title="补充数据"></a>补充数据</h3><p>如果你已经有了一个很好的主题，拓展其它可以提升主题或者更深入挖掘数据的的数据集是一个好的选择。在前期十分适合做这些工作，你将会有尽可能多的数据来构建你的工程。数据越少意味着你会太早的放弃了你的工程。</p><p>在本项目中，在包含人口统计信息和测试成绩的网站上有一些相关的数据集。</p><p>这些是我们将会用到的所有数据集：</p><ul><li><a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/SAT-Results/f9bf-2cp4">学校 SAT 成绩</a> – 纽约市每所高中的 SAT 成绩。</li><li><a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/School-Attendance-and-Enrollment-Statistics-by-Dis/7z8d-msnt">学校出勤情况</a> – 纽约市每所学校的出勤信息。</li><li><a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/NYS-Math-Test-Results-By-Grade-2006-2011-School-Le/jufi-gzgp">数学成绩</a> – 纽约市每所学校的数学成绩。</li><li><a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/2010-2011-Class-Size-School-level-detail/urz7-pzb3">班级规模</a> - 纽约市每所学校课堂人数信息。</li><li><a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/AP-College-Board-2010-School-Level-Results/itfs-ms3e">AP 成绩</a> - 高阶位考试，在美国，通过 AP 测试就能获得大学学分。</li><li><a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/Graduation-Outcomes-Classes-Of-2005-2010-School-Le/vh2h-md7a">毕业去向</a> – 由百分之几的学生毕业了，和其它去向信息。</li><li><a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/School-Demographics-and-Accountability-Snapshot-20/ihfw-zy9j">人口统计</a> – 每个学校的人口统计信息。</li><li><a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/NYC-School-Survey-2011/mnz3-dyi8">学校问卷</a> – 学校的家长、教师，学生的问卷。</li><li><a target="_blank" rel="noopener" href="https://data.cityofnewyork.us/Education/School-Districts/r8nu-ymqj">学校分布地图</a> – 包含学校的区域布局信息，因此我们能将它们在地图上标出。</li></ul><p>（LCTT 译注：高阶位考试（AP）是美国和加拿大的一个由大学委员会创建的计划，该计划为高中学生提供大学水平的课程和考试。 美国学院和大学可以授予在考试中获得高分的学生的就学和课程学分。）</p><p>这些数据作品集之间是相互关联的，并且我们能够在开始分析之前进行合并。</p><h3 id="获取背景信息"><a href="#获取背景信息" class="headerlink" title="获取背景信息"></a>获取背景信息</h3><p>在开始分析数据之前，搜索一些背景信息是有必要的。我们知道这些有用的信息：</p><ul><li>纽约市被分为五个不同的辖区</li><li>纽约市的学校被分配到几个学区，每个学区都可能包含数十所学校。</li><li>数据集中的学校并不全是高中，所以我们需要对数据进行一些清理工作。</li><li>纽约市的每所学校都有自己单独的编码，被称为‘DBN’，即区域行政编号。</li><li>为了通过区域进行数据聚合，我们可以使用地图区域信息来绘制逐区差异。</li></ul><h3 id="理解数据"><a href="#理解数据" class="headerlink" title="理解数据"></a>理解数据</h3><p>为了真正的理解数据信息，你需要花费时间来挖掘和阅读数据。因此，每个数据链接都有数据的描述信息，并伴随着相关列。就像是我们拥有的高中 SAT 成绩信息，也包含图像和其它信息的数据集。</p><p>我们可以运行一些代码来读取数据。我们将使用 <a target="_blank" rel="noopener" href="http://jupyter.org/">Jupyter notebook</a> 来挖掘数据。下面的代码将会执行以下操作：</p><ul><li>循环遍历我们下载的所有数据文件。</li><li>将文件读取到 <a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html">Pandas DataFrame</a>。</li><li>将所有数据框架导入 Python 数据库中。</li></ul><p>In [100]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import pandas</span><br><span class="line">import numpy as np</span><br><span class="line"></span><br><span class="line">files = [&quot;ap_2010.csv&quot;, &quot;class_size.csv&quot;, &quot;demographics.csv&quot;, &quot;graduation.csv&quot;, &quot;hs_directory.csv&quot;, &quot;math_test_results.csv&quot;, &quot;sat_results.csv&quot;]</span><br><span class="line"></span><br><span class="line">data = &#123;&#125;</span><br><span class="line">for f in files:</span><br><span class="line">    d = pandas.read_csv(&quot;schools/&#123;0&#125;&quot;.format(f))</span><br><span class="line">    data[f.replace(&quot;.csv&quot;, &quot;&quot;)] = d</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>一旦我们将数据读入，我们就可以使用 DataFrames 的 <a target="_blank" rel="noopener" href="https://www.dataquest.io/blog/data-science-portfolio-project/">head</a> 方法打印每个 DataFrame 的前五行。</p><p>In [103]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for k,v in data.items():</span><br><span class="line">    print(&quot;\n&quot; + k + &quot;\n&quot;)</span><br><span class="line">    print(v.head())</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br></pre></td><td class="code"><pre><span class="line">math_test_results</span><br><span class="line"></span><br><span class="line">      DBN Grade  Year      Category  Number Tested Mean Scale Score Level 1 #  \</span><br><span class="line">0  01M015     3  2006  All Students             39              667         2</span><br><span class="line">1  01M015     3  2007  All Students             31              672         2</span><br><span class="line">2  01M015     3  2008  All Students             37              668         0</span><br><span class="line">3  01M015     3  2009  All Students             33              668         0</span><br><span class="line">4  01M015     3  2010  All Students             26              677         6</span><br><span class="line"></span><br><span class="line">  Level 1 % Level 2 # Level 2 % Level 3 # Level 3 % Level 4 # Level 4 %  \</span><br><span class="line">0      5.1%        11     28.2%        20     51.3%         6     15.4%</span><br><span class="line">1      6.5%         3      9.7%        22       71%         4     12.9%</span><br><span class="line">2        0%         6     16.2%        29     78.4%         2      5.4%</span><br><span class="line">3        0%         4     12.1%        28     84.8%         1        3%</span><br><span class="line">4     23.1%        12     46.2%         6     23.1%         2      7.7%</span><br><span class="line"></span><br><span class="line">  Level 3+4 # Level 3+4 %</span><br><span class="line">0          26       66.7%</span><br><span class="line">1          26       83.9%</span><br><span class="line">2          31       83.8%</span><br><span class="line">3          29       87.9%</span><br><span class="line">4           8       30.8%</span><br><span class="line"></span><br><span class="line">ap_2010</span><br><span class="line"></span><br><span class="line">      DBN                             SchoolName AP Test Takers   \</span><br><span class="line">0  01M448           UNIVERSITY NEIGHBORHOOD H.S.              39</span><br><span class="line">1  01M450                 EAST SIDE COMMUNITY HS              19</span><br><span class="line">2  01M515                    LOWER EASTSIDE PREP              24</span><br><span class="line">3  01M539         NEW EXPLORATIONS SCI,TECH,MATH             255</span><br><span class="line">4  02M296  High School of Hospitality Management               s</span><br><span class="line"></span><br><span class="line">  Total Exams Taken Number of Exams with scores 3 4 or 5</span><br><span class="line">0                49                                   10</span><br><span class="line">1                21                                    s</span><br><span class="line">2                26                                   24</span><br><span class="line">3               377                                  191</span><br><span class="line">4                 s                                    s</span><br><span class="line"></span><br><span class="line">sat_results</span><br><span class="line"></span><br><span class="line">      DBN                                    SCHOOL NAME  \</span><br><span class="line">0  01M292  HENRY STREET SCHOOL FOR INTERNATIONAL STUDIES</span><br><span class="line">1  01M448            UNIVERSITY NEIGHBORHOOD HIGH SCHOOL</span><br><span class="line">2  01M450                     EAST SIDE COMMUNITY SCHOOL</span><br><span class="line">3  01M458                      FORSYTH SATELLITE ACADEMY</span><br><span class="line">4  01M509                        MARTA VALLE HIGH SCHOOL</span><br><span class="line"></span><br><span class="line">  Num of SAT Test Takers SAT Critical Reading Avg. Score SAT Math Avg. Score  \</span><br><span class="line">0                     29                             355                 404</span><br><span class="line">1                     91                             383                 423</span><br><span class="line">2                     70                             377                 402</span><br><span class="line">3                      7                             414                 401</span><br><span class="line">4                     44                             390                 433</span><br><span class="line"></span><br><span class="line">  SAT Writing Avg. Score</span><br><span class="line">0                    363</span><br><span class="line">1                    366</span><br><span class="line">2                    370</span><br><span class="line">3                    359</span><br><span class="line">4                    384</span><br><span class="line"></span><br><span class="line">class_size</span><br><span class="line"></span><br><span class="line">   CSD BOROUGH SCHOOL CODE                SCHOOL NAME GRADE  PROGRAM TYPE  \</span><br><span class="line">0    1       M        M015  P.S. 015 Roberto Clemente     0K       GEN ED</span><br><span class="line">1    1       M        M015  P.S. 015 Roberto Clemente     0K          CTT</span><br><span class="line">2    1       M        M015  P.S. 015 Roberto Clemente     01       GEN ED</span><br><span class="line">3    1       M        M015  P.S. 015 Roberto Clemente     01          CTT</span><br><span class="line">4    1       M        M015  P.S. 015 Roberto Clemente     02       GEN ED</span><br><span class="line"></span><br><span class="line">  CORE SUBJECT (MS CORE and 9-12 ONLY) CORE COURSE (MS CORE and 9-12 ONLY)  \</span><br><span class="line">0                                    -                                   -</span><br><span class="line">1                                    -                                   -</span><br><span class="line">2                                    -                                   -</span><br><span class="line">3                                    -                                   -</span><br><span class="line">4                                    -                                   -</span><br><span class="line"></span><br><span class="line">  SERVICE CATEGORY(K-9* ONLY)  NUMBER OF STUDENTS / SEATS FILLED  \</span><br><span class="line">0                           -                               19.0</span><br><span class="line">1                           -                               21.0</span><br><span class="line">2                           -                               17.0</span><br><span class="line">3                           -                               17.0</span><br><span class="line">4                           -                               15.0</span><br><span class="line"></span><br><span class="line">   NUMBER OF SECTIONS  AVERAGE CLASS SIZE  SIZE OF SMALLEST CLASS  \</span><br><span class="line">0                 1.0                19.0                    19.0</span><br><span class="line">1                 1.0                21.0                    21.0</span><br><span class="line">2                 1.0                17.0                    17.0</span><br><span class="line">3                 1.0                17.0                    17.0</span><br><span class="line">4                 1.0                15.0                    15.0</span><br><span class="line"></span><br><span class="line">   SIZE OF LARGEST CLASS DATA SOURCE  SCHOOLWIDE PUPIL-TEACHER RATIO</span><br><span class="line">0                   19.0         ATS                             NaN</span><br><span class="line">1                   21.0         ATS                             NaN</span><br><span class="line">2                   17.0         ATS                             NaN</span><br><span class="line">3                   17.0         ATS                             NaN</span><br><span class="line">4                   15.0         ATS                             NaN</span><br><span class="line"></span><br><span class="line">demographics</span><br><span class="line"></span><br><span class="line">      DBN                       Name  schoolyear fl_percent  frl_percent  \</span><br><span class="line">0  01M015  P.S. 015 ROBERTO CLEMENTE    20052006       89.4          NaN</span><br><span class="line">1  01M015  P.S. 015 ROBERTO CLEMENTE    20062007       89.4          NaN</span><br><span class="line">2  01M015  P.S. 015 ROBERTO CLEMENTE    20072008       89.4          NaN</span><br><span class="line">3  01M015  P.S. 015 ROBERTO CLEMENTE    20082009       89.4          NaN</span><br><span class="line">4  01M015  P.S. 015 ROBERTO CLEMENTE    20092010                    96.5</span><br><span class="line"></span><br><span class="line">   total_enrollment prek   k grade1 grade2    ...     black_num black_per  \</span><br><span class="line">0               281   15  36     40     33    ...            74      26.3</span><br><span class="line">1               243   15  29     39     38    ...            68      28.0</span><br><span class="line">2               261   18  43     39     36    ...            77      29.5</span><br><span class="line">3               252   17  37     44     32    ...            75      29.8</span><br><span class="line">4               208   16  40     28     32    ...            67      32.2</span><br><span class="line"></span><br><span class="line">  hispanic_num hispanic_per white_num white_per male_num male_per female_num  \</span><br><span class="line">0          189         67.3         5       1.8    158.0     56.2      123.0</span><br><span class="line">1          153         63.0         4       1.6    140.0     57.6      103.0</span><br><span class="line">2          157         60.2         7       2.7    143.0     54.8      118.0</span><br><span class="line">3          149         59.1         7       2.8    149.0     59.1      103.0</span><br><span class="line">4          118         56.7         6       2.9    124.0     59.6       84.0</span><br><span class="line"></span><br><span class="line">  female_per</span><br><span class="line">0       43.8</span><br><span class="line">1       42.4</span><br><span class="line">2       45.2</span><br><span class="line">3       40.9</span><br><span class="line">4       40.4</span><br><span class="line"></span><br><span class="line">[5 rows x 38 columns]</span><br><span class="line"></span><br><span class="line">graduation</span><br><span class="line"></span><br><span class="line">    Demographic     DBN                            School Name    Cohort  \</span><br><span class="line">0  Total Cohort  01M292  HENRY STREET SCHOOL FOR INTERNATIONAL      2003</span><br><span class="line">1  Total Cohort  01M292  HENRY STREET SCHOOL FOR INTERNATIONAL      2004</span><br><span class="line">2  Total Cohort  01M292  HENRY STREET SCHOOL FOR INTERNATIONAL      2005</span><br><span class="line">3  Total Cohort  01M292  HENRY STREET SCHOOL FOR INTERNATIONAL      2006</span><br><span class="line">4  Total Cohort  01M292  HENRY STREET SCHOOL FOR INTERNATIONAL  2006 Aug</span><br><span class="line"></span><br><span class="line">   Total Cohort Total Grads - n Total Grads - % of cohort Total Regents - n  \</span><br><span class="line">0             5               s                         s                 s</span><br><span class="line">1            55              37                     67.3%                17</span><br><span class="line">2            64              43                     67.2%                27</span><br><span class="line">3            78              43                     55.1%                36</span><br><span class="line">4            78              44                     56.4%                37</span><br><span class="line"></span><br><span class="line">  Total Regents - % of cohort Total Regents - % of grads  \</span><br><span class="line">0                           s                          s</span><br><span class="line">1                       30.9%                      45.9%</span><br><span class="line">2                       42.2%                      62.8%</span><br><span class="line">3                       46.2%                      83.7%</span><br><span class="line">4                       47.4%                      84.1%</span><br><span class="line"></span><br><span class="line">             ...            Regents w/o Advanced - n  \</span><br><span class="line">0            ...                                   s</span><br><span class="line">1            ...                                  17</span><br><span class="line">2            ...                                  27</span><br><span class="line">3            ...                                  36</span><br><span class="line">4            ...                                  37</span><br><span class="line"></span><br><span class="line">  Regents w/o Advanced - % of cohort Regents w/o Advanced - % of grads  \</span><br><span class="line">0                                  s                                 s</span><br><span class="line">1                              30.9%                             45.9%</span><br><span class="line">2                              42.2%                             62.8%</span><br><span class="line">3                              46.2%                             83.7%</span><br><span class="line">4                              47.4%                             84.1%</span><br><span class="line"></span><br><span class="line">  Local - n Local - % of cohort   Local - % of grads Still Enrolled - n  \</span><br><span class="line">0         s                   s                    s                  s</span><br><span class="line">1        20               36.4%                54.1%                 15</span><br><span class="line">2        16                 25%  37.200000000000003%                  9</span><br><span class="line">3         7                  9%                16.3%                 16</span><br><span class="line">4         7                  9%                15.9%                 15</span><br><span class="line"></span><br><span class="line">  Still Enrolled - % of cohort Dropped Out - n Dropped Out - % of cohort</span><br><span class="line">0                            s               s                         s</span><br><span class="line">1                        27.3%               3                      5.5%</span><br><span class="line">2                        14.1%               9                     14.1%</span><br><span class="line">3                        20.5%              11                     14.1%</span><br><span class="line">4                        19.2%              11                     14.1%</span><br><span class="line"></span><br><span class="line">[5 rows x 23 columns]</span><br><span class="line"></span><br><span class="line">hs_directory</span><br><span class="line"></span><br><span class="line">      dbn                                        school_name       boro  \</span><br><span class="line">0  17K548                Brooklyn School for Music &amp; Theatre   Brooklyn</span><br><span class="line">1  09X543                   High School for Violin and Dance      Bronx</span><br><span class="line">2  09X327        Comprehensive Model School Project M.S. 327      Bronx</span><br><span class="line">3  02M280     Manhattan Early College School for Advertising  Manhattan</span><br><span class="line">4  28Q680  Queens Gateway to Health Sciences Secondary Sc...     Queens</span><br><span class="line"></span><br><span class="line">  building_code    phone_number    fax_number grade_span_min  grade_span_max  \</span><br><span class="line">0          K440    718-230-6250  718-230-6262              9              12</span><br><span class="line">1          X400    718-842-0687  718-589-9849              9              12</span><br><span class="line">2          X240    718-294-8111  718-294-8109              6              12</span><br><span class="line">3          M520  718-935-3477             NaN              9              10</span><br><span class="line">4          Q695    718-969-3155  718-969-3552              6              12</span><br><span class="line"></span><br><span class="line">  expgrade_span_min  expgrade_span_max  \</span><br><span class="line">0               NaN                NaN</span><br><span class="line">1               NaN                NaN</span><br><span class="line">2               NaN                NaN</span><br><span class="line">3                 9               14.0</span><br><span class="line">4               NaN                NaN</span><br><span class="line"></span><br><span class="line">                         ...                          \</span><br><span class="line">0                        ...</span><br><span class="line">1                        ...</span><br><span class="line">2                        ...</span><br><span class="line">3                        ...</span><br><span class="line">4                        ...</span><br><span class="line"></span><br><span class="line">                                          priority02  \</span><br><span class="line">0                    Then to New York City residents</span><br><span class="line">1  Then to New York City residents who attend an ...</span><br><span class="line">2  Then to Bronx students or residents who attend...</span><br><span class="line">3  Then to New York City residents who attend an ...</span><br><span class="line">4  Then to Districts 28 and 29 students or residents</span><br><span class="line"></span><br><span class="line">                                          priority03  \</span><br><span class="line">0                                                NaN</span><br><span class="line">1                Then to Bronx students or residents</span><br><span class="line">2  Then to New York City residents who attend an ...</span><br><span class="line">3          Then to Manhattan students or residents</span><br><span class="line">4               Then to Queens students or residents</span><br><span class="line"></span><br><span class="line">                            priority04                       priority05  \</span><br><span class="line">0                                  NaN                              NaN</span><br><span class="line">1      Then to New York City residents                              NaN</span><br><span class="line">2  Then to Bronx students or residents  Then to New York City residents</span><br><span class="line">3      Then to New York City residents                              NaN</span><br><span class="line">4      Then to New York City residents                              NaN</span><br><span class="line"></span><br><span class="line">  priority06  priority07 priority08  priority09 priority10  \</span><br><span class="line">0        NaN         NaN        NaN         NaN        NaN</span><br><span class="line">1        NaN         NaN        NaN         NaN        NaN</span><br><span class="line">2        NaN         NaN        NaN         NaN        NaN</span><br><span class="line">3        NaN         NaN        NaN         NaN        NaN</span><br><span class="line">4        NaN         NaN        NaN         NaN        NaN</span><br><span class="line"></span><br><span class="line">                                          Location 1</span><br><span class="line">0  883 Classon Avenue\nBrooklyn, NY 11225\n(40.67...</span><br><span class="line">1  1110 Boston Road\nBronx, NY 10456\n(40.8276026...</span><br><span class="line">2  1501 Jerome Avenue\nBronx, NY 10452\n(40.84241...</span><br><span class="line">3  411 Pearl Street\nNew York, NY 10038\n(40.7106...</span><br><span class="line">4  160-20 Goethals Avenue\nJamaica, NY 11432\n(40...</span><br><span class="line"></span><br><span class="line">[5 rows x 58 columns]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>我们可以开始在数据作品集中观察有用的部分：</p><ul><li>大部分数据集包含 DBN 列。</li><li>一些条目看起来在地图上标出会很有趣，特别是 <code>Location 1</code>，这列在一个很长的字符串里面包含了位置信息。</li><li>有些数据集会出现每所学校对应多行数据（DBN 数据重复），这意味着我们要进行预处理。</li></ul><h3 id="统一数据"><a href="#统一数据" class="headerlink" title="统一数据"></a>统一数据</h3><p>为了使工作更简单，我们将需要将全部零散的数据集统一为一个。这将使我们能够快速跨数据集对比数据列。因此，我们需要找到相同的列将它们统一起来。请查看上面的输出数据， DBN 出现在多个数据集中，它看起来可以作为共同列。</p><p>如果我们用 google 搜索 <code>DBN New York City Schools</code>，我们<a target="_blank" rel="noopener" href="https://developer.cityofnewyork.us/api/doe-school-choice">在此</a>得到了结果。它解释了 DBN 是每个学校独特的编码。我们将挖掘数据集，特别是政府数据集。这通常需要做一些工作来找出每列的含义，或者每个数据集的意图。</p><p>现在主要的问题是这两个数据集 <code>class_size</code> 和 <code>hs_directory</code>，没有 <code>DBN</code> 列。在 <code>hs_directory</code> 数据中是 <code>dbn</code>，那么我们只需重命名即可，或者将它复制到新的名为 DBN 的列中。在 <code>class_size</code> 数据中，我们将需要尝试不同的方法。</p><p>DBN 列：</p><p>In [5]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data[&quot;demographics&quot;][&quot;DBN&quot;].head()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[5]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">0    01M015</span><br><span class="line">1    01M015</span><br><span class="line">2    01M015</span><br><span class="line">3    01M015</span><br><span class="line">4    01M015</span><br><span class="line">Name: DBN, dtype: object</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果我们查看 <code>class_size</code>数据，我们将看到前五行如下：</p><p>In [4]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data[&quot;class_size&quot;].head()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[4]:</p><table><thead><tr><th></th><th>CSD</th><th>BOROUGH</th><th>SCHOOL CODE</th><th>SCHOOL NAME</th><th>GRADE</th><th>PROGRAM TYPE</th><th>CORE SUBJECT (MS CORE and 9-12 ONLY)</th><th>CORE COURSE (MS CORE and 9-12 ONLY)</th><th>SERVICE CATEGORY(K-9* ONLY)</th><th>NUMBER OF STUDENTS &#x2F; SEATS FILLED</th><th>NUMBER OF SECTIONS</th><th>AVERAGE CLASS SIZE</th><th>SIZE OF SMALLEST CLASS</th><th>SIZE OF LARGEST CLASS</th><th>DATA SOURCE</th><th>SCHOOLWIDE PUPIL-TEACHER RATIO</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>M</td><td>M015</td><td>P.S. 015 Roberto Clemente</td><td>0K</td><td>GEN ED</td><td>-</td><td>-</td><td>-</td><td>19.0</td><td>1.0</td><td>19.0</td><td>19.0</td><td>19.0</td><td>ATS</td><td>NaN</td></tr><tr><td>1</td><td>1</td><td>M</td><td>M015</td><td>P.S. 015 Roberto Clemente</td><td>0K</td><td>CTT</td><td>-</td><td>-</td><td>-</td><td>21.0</td><td>1.0</td><td>21.0</td><td>21.0</td><td>21.0</td><td>ATS</td><td>NaN</td></tr><tr><td>2</td><td>1</td><td>M</td><td>M015</td><td>P.S. 015 Roberto Clemente</td><td>01</td><td>GEN ED</td><td>-</td><td>-</td><td>-</td><td>17.0</td><td>1.0</td><td>17.0</td><td>17.0</td><td>17.0</td><td>ATS</td><td>NaN</td></tr><tr><td>3</td><td>1</td><td>M</td><td>M015</td><td>P.S. 015 Roberto Clemente</td><td>01</td><td>CTT</td><td>-</td><td>-</td><td>-</td><td>17.0</td><td>1.0</td><td>17.0</td><td>17.0</td><td>17.0</td><td>ATS</td><td>NaN</td></tr><tr><td>4</td><td>1</td><td>M</td><td>M015</td><td>P.S. 015 Roberto Clemente</td><td>02</td><td>GEN ED</td><td>-</td><td>-</td><td>-</td><td>15.0</td><td>1.0</td><td>15.0</td><td>15.0</td><td>15.0</td><td>ATS</td><td>NaN</td></tr></tbody></table><p>正如上面所见，DBN 实际上是 <code>CSD</code>、 <code>BOROUGH</code> 和 <code>SCHOOL CODE</code> 的组合。对那些不熟悉纽约市的人来说，纽约由五个行政区组成。每个行政区是一个组织单位，并且有着相当于美国大城市一样的面积。DBN 全称为行政区域编号。看起来就像 CSD 是区域，BOROUGH 是行政区，并且当与 SCHOOL CODE 合并时就组成了 DBN。这里并没有寻找像这个数据这样的内在规律的系统方法，这需要一些探索和努力来发现。</p><p>现在我们已经知道了 DBN 的组成，那么我们就可以将它加入到 <code>class_size</code> 和 <code>hs_directory</code> 数据集中了：</p><p>In [ ]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data[&quot;class_size&quot;][&quot;DBN&quot;] = data[&quot;class_size&quot;].apply(lambda x: &quot;&#123;0:02d&#125;&#123;1&#125;&quot;.format(x[&quot;CSD&quot;], x[&quot;SCHOOL CODE&quot;]), axis=1)</span><br><span class="line">data[&quot;hs_directory&quot;][&quot;DBN&quot;] = data[&quot;hs_directory&quot;][&quot;dbn&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="加入问卷"><a href="#加入问卷" class="headerlink" title="加入问卷"></a>加入问卷</h4><p>最可能值得一看的数据集之一就是学生、家长和老师关于学校质量的问卷了。这些问卷包含了每所学校的安全程度、教学水平等。在我们合并数据集之前，让我们添加问卷数据。在真实世界的数据科学工程中，你经常会在分析过程中碰到有趣的数据，并且希望合并它。使用像 Jupyter notebook 一样灵活的工具将允许你快速添加一些新的代码，并且重新开始你的分析。</p><p>因此，我们将添加问卷数据到我们的 data 文件夹，并且合并所有之前的数据。问卷数据分为两个文件，一个包含所有的学校，一个包含 75 学区。我们将需要写一些代码来合并它们。之后的代码我们将：</p><ul><li>使用 windows-1252 编码读取所有学校的问卷。</li><li>使用 windows-1252 编码读取所有 75 号学区的问卷。</li><li>添加指示每个数据集所在学区的标志。</li><li>使用 DataFrame 的 <a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.concat.html">concat</a> 方法将数据集合并为一个。</li></ul><p>In [66]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">survey1 = pandas.read_csv(&quot;schools/survey_all.txt&quot;, delimiter=&quot;\t&quot;, encoding=&#x27;windows-1252&#x27;)</span><br><span class="line">survey2 = pandas.read_csv(&quot;schools/survey_d75.txt&quot;, delimiter=&quot;\t&quot;, encoding=&#x27;windows-1252&#x27;)</span><br><span class="line">survey1[&quot;d75&quot;] = False</span><br><span class="line">survey2[&quot;d75&quot;] = True</span><br><span class="line">survey = pandas.concat([survey1, survey2], axis=0)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>一旦我们将问卷合并，这里将会有一些混乱。我们希望我们合并的数据集列数最少，那么我们将可以轻易的进行列之间的对比并找出其间的关联。不幸的是，问卷数据有很多列并不是很有用：</p><p>In [16]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">survey.head()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[16]:</p><table><thead><tr><th></th><th>N_p</th><th>N_s</th><th>N_t</th><th>aca<em>p</em>11</th><th>aca<em>s</em>11</th><th>aca<em>t</em>11</th><th>aca<em>tot</em>11</th><th>bn</th><th>com<em>p</em>11</th><th>com<em>s</em>11</th><th>…</th><th>t<em>q8c</em>1</th><th>t<em>q8c</em>2</th><th>t<em>q8c</em>3</th><th>t<em>q8c</em>4</th><th>t_q9</th><th>t<em>q9</em>1</th><th>t<em>q9</em>2</th><th>t<em>q9</em>3</th><th>t<em>q9</em>4</th><th>t<em>q9</em>5</th></tr></thead><tbody><tr><td>0</td><td>90.0</td><td>NaN</td><td>22.0</td><td>7.8</td><td>NaN</td><td>7.9</td><td>7.9</td><td>M015</td><td>7.6</td><td>NaN</td><td>…</td><td>29.0</td><td>67.0</td><td>5.0</td><td>0.0</td><td>NaN</td><td>5.0</td><td>14.0</td><td>52.0</td><td>24.0</td><td>5.0</td></tr><tr><td>1</td><td>161.0</td><td>NaN</td><td>34.0</td><td>7.8</td><td>NaN</td><td>9.1</td><td>8.4</td><td>M019</td><td>7.6</td><td>NaN</td><td>…</td><td>74.0</td><td>21.0</td><td>6.0</td><td>0.0</td><td>NaN</td><td>3.0</td><td>6.0</td><td>3.0</td><td>78.0</td><td>9.0</td></tr><tr><td>2</td><td>367.0</td><td>NaN</td><td>42.0</td><td>8.6</td><td>NaN</td><td>7.5</td><td>8.0</td><td>M020</td><td>8.3</td><td>NaN</td><td>…</td><td>33.0</td><td>35.0</td><td>20.0</td><td>13.0</td><td>NaN</td><td>3.0</td><td>5.0</td><td>16.0</td><td>70.0</td><td>5.0</td></tr><tr><td>3</td><td>151.0</td><td>145.0</td><td>29.0</td><td>8.5</td><td>7.4</td><td>7.8</td><td>7.9</td><td>M034</td><td>8.2</td><td>5.9</td><td>…</td><td>21.0</td><td>45.0</td><td>28.0</td><td>7.0</td><td>NaN</td><td>0.0</td><td>18.0</td><td>32.0</td><td>39.0</td><td>11.0</td></tr><tr><td>4</td><td>90.0</td><td>NaN</td><td>23.0</td><td>7.9</td><td>NaN</td><td>8.1</td><td>8.0</td><td>M063</td><td>7.9</td><td>NaN</td><td>…</td><td>59.0</td><td>36.0</td><td>5.0</td><td>0.0</td><td>NaN</td><td>10.0</td><td>5.0</td><td>10.0</td><td>60.0</td><td>15.0</td></tr></tbody></table><p>5 rows × 2773 columns</p><p>我们可以通过查看数据文件夹中伴随问卷数据下载下来的文件来解决这个问题。它告诉我们们数据中重要的部分是哪些：</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/210107mcffn6xt88xfxxtu.png"></p><p>我们可以去除 <code>survey</code> 数据集中多余的列：</p><p>In [17]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">survey[&quot;DBN&quot;] = survey[&quot;dbn&quot;]</span><br><span class="line">survey_fields = [&quot;DBN&quot;, &quot;rr_s&quot;, &quot;rr_t&quot;, &quot;rr_p&quot;, &quot;N_s&quot;, &quot;N_t&quot;, &quot;N_p&quot;, &quot;saf_p_11&quot;, &quot;com_p_11&quot;, &quot;eng_p_11&quot;, &quot;aca_p_11&quot;, &quot;saf_t_11&quot;, &quot;com_t_11&quot;, &quot;eng_t_10&quot;, &quot;aca_t_11&quot;, &quot;saf_s_11&quot;, &quot;com_s_11&quot;, &quot;eng_s_11&quot;, &quot;aca_s_11&quot;, &quot;saf_tot_11&quot;, &quot;com_tot_11&quot;, &quot;eng_tot_11&quot;, &quot;aca_tot_11&quot;,]</span><br><span class="line">survey = survey.loc[:,survey_fields]</span><br><span class="line">data[&quot;survey&quot;] = survey</span><br><span class="line">survey.shape</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[17]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(1702, 23)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>请确保理你已经了解了每个数据集的内容和相关联的列，这能节约你之后大量的时间和精力：</p><h3 id="精简数据集"><a href="#精简数据集" class="headerlink" title="精简数据集"></a>精简数据集</h3><p>如果我们查看某些数据集，包括 <code>class_size</code>，我们将立刻发现问题：</p><p>In [18]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data[&quot;class_size&quot;].head()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[18]:</p><table><thead><tr><th></th><th>CSD</th><th>BOROUGH</th><th>SCHOOL CODE</th><th>SCHOOL NAME</th><th>GRADE</th><th>PROGRAM TYPE</th><th>CORE SUBJECT (MS CORE and 9-12 ONLY)</th><th>CORE COURSE (MS CORE and 9-12 ONLY)</th><th>SERVICE CATEGORY(K-9* ONLY)</th><th>NUMBER OF STUDENTS &#x2F; SEATS FILLED</th><th>NUMBER OF SECTIONS</th><th>AVERAGE CLASS SIZE</th><th>SIZE OF SMALLEST CLASS</th><th>SIZE OF LARGEST CLASS</th><th>DATA SOURCE</th><th>SCHOOLWIDE PUPIL-TEACHER RATIO</th><th>DBN</th></tr></thead><tbody><tr><td>0</td><td>1</td><td>M</td><td>M015</td><td>P.S. 015 Roberto Clemente</td><td>0K</td><td>GEN ED</td><td>-</td><td>-</td><td>-</td><td>19.0</td><td>1.0</td><td>19.0</td><td>19.0</td><td>19.0</td><td>ATS</td><td>NaN</td><td>01M015</td></tr><tr><td>1</td><td>1</td><td>M</td><td>M015</td><td>P.S. 015 Roberto Clemente</td><td>0K</td><td>CTT</td><td>-</td><td>-</td><td>-</td><td>21.0</td><td>1.0</td><td>21.0</td><td>21.0</td><td>21.0</td><td>ATS</td><td>NaN</td><td>01M015</td></tr><tr><td>2</td><td>1</td><td>M</td><td>M015</td><td>P.S. 015 Roberto Clemente</td><td>01</td><td>GEN ED</td><td>-</td><td>-</td><td>-</td><td>17.0</td><td>1.0</td><td>17.0</td><td>17.0</td><td>17.0</td><td>ATS</td><td>NaN</td><td>01M015</td></tr><tr><td>3</td><td>1</td><td>M</td><td>M015</td><td>P.S. 015 Roberto Clemente</td><td>01</td><td>CTT</td><td>-</td><td>-</td><td>-</td><td>17.0</td><td>1.0</td><td>17.0</td><td>17.0</td><td>17.0</td><td>ATS</td><td>NaN</td><td>01M015</td></tr><tr><td>4</td><td>1</td><td>M</td><td>M015</td><td>P.S. 015 Roberto Clemente</td><td>02</td><td>GEN ED</td><td>-</td><td>-</td><td>-</td><td>15.0</td><td>1.0</td><td>15.0</td><td>15.0</td><td>15.0</td><td>ATS</td><td>NaN</td><td>01M015</td></tr></tbody></table><p>每所高中都有许多行（正如你所见的重复的 <code>DBN</code> 和 <code>SCHOOL NAME</code>）。然而，如果我们看向 <code>sat_result</code> 数据集，每所高中只有一行：</p><p>In [21]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data[&quot;sat_results&quot;].head()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[21]:</p><table><thead><tr><th></th><th>DBN</th><th>SCHOOL NAME</th><th>Num of SAT Test Takers</th><th>SAT Critical Reading Avg. Score</th><th>SAT Math Avg. Score</th><th>SAT Writing Avg. Score</th></tr></thead><tbody><tr><td>0</td><td>01M292</td><td>HENRY STREET SCHOOL FOR INTERNATIONAL STUDIES</td><td>29</td><td>355</td><td>404</td><td>363</td></tr><tr><td>1</td><td>01M448</td><td>UNIVERSITY NEIGHBORHOOD HIGH SCHOOL</td><td>91</td><td>383</td><td>423</td><td>366</td></tr><tr><td>2</td><td>01M450</td><td>EAST SIDE COMMUNITY SCHOOL</td><td>70</td><td>377</td><td>402</td><td>370</td></tr><tr><td>3</td><td>01M458</td><td>FORSYTH SATELLITE ACADEMY</td><td>7</td><td>414</td><td>401</td><td>359</td></tr><tr><td>4</td><td>01M509</td><td>MARTA VALLE HIGH SCHOOL</td><td>44</td><td>390</td><td>433</td><td>384</td></tr></tbody></table><p>为了合并这些数据集，我们将需要找到方法将数据集精简到如 <code>class_size</code> 般一行对应一所高中。否则，我们将不能将 SAT 成绩与班级大小进行比较。我们通过首先更好的理解数据，然后做一些合并来完成。<code>class_size</code> 数据集像 <code>GRADE</code> 和 <code>PROGRAM TYPE</code>，每个学校有多个数据对应。为了将每个范围内的数据变为一个数据，我们将大部分重复行过滤掉，在下面的代码中我们将会：</p><ul><li>只从 <code>class_size</code> 中选择 <code>GRADE</code> 范围为 <code>09-12</code> 的行。</li><li>只从 <code>class_size</code> 中选择 <code>PROGRAM TYPE</code> 是 <code>GEN ED</code> 的行。</li><li>将 <code>class_size</code> 以 <code>DBN</code> 分组，然后取每列的平均值。重要的是，我们将找到每所学校班级大小（<code>class_size</code>）平均值。</li><li>重置索引，将 <code>DBN</code> 重新加到列中。</li></ul><p>In [68]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class_size = data[&quot;class_size&quot;]</span><br><span class="line">class_size = class_size[class_size[&quot;GRADE &quot;] == &quot;09-12&quot;]</span><br><span class="line">class_size = class_size[class_size[&quot;PROGRAM TYPE&quot;] == &quot;GEN ED&quot;]</span><br><span class="line">class_size = class_size.groupby(&quot;DBN&quot;).agg(np.mean)</span><br><span class="line">class_size.reset_index(inplace=True)</span><br><span class="line">data[&quot;class_size&quot;] = class_size</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="精简其它数据集"><a href="#精简其它数据集" class="headerlink" title="精简其它数据集"></a>精简其它数据集</h4><p>接下来，我们将需要精简 <code>demographic</code> 数据集。这里有每个学校收集多年的数据，所以这里每所学校有许多重复的行。我们将只选取 <code>schoolyear</code> 最近的可用行：</p><p>In [69]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">demographics = data[&quot;demographics&quot;]</span><br><span class="line">demographics = demographics[demographics[&quot;schoolyear&quot;] == 20112012]</span><br><span class="line">data[&quot;demographics&quot;] = demographics</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>我们需要精简 <code>math_test_results</code> 数据集。这个数据集被 <code>Grade</code> 和 <code>Year</code> 划分。我们将只选取单一学年的一个年级。</p><p>In [70]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data[&quot;math_test_results&quot;] = data[&quot;math_test_results&quot;][data[&quot;math_test_results&quot;][&quot;Year&quot;] == 2011]</span><br><span class="line">data[&quot;math_test_results&quot;] = data[&quot;math_test_results&quot;][data[&quot;math_test_results&quot;][&quot;Grade&quot;] == &#x27;8&#x27;]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最后，<code>graduation</code>需要被精简：</p><p>In [71]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data[&quot;graduation&quot;] = data[&quot;graduation&quot;][data[&quot;graduation&quot;][&quot;Cohort&quot;] == &quot;2006&quot;]</span><br><span class="line">data[&quot;graduation&quot;] = data[&quot;graduation&quot;][data[&quot;graduation&quot;][&quot;Demographic&quot;] == &quot;Total Cohort&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在完成工程的主要部分之前数据清理和挖掘是十分重要的。有一个高质量的，一致的数据集将会使你的分析更加快速。</p><h3 id="计算变量"><a href="#计算变量" class="headerlink" title="计算变量"></a>计算变量</h3><p>计算变量可以通过使我们的比较更加快速来加快分析速度，并且能使我们做到本无法做到的比较。我们能做的第一件事就是从分开的列 <code>SAT Math Avg. Score</code>，<code>SAT Critical Reading Avg. Score</code> 和 <code>SAT Writing Avg. Score</code> 计算 SAT 成绩：</p><ul><li>将 SAT 列数值从字符转化为数字。</li><li>将所有列相加以得到 <code>sat_score</code>，即 SAT 成绩。</li></ul><p>In [72]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cols = [&#x27;SAT Math Avg. Score&#x27;, &#x27;SAT Critical Reading Avg. Score&#x27;, &#x27;SAT Writing Avg. Score&#x27;]</span><br><span class="line">for c in cols:</span><br><span class="line">    data[&quot;sat_results&quot;][c] = data[&quot;sat_results&quot;][c].convert_objects(convert_numeric=True)</span><br><span class="line"></span><br><span class="line">data[&#x27;sat_results&#x27;][&#x27;sat_score&#x27;] = data[&#x27;sat_results&#x27;][cols[0]] + data[&#x27;sat_results&#x27;][cols[1]] + data[&#x27;sat_results&#x27;][cols[2]]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>接下来，我们将需要进行每所学校的坐标位置分析，以便我们制作地图。这将使我们画出每所学校的位置。在下面的代码中，我们将会：</p><ul><li>从 <code>Location 1</code> 列分析出经度和维度。</li><li>转化 <code>lat</code>（经度）和 <code>lon</code>（维度）为数字。</li></ul><p>In [73]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data[&quot;hs_directory&quot;][&#x27;lat&#x27;] = data[&quot;hs_directory&quot;][&#x27;Location 1&#x27;].apply(lambda x: x.split(&quot;\n&quot;)[-1].replace(&quot;(&quot;, &quot;&quot;).replace(&quot;)&quot;, &quot;&quot;).split(&quot;, &quot;)[0])</span><br><span class="line">data[&quot;hs_directory&quot;][&#x27;lon&#x27;] = data[&quot;hs_directory&quot;][&#x27;Location 1&#x27;].apply(lambda x: x.split(&quot;\n&quot;)[-1].replace(&quot;(&quot;, &quot;&quot;).replace(&quot;)&quot;, &quot;&quot;).split(&quot;, &quot;)[1])</span><br><span class="line"></span><br><span class="line">for c in [&#x27;lat&#x27;, &#x27;lon&#x27;]:</span><br><span class="line">    data[&quot;hs_directory&quot;][c] = data[&quot;hs_directory&quot;][c].convert_objects(convert_numeric=True)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>现在，我们将输出每个数据集来查看我们有了什么数据：</p><p>In [74]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for k,v in data.items():</span><br><span class="line">    print(k)</span><br><span class="line">    print(v.head())</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line">math_test_results</span><br><span class="line">        DBN Grade  Year      Category  Number Tested Mean Scale Score  \</span><br><span class="line">111  01M034     8  2011  All Students             48              646</span><br><span class="line">280  01M140     8  2011  All Students             61              665</span><br><span class="line">346  01M184     8  2011  All Students             49              727</span><br><span class="line">388  01M188     8  2011  All Students             49              658</span><br><span class="line">411  01M292     8  2011  All Students             49              650</span><br><span class="line"></span><br><span class="line">    Level 1 # Level 1 % Level 2 # Level 2 % Level 3 # Level 3 % Level 4 #  \</span><br><span class="line">111        15     31.3%        22     45.8%        11     22.9%         0</span><br><span class="line">280         1      1.6%        43     70.5%        17     27.9%         0</span><br><span class="line">346         0        0%         0        0%         5     10.2%        44</span><br><span class="line">388        10     20.4%        26     53.1%        10     20.4%         3</span><br><span class="line">411        15     30.6%        25       51%         7     14.3%         2</span><br><span class="line"></span><br><span class="line">    Level 4 % Level 3+4 # Level 3+4 %</span><br><span class="line">111        0%          11       22.9%</span><br><span class="line">280        0%          17       27.9%</span><br><span class="line">346     89.8%          49        100%</span><br><span class="line">388      6.1%          13       26.5%</span><br><span class="line">411      4.1%           9       18.4%</span><br><span class="line">survey</span><br><span class="line">      DBN  rr_s  rr_t  rr_p    N_s   N_t    N_p  saf_p_11  com_p_11  eng_p_11  \</span><br><span class="line">0  01M015   NaN    88    60    NaN  22.0   90.0       8.5       7.6       7.5</span><br><span class="line">1  01M019   NaN   100    60    NaN  34.0  161.0       8.4       7.6       7.6</span><br><span class="line">2  01M020   NaN    88    73    NaN  42.0  367.0       8.9       8.3       8.3</span><br><span class="line">3  01M034  89.0    73    50  145.0  29.0  151.0       8.8       8.2       8.0</span><br><span class="line">4  01M063   NaN   100    60    NaN  23.0   90.0       8.7       7.9       8.1</span><br><span class="line"></span><br><span class="line">      ...      eng_t_10  aca_t_11  saf_s_11  com_s_11  eng_s_11  aca_s_11  \</span><br><span class="line">0     ...           NaN       7.9       NaN       NaN       NaN       NaN</span><br><span class="line">1     ...           NaN       9.1       NaN       NaN       NaN       NaN</span><br><span class="line">2     ...           NaN       7.5       NaN       NaN       NaN       NaN</span><br><span class="line">3     ...           NaN       7.8       6.2       5.9       6.5       7.4</span><br><span class="line">4     ...           NaN       8.1       NaN       NaN       NaN       NaN</span><br><span class="line"></span><br><span class="line">   saf_tot_11  com_tot_11  eng_tot_11  aca_tot_11</span><br><span class="line">0         8.0         7.7         7.5         7.9</span><br><span class="line">1         8.5         8.1         8.2         8.4</span><br><span class="line">2         8.2         7.3         7.5         8.0</span><br><span class="line">3         7.3         6.7         7.1         7.9</span><br><span class="line">4         8.5         7.6         7.9         8.0</span><br><span class="line"></span><br><span class="line">[5 rows x 23 columns]</span><br><span class="line">ap_2010</span><br><span class="line">      DBN                             SchoolName AP Test Takers   \</span><br><span class="line">0  01M448           UNIVERSITY NEIGHBORHOOD H.S.              39</span><br><span class="line">1  01M450                 EAST SIDE COMMUNITY HS              19</span><br><span class="line">2  01M515                    LOWER EASTSIDE PREP              24</span><br><span class="line">3  01M539         NEW EXPLORATIONS SCI,TECH,MATH             255</span><br><span class="line">4  02M296  High School of Hospitality Management               s</span><br><span class="line"></span><br><span class="line">  Total Exams Taken Number of Exams with scores 3 4 or 5</span><br><span class="line">0                49                                   10</span><br><span class="line">1                21                                    s</span><br><span class="line">2                26                                   24</span><br><span class="line">3               377                                  191</span><br><span class="line">4                 s                                    s</span><br><span class="line">sat_results</span><br><span class="line">      DBN                                    SCHOOL NAME  \</span><br><span class="line">0  01M292  HENRY STREET SCHOOL FOR INTERNATIONAL STUDIES</span><br><span class="line">1  01M448            UNIVERSITY NEIGHBORHOOD HIGH SCHOOL</span><br><span class="line">2  01M450                     EAST SIDE COMMUNITY SCHOOL</span><br><span class="line">3  01M458                      FORSYTH SATELLITE ACADEMY</span><br><span class="line">4  01M509                        MARTA VALLE HIGH SCHOOL</span><br><span class="line"></span><br><span class="line">  Num of SAT Test Takers  SAT Critical Reading Avg. Score  \</span><br><span class="line">0                     29                            355.0</span><br><span class="line">1                     91                            383.0</span><br><span class="line">2                     70                            377.0</span><br><span class="line">3                      7                            414.0</span><br><span class="line">4                     44                            390.0</span><br><span class="line"></span><br><span class="line">   SAT Math Avg. Score  SAT Writing Avg. Score  sat_score</span><br><span class="line">0                404.0                   363.0     1122.0</span><br><span class="line">1                423.0                   366.0     1172.0</span><br><span class="line">2                402.0                   370.0     1149.0</span><br><span class="line">3                401.0                   359.0     1174.0</span><br><span class="line">4                433.0                   384.0     1207.0</span><br><span class="line">class_size</span><br><span class="line">      DBN  CSD  NUMBER OF STUDENTS / SEATS FILLED  NUMBER OF SECTIONS  \</span><br><span class="line">0  01M292    1                            88.0000            4.000000</span><br><span class="line">1  01M332    1                            46.0000            2.000000</span><br><span class="line">2  01M378    1                            33.0000            1.000000</span><br><span class="line">3  01M448    1                           105.6875            4.750000</span><br><span class="line">4  01M450    1                            57.6000            2.733333</span><br><span class="line"></span><br><span class="line">   AVERAGE CLASS SIZE  SIZE OF SMALLEST CLASS  SIZE OF LARGEST CLASS  \</span><br><span class="line">0           22.564286                   18.50              26.571429</span><br><span class="line">1           22.000000                   21.00              23.500000</span><br><span class="line">2           33.000000                   33.00              33.000000</span><br><span class="line">3           22.231250                   18.25              27.062500</span><br><span class="line">4           21.200000                   19.40              22.866667</span><br><span class="line"></span><br><span class="line">   SCHOOLWIDE PUPIL-TEACHER RATIO</span><br><span class="line">0                             NaN</span><br><span class="line">1                             NaN</span><br><span class="line">2                             NaN</span><br><span class="line">3                             NaN</span><br><span class="line">4                             NaN</span><br><span class="line">demographics</span><br><span class="line">       DBN                                              Name  schoolyear  \</span><br><span class="line">6   01M015  P.S. 015 ROBERTO CLEMENTE                           20112012</span><br><span class="line">13  01M019  P.S. 019 ASHER LEVY                                 20112012</span><br><span class="line">20  01M020  PS 020 ANNA SILVER                                  20112012</span><br><span class="line">27  01M034  PS 034 FRANKLIN D ROOSEVELT                         20112012</span><br><span class="line">35  01M063  PS 063 WILLIAM MCKINLEY                             20112012</span><br><span class="line"></span><br><span class="line">   fl_percent  frl_percent  total_enrollment prek    k grade1 grade2  \</span><br><span class="line">6         NaN         89.4               189   13   31     35     28</span><br><span class="line">13        NaN         61.5               328   32   46     52     54</span><br><span class="line">20        NaN         92.5               626   52  102    121     87</span><br><span class="line">27        NaN         99.7               401   14   34     38     36</span><br><span class="line">35        NaN         78.9               176   18   20     30     21</span><br><span class="line"></span><br><span class="line">      ...     black_num black_per hispanic_num hispanic_per white_num  \</span><br><span class="line">6     ...            63      33.3          109         57.7         4</span><br><span class="line">13    ...            81      24.7          158         48.2        28</span><br><span class="line">20    ...            55       8.8          357         57.0        16</span><br><span class="line">27    ...            90      22.4          275         68.6         8</span><br><span class="line">35    ...            41      23.3          110         62.5        15</span><br><span class="line"></span><br><span class="line">   white_per male_num male_per female_num female_per</span><br><span class="line">6        2.1     97.0     51.3       92.0       48.7</span><br><span class="line">13       8.5    147.0     44.8      181.0       55.2</span><br><span class="line">20       2.6    330.0     52.7      296.0       47.3</span><br><span class="line">27       2.0    204.0     50.9      197.0       49.1</span><br><span class="line">35       8.5     97.0     55.1       79.0       44.9</span><br><span class="line"></span><br><span class="line">[5 rows x 38 columns]</span><br><span class="line">graduation</span><br><span class="line">     Demographic     DBN                            School Name Cohort  \</span><br><span class="line">3   Total Cohort  01M292  HENRY STREET SCHOOL FOR INTERNATIONAL   2006</span><br><span class="line">10  Total Cohort  01M448    UNIVERSITY NEIGHBORHOOD HIGH SCHOOL   2006</span><br><span class="line">17  Total Cohort  01M450             EAST SIDE COMMUNITY SCHOOL   2006</span><br><span class="line">24  Total Cohort  01M509                MARTA VALLE HIGH SCHOOL   2006</span><br><span class="line">31  Total Cohort  01M515  LOWER EAST SIDE PREPARATORY HIGH SCHO   2006</span><br><span class="line"></span><br><span class="line">    Total Cohort Total Grads - n Total Grads - % of cohort Total Regents - n  \</span><br><span class="line">3             78              43                     55.1%                36</span><br><span class="line">10           124              53                     42.7%                42</span><br><span class="line">17            90              70                     77.8%                67</span><br><span class="line">24            84              47                       56%                40</span><br><span class="line">31           193             105                     54.4%                91</span><br><span class="line"></span><br><span class="line">   Total Regents - % of cohort Total Regents - % of grads  \</span><br><span class="line">3                        46.2%                      83.7%</span><br><span class="line">10                       33.9%                      79.2%</span><br><span class="line">17         74.400000000000006%                      95.7%</span><br><span class="line">24                       47.6%                      85.1%</span><br><span class="line">31                       47.2%                      86.7%</span><br><span class="line"></span><br><span class="line">              ...            Regents w/o Advanced - n  \</span><br><span class="line">3             ...                                  36</span><br><span class="line">10            ...                                  34</span><br><span class="line">17            ...                                  67</span><br><span class="line">24            ...                                  23</span><br><span class="line">31            ...                                  22</span><br><span class="line"></span><br><span class="line">   Regents w/o Advanced - % of cohort Regents w/o Advanced - % of grads  \</span><br><span class="line">3                               46.2%                             83.7%</span><br><span class="line">10                              27.4%                             64.2%</span><br><span class="line">17                74.400000000000006%                             95.7%</span><br><span class="line">24                              27.4%                             48.9%</span><br><span class="line">31                              11.4%                               21%</span><br><span class="line"></span><br><span class="line">   Local - n Local - % of cohort Local - % of grads Still Enrolled - n  \</span><br><span class="line">3          7                  9%              16.3%                 16</span><br><span class="line">10        11                8.9%              20.8%                 46</span><br><span class="line">17         3                3.3%               4.3%                 15</span><br><span class="line">24         7  8.300000000000001%              14.9%                 25</span><br><span class="line">31        14                7.3%              13.3%                 53</span><br><span class="line"></span><br><span class="line">   Still Enrolled - % of cohort Dropped Out - n Dropped Out - % of cohort</span><br><span class="line">3                         20.5%              11                     14.1%</span><br><span class="line">10                        37.1%              20       16.100000000000001%</span><br><span class="line">17                        16.7%               5                      5.6%</span><br><span class="line">24                        29.8%               5                        6%</span><br><span class="line">31                        27.5%              35       18.100000000000001%</span><br><span class="line"></span><br><span class="line">[5 rows x 23 columns]</span><br><span class="line">hs_directory</span><br><span class="line">      dbn                                        school_name       boro  \</span><br><span class="line">0  17K548                Brooklyn School for Music &amp; Theatre   Brooklyn</span><br><span class="line">1  09X543                   High School for Violin and Dance      Bronx</span><br><span class="line">2  09X327        Comprehensive Model School Project M.S. 327      Bronx</span><br><span class="line">3  02M280     Manhattan Early College School for Advertising  Manhattan</span><br><span class="line">4  28Q680  Queens Gateway to Health Sciences Secondary Sc...     Queens</span><br><span class="line"></span><br><span class="line">  building_code    phone_number    fax_number grade_span_min  grade_span_max  \</span><br><span class="line">0          K440    718-230-6250  718-230-6262              9              12</span><br><span class="line">1          X400    718-842-0687  718-589-9849              9              12</span><br><span class="line">2          X240    718-294-8111  718-294-8109              6              12</span><br><span class="line">3          M520  718-935-3477             NaN              9              10</span><br><span class="line">4          Q695    718-969-3155  718-969-3552              6              12</span><br><span class="line"></span><br><span class="line">  expgrade_span_min  expgrade_span_max    ...      \</span><br><span class="line">0               NaN                NaN    ...</span><br><span class="line">1               NaN                NaN    ...</span><br><span class="line">2               NaN                NaN    ...</span><br><span class="line">3                 9               14.0    ...</span><br><span class="line">4               NaN                NaN    ...</span><br><span class="line"></span><br><span class="line">                        priority05 priority06 priority07 priority08  \</span><br><span class="line">0                              NaN        NaN        NaN        NaN</span><br><span class="line">1                              NaN        NaN        NaN        NaN</span><br><span class="line">2  Then to New York City residents        NaN        NaN        NaN</span><br><span class="line">3                              NaN        NaN        NaN        NaN</span><br><span class="line">4                              NaN        NaN        NaN        NaN</span><br><span class="line"></span><br><span class="line">  priority09  priority10                                         Location 1  \</span><br><span class="line">0        NaN         NaN  883 Classon Avenue\nBrooklyn, NY 11225\n(40.67...</span><br><span class="line">1        NaN         NaN  1110 Boston Road\nBronx, NY 10456\n(40.8276026...</span><br><span class="line">2        NaN         NaN  1501 Jerome Avenue\nBronx, NY 10452\n(40.84241...</span><br><span class="line">3        NaN         NaN  411 Pearl Street\nNew York, NY 10038\n(40.7106...</span><br><span class="line">4        NaN         NaN  160-20 Goethals Avenue\nJamaica, NY 11432\n(40...</span><br><span class="line"></span><br><span class="line">      DBN        lat        lon</span><br><span class="line">0  17K548  40.670299 -73.961648</span><br><span class="line">1  09X543  40.827603 -73.904475</span><br><span class="line">2  09X327  40.842414 -73.916162</span><br><span class="line">3  02M280  40.710679 -74.000807</span><br><span class="line">4  28Q680  40.718810 -73.806500</span><br><span class="line"></span><br><span class="line">[5 rows x 61 columns]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="合并数据集"><a href="#合并数据集" class="headerlink" title="合并数据集"></a>合并数据集</h3><p>现在我们已经完成了全部准备工作，我们可以用 <code>DBN</code> 列将数据组合在一起了。最终，我们将会从原始数据集得到一个有着上百列的数据集。当我们合并它们，请注意有些数据集中会丢失了 <code>sat_result</code> 中出现的高中。为了解决这个问题，我们需要使用 <code>outer</code> 方法来合并缺少行的数据集，这样我们就不会丢失数据。在实际分析中，缺少数据是很常见的。能够展示解释和解决数据缺失的能力是构建一个作品集的重要部分。</p><p>你可以在<a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/merging.html">此</a>阅读关于不同类型的合并。</p><p>接下来的代码，我们将会：</p><ul><li>循环遍历 <code>data</code> 文件夹中的每一个条目。</li><li>输出条目中的非唯一的 DBN 码数量。</li><li>决定合并策略 - <code>inner</code> 或 <code>outer</code>。</li><li>使用 <code>DBN</code> 列将条目合并到 DataFrame <code>full</code> 中。</li></ul><p>In [75]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">flat_data_names = [k for k,v in data.items()]</span><br><span class="line">flat_data = [data[k] for k in flat_data_names]</span><br><span class="line">full = flat_data[0]</span><br><span class="line">for i, f in enumerate(flat_data[1:]):</span><br><span class="line">    name = flat_data_names[i+1]</span><br><span class="line">    print(name)</span><br><span class="line">    print(len(f[&quot;DBN&quot;]) - len(f[&quot;DBN&quot;].unique()))</span><br><span class="line">    join_type = &quot;inner&quot;</span><br><span class="line">    if name in [&quot;sat_results&quot;, &quot;ap_2010&quot;, &quot;graduation&quot;]:</span><br><span class="line">        join_type = &quot;outer&quot;</span><br><span class="line">    if name not in [&quot;math_test_results&quot;]:</span><br><span class="line">        full = full.merge(f, on=&quot;DBN&quot;, how=join_type)</span><br><span class="line"></span><br><span class="line">full.shape</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">survey</span><br><span class="line">0</span><br><span class="line">ap_2010</span><br><span class="line">1</span><br><span class="line">sat_results</span><br><span class="line">0</span><br><span class="line">class_size</span><br><span class="line">0</span><br><span class="line">demographics</span><br><span class="line">0</span><br><span class="line">graduation</span><br><span class="line">0</span><br><span class="line">hs_directory</span><br><span class="line">0</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[75]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(374, 174)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="添加值"><a href="#添加值" class="headerlink" title="添加值"></a>添加值</h3><p>现在我们有了我们的 <code>full</code> 数据框架，我们几乎拥有分析需要的所有数据。虽然这里有一些缺少的部分。我们可能将<a target="_blank" rel="noopener" href="https://apstudent.collegeboard.org/home">AP</a> 考试结果与 SAT 成绩相关联，但是我们首先需要将这些列转化为数字，然后填充缺失的数据。</p><p>In [76]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cols = [&#x27;AP Test Takers &#x27;, &#x27;Total Exams Taken&#x27;, &#x27;Number of Exams with scores 3 4 or 5&#x27;]</span><br><span class="line"></span><br><span class="line">for col in cols:</span><br><span class="line">    full[col] = full[col].convert_objects(convert_numeric=True)</span><br><span class="line"></span><br><span class="line">full[cols] = full[cols].fillna(value=0)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后我们将需要计算表示学校所在学区的 <code>school_dist</code>列。这将是我们匹配学区并且使用我们之前下载的区域地图画出地区级别的地图。</p><p>In [77]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full[&quot;school_dist&quot;] = full[&quot;DBN&quot;].apply(lambda x: x[:2])</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最终，我们将需要用该列的平均值填充缺失的数据到 <code>full</code> 中。那么我们就可以计算关联了：</p><p>In [79]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full = full.fillna(full.mean())</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="计算关联"><a href="#计算关联" class="headerlink" title="计算关联"></a>计算关联</h3><p>一个挖掘数据并查看哪些列与你所关心的问题有联系的好方法来就是计算关联。这将告诉你哪列与你所关心的列更加有关联。你可以通过 Pandas DataFrames 的 <a target="_blank" rel="noopener" href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.corr.html">corr</a> 方法来完成。越接近 0 则关联越小。越接近 1 则正相关越强，越接近 -1 则负关联越强：</p><p>In [80]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full.corr()[&#x27;sat_score&#x27;]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[80]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">Year                                             NaN</span><br><span class="line">Number Tested                           8.127817e-02</span><br><span class="line">rr_s                                    8.484298e-02</span><br><span class="line">rr_t                                   -6.604290e-02</span><br><span class="line">rr_p                                    3.432778e-02</span><br><span class="line">N_s                                     1.399443e-01</span><br><span class="line">N_t                                     9.654314e-03</span><br><span class="line">N_p                                     1.397405e-01</span><br><span class="line">saf_p_11                                1.050653e-01</span><br><span class="line">com_p_11                                2.107343e-02</span><br><span class="line">eng_p_11                                5.094925e-02</span><br><span class="line">aca_p_11                                5.822715e-02</span><br><span class="line">saf_t_11                                1.206710e-01</span><br><span class="line">com_t_11                                3.875666e-02</span><br><span class="line">eng_t_10                                         NaN</span><br><span class="line">aca_t_11                                5.250357e-02</span><br><span class="line">saf_s_11                                1.054050e-01</span><br><span class="line">com_s_11                                4.576521e-02</span><br><span class="line">eng_s_11                                6.303699e-02</span><br><span class="line">aca_s_11                                8.015700e-02</span><br><span class="line">saf_tot_11                              1.266955e-01</span><br><span class="line">com_tot_11                              4.340710e-02</span><br><span class="line">eng_tot_11                              5.028588e-02</span><br><span class="line">aca_tot_11                              7.229584e-02</span><br><span class="line">AP Test Takers                          5.687940e-01</span><br><span class="line">Total Exams Taken                       5.585421e-01</span><br><span class="line">Number of Exams with scores 3 4 or 5    5.619043e-01</span><br><span class="line">SAT Critical Reading Avg. Score         9.868201e-01</span><br><span class="line">SAT Math Avg. Score                     9.726430e-01</span><br><span class="line">SAT Writing Avg. Score                  9.877708e-01</span><br><span class="line">                                            ...</span><br><span class="line">SIZE OF SMALLEST CLASS                  2.440690e-01</span><br><span class="line">SIZE OF LARGEST CLASS                   3.052551e-01</span><br><span class="line">SCHOOLWIDE PUPIL-TEACHER RATIO                   NaN</span><br><span class="line">schoolyear                                       NaN</span><br><span class="line">frl_percent                            -7.018217e-01</span><br><span class="line">total_enrollment                        3.668201e-01</span><br><span class="line">ell_num                                -1.535745e-01</span><br><span class="line">ell_percent                            -3.981643e-01</span><br><span class="line">sped_num                                3.486852e-02</span><br><span class="line">sped_percent                           -4.413665e-01</span><br><span class="line">asian_num                               4.748801e-01</span><br><span class="line">asian_per                               5.686267e-01</span><br><span class="line">black_num                               2.788331e-02</span><br><span class="line">black_per                              -2.827907e-01</span><br><span class="line">hispanic_num                            2.568811e-02</span><br><span class="line">hispanic_per                           -3.926373e-01</span><br><span class="line">white_num                               4.490835e-01</span><br><span class="line">white_per                               6.100860e-01</span><br><span class="line">male_num                                3.245320e-01</span><br><span class="line">male_per                               -1.101484e-01</span><br><span class="line">female_num                              3.876979e-01</span><br><span class="line">female_per                              1.101928e-01</span><br><span class="line">Total Cohort                            3.244785e-01</span><br><span class="line">grade_span_max                         -2.495359e-17</span><br><span class="line">expgrade_span_max                                NaN</span><br><span class="line">zip                                    -6.312962e-02</span><br><span class="line">total_students                          4.066081e-01</span><br><span class="line">number_programs                         1.166234e-01</span><br><span class="line">lat                                    -1.198662e-01</span><br><span class="line">lon                                    -1.315241e-01</span><br><span class="line">Name: sat_score, dtype: float64</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这给了我们一些我们需要探索的内在规律：</p><ul><li><code>total_enrollment</code> 与 <code>sat_score</code> 强相关，这是令人惊讶的，因为你曾经认为越小的学校越专注于学生就会取得更高的成绩。</li><li>女生所占学校的比例（<code>female_per</code>） 与 SAT 成绩呈正相关，而男生所占学生比例（<code>male_per</code>）成负相关。</li><li>没有问卷与 SAT 成绩成正相关。</li><li>SAT 成绩有明显的种族不平等（<code>white_per</code>、<code>asian_per</code>、<code>black_per</code>、<code>hispanic_per</code>）。</li><li><code>ell_percent</code> 与 SAT 成绩明显负相关。</li></ul><p>每一个条目都是一个挖掘和讲述数据故事的潜在角度。</p><h3 id="设置上下文"><a href="#设置上下文" class="headerlink" title="设置上下文"></a>设置上下文</h3><p>在我们开始数据挖掘之前，我们将希望设置上下文，不仅为了我们自己，也是为了其它阅读我们分析的人。一个好的方法就是建立挖掘图表或者地图。因此，我们将在地图标出所有学校的位置，这将有助于读者理解我们所探索的问题。</p><p>在下面的代码中，我们将会：</p><ul><li>建立纽约市为中心的地图。</li><li>为城市里的每所高中添加一个标记。</li><li>显示地图。</li></ul><p>In [82]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import folium</span><br><span class="line">from folium import plugins</span><br><span class="line"></span><br><span class="line">schools_map = folium.Map(location=[full[&#x27;lat&#x27;].mean(), full[&#x27;lon&#x27;].mean()], zoom_start=10)</span><br><span class="line">marker_cluster = folium.MarkerCluster().add_to(schools_map)</span><br><span class="line">for name, row in full.iterrows():</span><br><span class="line">    folium.Marker([row[&quot;lat&quot;], row[&quot;lon&quot;]], popup=&quot;&#123;0&#125;: &#123;1&#125;&quot;.format(row[&quot;DBN&quot;], row[&quot;school_name&quot;])).add_to(marker_cluster)</span><br><span class="line">schools_map.create_map(&#x27;schools.html&#x27;)</span><br><span class="line">schools_map</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[82]:</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/210109yzwnyr56y9wn18nb.png"></p><p>这个地图十分有用，但是不容易查看纽约哪里学校最多。因此，我们将用热力图来代替它：</p><p>In [84]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">schools_heatmap = folium.Map(location=[full[&#x27;lat&#x27;].mean(), full[&#x27;lon&#x27;].mean()], zoom_start=10)</span><br><span class="line">schools_heatmap.add_children(plugins.HeatMap([[row[&quot;lat&quot;], row[&quot;lon&quot;]] for name, row in full.iterrows()]))</span><br><span class="line">schools_heatmap.save(&quot;heatmap.html&quot;)</span><br><span class="line">schools_heatmap</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[84]:</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/210112ujzoji0x0qtthqmb.png"></p><h3 id="区域级别映射"><a href="#区域级别映射" class="headerlink" title="区域级别映射"></a>区域级别映射</h3><p>热力图能够很好的标出梯度，但是我们将需要更结构化的画出不同城市之间的 SAT 分数差距。学区是一个图形化这个信息的很好的方式，就像每个区域都有自己的管理者。纽约市有数十个学区，并且每个区域都是一个小的地理区域。</p><p>我们可以通过学区来计算 SAT 分数，然后将它们画在地图上。在下面的代码中，我们将会：</p><ul><li>通过学区对 <code>full</code> 进行分组。</li><li>计算每个学区的每列的平均值。</li><li>去掉 <code>school_dist</code> 字段头部的 0，然后我们就可以匹配地理数据了。</li></ul><p>In [ ]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">district_data = full.groupby(&quot;school_dist&quot;).agg(np.mean)</span><br><span class="line">district_data.reset_index(inplace=True)</span><br><span class="line">district_data[&quot;school_dist&quot;] = district_data[&quot;school_dist&quot;].apply(lambda x: str(int(x)))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>我们现在将可以画出 SAT 在每个学区的平均值了。因此，我们将会读取 <a target="_blank" rel="noopener" href="http://geojson.org/">GeoJSON</a> 中的数据，转化为每个区域的形状，然后通过 <code>school_dist</code> 列对每个区域图形和 SAT 成绩进行匹配。最终我们将创建一个图形：</p><p>In [85]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">def show_district_map(col):</span><br><span class="line">    geo_path = &#x27;schools/districts.geojson&#x27;</span><br><span class="line">    districts = folium.Map(location=[full[&#x27;lat&#x27;].mean(), full[&#x27;lon&#x27;].mean()], zoom_start=10)</span><br><span class="line">    districts.geo_json(</span><br><span class="line">        geo_path=geo_path,</span><br><span class="line">        data=district_data,</span><br><span class="line">        columns=[&#x27;school_dist&#x27;, col],</span><br><span class="line">        key_on=&#x27;feature.properties.school_dist&#x27;,</span><br><span class="line">        fill_color=&#x27;YlGn&#x27;,</span><br><span class="line">        fill_opacity=0.7,</span><br><span class="line">        line_opacity=0.2,</span><br><span class="line">    )</span><br><span class="line">    districts.save(&quot;districts.html&quot;)</span><br><span class="line">    return districts</span><br><span class="line"></span><br><span class="line">show_district_map(&quot;sat_score&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[85]:</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/210114q8h887kp6h1a0f0d.png"></p><h3 id="挖掘注册学生数与SAT分数"><a href="#挖掘注册学生数与SAT分数" class="headerlink" title="挖掘注册学生数与SAT分数"></a>挖掘注册学生数与SAT分数</h3><p>现在我们已经依地区画出学校位置和 SAT 成绩确定了上下文，浏览我们分析的人将会对数据的上下文有更好的理解。现在我们已经完成了基础工作，我们可以开始从我们上面寻找关联时所提到的角度分析了。第一个分析角度是学校注册学生人数与 SAT 成绩。</p><p>我们可以通过所有学校的注册学生与 SAT 成绩的散点图来分析。</p><p>In [87]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line">full.plot.scatter(x=&#x27;total_enrollment&#x27;, y=&#x27;sat_score&#x27;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[87]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.axes._subplots.AxesSubplot at 0x10fe79978&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/205221xdmq42xybbyxxcjg.jpg"></p><p>如你所见，底下角注册人数较低的部分有个较低 SAT 成绩的聚集。这个集群以外，SAT 成绩与全部注册人数只有轻微正相关。这个画出的关联显示了意想不到的图形.</p><p>我们可以通过获取低注册人数且低SAT成绩的学校的名字进行进一步的分析。</p><p>In [88]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full[(full[&quot;total_enrollment&quot;] &lt; 1000) &amp; (full[&quot;sat_score&quot;] &lt; 1000)][&quot;School Name&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[88]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">34     INTERNATIONAL SCHOOL FOR LIBERAL ARTS</span><br><span class="line">143                                      NaN</span><br><span class="line">148    KINGSBRIDGE INTERNATIONAL HIGH SCHOOL</span><br><span class="line">203                MULTICULTURAL HIGH SCHOOL</span><br><span class="line">294      INTERNATIONAL COMMUNITY HIGH SCHOOL</span><br><span class="line">304          BRONX INTERNATIONAL HIGH SCHOOL</span><br><span class="line">314                                      NaN</span><br><span class="line">317            HIGH SCHOOL OF WORLD CULTURES</span><br><span class="line">320       BROOKLYN INTERNATIONAL HIGH SCHOOL</span><br><span class="line">329    INTERNATIONAL HIGH SCHOOL AT PROSPECT</span><br><span class="line">331               IT TAKES A VILLAGE ACADEMY</span><br><span class="line">351    PAN AMERICAN INTERNATIONAL HIGH SCHOO</span><br><span class="line">Name: School Name, dtype: object</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在 Google 上进行了一些搜索确定了这些学校大多数是为了正在学习英语而开设的，所以有这么低注册人数（规模）。这个挖掘向我们展示了并不是所有的注册人数都与 SAT 成绩有关联 - 而是与是否将英语作为第二语言学习的学生有关。</p><h3 id="挖掘英语学习者和-SAT-成绩"><a href="#挖掘英语学习者和-SAT-成绩" class="headerlink" title="挖掘英语学习者和 SAT 成绩"></a>挖掘英语学习者和 SAT 成绩</h3><p>现在我们知道英语学习者所占学校学生比例与低的 SAT 成绩有关联，我们可以探索其中的规律。<code>ell_percent</code> 列表示一个学校英语学习者所占的比例。我们可以制作关于这个关联的散点图。</p><p>In [89]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full.plot.scatter(x=&#x27;ell_percent&#x27;, y=&#x27;sat_score&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[89]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.axes._subplots.AxesSubplot at 0x10fe824e0&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/205251usn0lysp8lnnt8ml.jpg"></p><p>看起来这里有一组学校有着高的 <code>ell_percentage</code> 值并且有着低的 SAT 成绩。我们可以在学区层面调查这个关系，通过找出每个学区英语学习者所占的比例，并且查看是否与我们的学区层面的 SAT 地图所匹配：</p><p>In [90]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show_district_map(&quot;ell_percent&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[90]:</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/210116ggxdlddgh88dhcll.png"></p><p>我们可通过两个区域层面地图来查看，一个低 ELL（English-language）学习者比例的地区更倾向有高 SAT 成绩，反之亦然。</p><h3 id="关联问卷分数和-SAT-分数"><a href="#关联问卷分数和-SAT-分数" class="headerlink" title="关联问卷分数和 SAT 分数"></a>关联问卷分数和 SAT 分数</h3><p>学生、家长和老师的问卷结果如果与 SAT 分数有很大的关联的假设是合理的。就例如具有高学术期望的学校倾向于有着更高的 SAT 分数是合理的。为了测这个理论，让我们画出 SAT 分数和多种问卷指标：</p><p>In [91]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full.corr()[&quot;sat_score&quot;][[&quot;rr_s&quot;, &quot;rr_t&quot;, &quot;rr_p&quot;, &quot;N_s&quot;, &quot;N_t&quot;, &quot;N_p&quot;, &quot;saf_tot_11&quot;, &quot;com_tot_11&quot;, &quot;aca_tot_11&quot;, &quot;eng_tot_11&quot;]].plot.bar()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[91]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.axes._subplots.AxesSubplot at 0x114652400&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/205319o3o3ofl6xknayyyj.jpg"></p><p>惊人的是，关联最大的两个因子是 <code>N_p</code> 和 <code>N_s</code>，它们分别是家长和学生回应的问卷。都与注册人数有着强关联，所以很可能偏离了 <code>ell_learner</code>。此外指标关联最强的就是 <code>saf_t_11</code>，这是学生、家长和老师对学校安全程度的感知。这说明了，越安全的学校，更能让学生在环境里安心学习。然而其它因子，像互动、交流和学术水平都与 SAT 分数无关，这也许表明了纽约在问卷中问了不理想的问题或者想错了因子（如果他们的目的是提高 SAT 分数的话）。</p><h3 id="挖掘种族和-SAT-分数"><a href="#挖掘种族和-SAT-分数" class="headerlink" title="挖掘种族和 SAT 分数"></a>挖掘种族和 SAT 分数</h3><p>其中一个角度就是调查种族和 SAT 分数的联系。这是一个大相关微分，将其画出来帮助我们理解到底发生了什么：</p><p>In [92]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full.corr()[&quot;sat_score&quot;][[&quot;white_per&quot;, &quot;asian_per&quot;, &quot;black_per&quot;, &quot;hispanic_per&quot;]].plot.bar()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[92]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.axes._subplots.AxesSubplot at 0x108166ba8&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/205344iiah3s2gyh0n4i8i.jpg"></p><p>看起来更高比例的白种和亚洲学生与更高的 SAT 分数有关联，而更高比例的黑人和西班牙裔与更低的 SAT 分数有关联。对于西班牙学生，这可能因为近年的移民还是英语学习者的事实。我们可以标出学区层面的西班牙裔的比例并观察联系。</p><p>In [93]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">show_district_map(&quot;hispanic_per&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[93]:</p><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/210118co5xdtccihtcoid6.png"></p><p>看起来这里与英语学习者比例有关联，但是有必要对这种和其它种族在 SAT 分数上的差异进行挖掘。</p><h3 id="SAT-分数上的性别差异"><a href="#SAT-分数上的性别差异" class="headerlink" title="SAT 分数上的性别差异"></a>SAT 分数上的性别差异</h3><p>挖掘性别与 SAT 分数之间的关系是最后一个角度。我们注意更高的女生比例的学校倾向于与更高的 SAT 分数有关联。我们可以可视化为一个条形图：</p><p>In [94]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full.corr()[&quot;sat_score&quot;][[&quot;male_per&quot;, &quot;female_per&quot;]].plot.bar()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[94]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.axes._subplots.AxesSubplot at 0x10774d0f0&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/205412svzwa7rt17w9a1v7.jpg"></p><p>为了挖掘更多的关联性，我们可以制作一个 <code>female_per</code> 和 <code>sat_score</code> 的散点图：</p><p>In [95]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full.plot.scatter(x=&#x27;female_per&#x27;, y=&#x27;sat_score&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[95]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.axes._subplots.AxesSubplot at 0x104715160&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/205435dvevmflfnmf2dn1d.jpg"></p><p>看起来这里有一个高女生比例、高 SAT 成绩的簇（右上角）（LCTT 译注：此处散点图并未有如此迹象，可能数据图有误）。我们可以获取簇中学校的名字：</p><p>In [96]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full[(full[&quot;female_per&quot;] &gt; 65) &amp; (full[&quot;sat_score&quot;] &gt; 1400)][&quot;School Name&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[96]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">3             PROFESSIONAL PERFORMING ARTS HIGH SCH</span><br><span class="line">92                    ELEANOR ROOSEVELT HIGH SCHOOL</span><br><span class="line">100                    TALENT UNLIMITED HIGH SCHOOL</span><br><span class="line">111            FIORELLO H. LAGUARDIA HIGH SCHOOL OF</span><br><span class="line">229                     TOWNSEND HARRIS HIGH SCHOOL</span><br><span class="line">250    FRANK SINATRA SCHOOL OF THE ARTS HIGH SCHOOL</span><br><span class="line">265                  BARD HIGH SCHOOL EARLY COLLEGE</span><br><span class="line">Name: School Name, dtype: object</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使用 Google 进行搜索可以知道这些是专注于表演艺术的精英学校。这些学校有着更高比例的女生和更高的 SAT 分数。这可能解释了更高的女生比例和 SAT 分数的关联，并且相反的更高的男生比例与更低的 SAT 分数。</p><h3 id="AP-成绩"><a href="#AP-成绩" class="headerlink" title="AP 成绩"></a>AP 成绩</h3><p>至今，我们关注的是人口统计角度。还有一个角度是我们通过数据来看参加高阶测试（AP）的学生和 SAT 分数。因为高学术成绩获得者倾向于有着高的 SAT 分数说明了它们是有关联的。</p><p>In [98]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">full[&quot;ap_avg&quot;] = full[&quot;AP Test Takers &quot;] / full[&quot;total_enrollment&quot;]</span><br><span class="line"></span><br><span class="line">full.plot.scatter(x=&#x27;ap_avg&#x27;, y=&#x27;sat_score&#x27;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[98]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.axes._subplots.AxesSubplot at 0x11463a908&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201710/22/205510gvev33irla3efirf.jpg"></p><p>看起来它们之间确实有着很强的关联。有趣的是右上角高 SAT 分数的学校有着高的 AP 测试通过比例：</p><p>In [99]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">full[(full[&quot;ap_avg&quot;] &gt; .3) &amp; (full[&quot;sat_score&quot;] &gt; 1700)][&quot;School Name&quot;]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Out[99]:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">92             ELEANOR ROOSEVELT HIGH SCHOOL</span><br><span class="line">98                    STUYVESANT HIGH SCHOOL</span><br><span class="line">157             BRONX HIGH SCHOOL OF SCIENCE</span><br><span class="line">161    HIGH SCHOOL OF AMERICAN STUDIES AT LE</span><br><span class="line">176           BROOKLYN TECHNICAL HIGH SCHOOL</span><br><span class="line">229              TOWNSEND HARRIS HIGH SCHOOL</span><br><span class="line">243    QUEENS HIGH SCHOOL FOR THE SCIENCES A</span><br><span class="line">260      STATEN ISLAND TECHNICAL HIGH SCHOOL</span><br><span class="line">Name: School Name, dtype: object</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>通过 google 搜索解释了那些大多是高选择性的学校，你需要经过测试才能进入。这就说明了为什么这些学校会有高的 AP 通过人数。</p><h3 id="包装故事"><a href="#包装故事" class="headerlink" title="包装故事"></a>包装故事</h3><p>在数据科学中，故事不可能真正完结。通过向其他人发布分析，你可以让他们拓展并且运用你的分析到他们所感兴趣的方向。比如在本文中，这里有一些角度我们没有完成，并且可以探索更加深入。</p><p>一个开始讲述故事的最好方式就是尝试拓展或者复制别人已经完成的分析。如果你觉得采取这个方式，欢迎你拓展这篇文章的分析，并看看你能发现什么。如果你确实这么做了，请在下面评论，那么我就可以看到了。</p><h3 id="下一步"><a href="#下一步" class="headerlink" title="下一步"></a>下一步</h3><p>如果你做的足够多，你看起来已经对用数据讲故事和构建你的第一个数据科学作品集有了很好的理解。一旦你完成了你的数据科学工程，发表在 <a target="_blank" rel="noopener" href="https://github.com/">Github</a> 上是一个好的想法，这样别人就能够与你一起合作。</p><p>如果你喜欢这篇文章，你可能希望阅读我们‘Build a Data Science Portfolio’系列文章的其它部分：</p><ul><li><a target="_blank" rel="noopener" href="https://www.dataquest.io/blog/how-to-setup-a-data-science-blog/">如何搭建一个数据科学博客</a></li><li><a href="/article-7907-1.html">建立一个机器学习工程</a></li><li><a target="_blank" rel="noopener" href="https://www.dataquest.io/blog/build-a-data-science-portfolio/">构建一个将帮助你找到工作的数据科学作品集的关键</a></li><li><a target="_blank" rel="noopener" href="https://www.dataquest.io/blog/free-datasets-for-projects">17 个你能找到其它数据科学工程数据集的地方</a></li><li><a target="_blank" rel="noopener" href="https://www.dataquest.io/blog/how-to-share-data-science-portfolio/">怎样在 GitHub 上展示你的数据科学作品集</a></li></ul><hr><p>via: <a target="_blank" rel="noopener" href="https://www.dataquest.io/blog/data-science-portfolio-project/">https://www.dataquest.io/blog/data-science-portfolio-project/</a></p><p>作者：<a target="_blank" rel="noopener" href="http://twitter.com/vikparuchuri">Vik Paruchuri</a> 译者：[Yoo-4x] 校对：<a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p><p>本文由 <a target="_blank" rel="noopener" href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a target="_blank" rel="noopener" href="https://linux.cn/">Linux中国</a> 荣誉推出</p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p><script defer src="https://pv.undefined.today/tracker.min.js" data-website-id="LinuxCNMirror-tracker"></script></div></div></body></html>