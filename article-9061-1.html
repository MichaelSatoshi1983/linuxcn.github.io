<!doctype html><html lang="en"><head><meta name="description" content="一个LinuxCN的镜像站"><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>Linux 中管理 EXT2、 EXT3 和 EXT4 健康状况的 4 个工具 - 归墟星火集 又一个 LinuxCN 站点</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 又一个 LinuxCN 站点 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">Linux 中管理 EXT2、 EXT3 和 EXT4 健康状况的 4 个工具</h1><span class="post-date">2017-11-16</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/">文件系统</a> <a href="/tags/fsck/">fsck</a> <a href="/tags/ext/">ext</a></div><div class="post-content"><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/201711/16/164437f1c3321d0kg3oil0.jpg"></p><p>文件系统是一个在计算机上帮你去管理数据怎么去存储和检索的数据结构。文件系统也可以被视作是磁盘上的物理（或扩展）分区。如果它没有很好地被维护或定期监视，它可能在长期运行中出现各种各样的错误或损坏。</p><p>这里有几个可能导致文件系统出问题的因素：系统崩溃、硬件或软件故障、 有问题的驱动和程序、不正确的优化、大量的数据过载加上一些小故障。</p><p>这其中的任何一个问题都可以导致 Linux 不能顺利地挂载（或卸载）一个文件系统，从而导致系统故障。</p><p>扩展阅读：<a href="/article-8289-1.html">Linux 中判断文件系统类型（Ext2, Ext3 或 Ext4）的 7 种方法</a></p><p>另外，受损的文件系统运行在你的系统上可能导致操作系统中的组件或用户应用程序的运行时错误，它可能会进一步扩大到服务器数据的丢失。为避免文件系统错误或损坏，你需要去持续关注它的健康状况。</p><p>在这篇文章中，我们将介绍监视或维护一个 ext2、ext3 和 ext4 文件系统健康状况的工具。在这里描述的所有工具都需要 root 用户权限，因此，需要使用 <a href="/article-8278-1.html">sudo 命令</a>去运行它们。</p><h3 id="怎么去查看-EXT2-EXT3-EXT4-文件系统信息"><a href="#怎么去查看-EXT2-EXT3-EXT4-文件系统信息" class="headerlink" title="怎么去查看 EXT2&#x2F;EXT3&#x2F;EXT4 文件系统信息"></a>怎么去查看 EXT2&#x2F;EXT3&#x2F;EXT4 文件系统信息</h3><p><code>dumpe2fs</code> 是一个命令行工具，用于去转储 ext2&#x2F;ext3&#x2F;ext4 文件系统信息，这意味着它可以显示设备上文件系统的超级块和块组信息。</p><p>在运行 <code>dumpe2fs</code> 之前，先去运行 <a target="_blank" rel="noopener" href="https://www.tecmint.com/how-to-check-disk-space-in-linux/">df -hT</a> 命令，确保知道文件系统的设备名。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dumpe2fs /dev/sda10</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>示例输出：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">dumpe2fs 1.42.13 (17-May-2015)</span><br><span class="line">Filesystem volume name:   </span><br><span class="line">Last mounted on:          /</span><br><span class="line">Filesystem UUID:          bb29dda3-bdaa-4b39-86cf-4a6dc9634a1b</span><br><span class="line">Filesystem magic number:  0xEF53</span><br><span class="line">Filesystem revision #:    1 (dynamic)</span><br><span class="line">Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize</span><br><span class="line">Filesystem flags:         signed_directory_hash </span><br><span class="line">Default mount options:    user_xattr acl</span><br><span class="line">Filesystem state:         clean</span><br><span class="line">Errors behavior:          Continue</span><br><span class="line">Filesystem OS type:       Linux</span><br><span class="line">Inode count:              21544960</span><br><span class="line">Block count:              86154752</span><br><span class="line">Reserved block count:     4307737</span><br><span class="line">Free blocks:              22387732</span><br><span class="line">Free inodes:              21026406</span><br><span class="line">First block:              0</span><br><span class="line">Block size:               4096</span><br><span class="line">Fragment size:            4096</span><br><span class="line">Reserved GDT blocks:      1003</span><br><span class="line">Blocks per group:         32768</span><br><span class="line">Fragments per group:      32768</span><br><span class="line">Inodes per group:         8192</span><br><span class="line">Inode blocks per group:   512</span><br><span class="line">Flex block group size:    16</span><br><span class="line">Filesystem created:       Sun Jul 31 16:19:36 2016</span><br><span class="line">Last mount time:          Mon Nov  6 10:25:28 2017</span><br><span class="line">Last write time:          Mon Nov  6 10:25:19 2017</span><br><span class="line">Mount count:              432</span><br><span class="line">Maximum mount count:      -1</span><br><span class="line">Last checked:             Sun Jul 31 16:19:36 2016</span><br><span class="line">Check interval:           0 ()</span><br><span class="line">Lifetime writes:          2834 GB</span><br><span class="line">Reserved blocks uid:      0 (user root)</span><br><span class="line">Reserved blocks gid:      0 (group root)</span><br><span class="line">First inode:              11</span><br><span class="line">Inode size:           256</span><br><span class="line">Required extra isize:     28</span><br><span class="line">Desired extra isize:      28</span><br><span class="line">Journal inode:            8</span><br><span class="line">First orphan inode:       6947324</span><br><span class="line">Default directory hash:   half_md4</span><br><span class="line">Directory Hash Seed:      9da5dafb-bded-494d-ba7f-5c0ff3d9b805</span><br><span class="line">Journal backup:           inode blocks</span><br><span class="line">Journal features:         journal_incompat_revoke</span><br><span class="line">Journal size:             128M</span><br><span class="line">Journal length:           32768</span><br><span class="line">Journal sequence:         0x00580f0c</span><br><span class="line">Journal start:            12055</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你可以通过 <code>-b</code> 选项来显示文件系统中的任何保留块，比如坏块（无输出说明没有坏块）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo dumpe2fs -b</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="检查-EXT2-EXT3-EXT4-文件系统的错误"><a href="#检查-EXT2-EXT3-EXT4-文件系统的错误" class="headerlink" title="检查 EXT2&#x2F;EXT3&#x2F;EXT4 文件系统的错误"></a>检查 EXT2&#x2F;EXT3&#x2F;EXT4 文件系统的错误</h3><p><code>e2fsck</code> 用于去检查 ext2&#x2F;ext3&#x2F;ext4 文件系统的错误。<code>fsck</code> 可以检查并且可选地 <a target="_blank" rel="noopener" href="https://www.tecmint.com/defragment-linux-system-partitions-and-directories/">修复 Linux 文件系统</a>；它实际上是底层 Linux 提供的一系列文件系统检查器 （fsck.fstype，例如 fsck.ext3、fsck.sfx 等等） 的前端程序。</p><p>记住，在系统引导时，Linux 会为 <code>/etc/fstab</code> 配置文件中被标为“检查”的分区自动运行 <code>e2fsck</code>&#x2F;<code>fsck</code>。而在一个文件系统没有被干净地卸载时，一般也会运行它。</p><p>注意：不要在已挂载的文件系统上运行 e2fsck 或 fsck，在你运行这些工具之前，首先要去卸载分区，如下所示。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo unmount /dev/sda10</span><br><span class="line">$ sudo fsck /dev/sda10</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>此外，可以使用 <code>-V</code> 开关去启用详细输出，使用 <code>-t</code> 去指定文件系统类型，像这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo fsck -Vt ext4 /dev/sda10</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="调优-EXT2-EXT3-EXT4-文件系统"><a href="#调优-EXT2-EXT3-EXT4-文件系统" class="headerlink" title="调优 EXT2&#x2F;EXT3&#x2F;EXT4 文件系统"></a>调优 EXT2&#x2F;EXT3&#x2F;EXT4 文件系统</h3><p>我们前面提到过，导致文件系统损坏的其中一个因素就是不正确的调优。你可以使用 <code>tune2fs</code> 实用程序去改变 ext2&#x2F;ext3&#x2F;ext4 文件系统的可调优参数，像下面讲的那样。</p><p>去查看文件系统的超级块，包括参数的当前值，使用 <code>-l</code> 选项，如下所示。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tune2fs -l /dev/sda10</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>示例输出：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">tune2fs 1.42.13 (17-May-2015)</span><br><span class="line">Filesystem volume name:   </span><br><span class="line">Last mounted on:          /</span><br><span class="line">Filesystem UUID:          bb29dda3-bdaa-4b39-86cf-4a6dc9634a1b</span><br><span class="line">Filesystem magic number:  0xEF53</span><br><span class="line">Filesystem revision #:    1 (dynamic)</span><br><span class="line">Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize</span><br><span class="line">Filesystem flags:         signed_directory_hash </span><br><span class="line">Default mount options:    user_xattr acl</span><br><span class="line">Filesystem state:         clean</span><br><span class="line">Errors behavior:          Continue</span><br><span class="line">Filesystem OS type:       Linux</span><br><span class="line">Inode count:              21544960</span><br><span class="line">Block count:              86154752</span><br><span class="line">Reserved block count:     4307737</span><br><span class="line">Free blocks:              22387732</span><br><span class="line">Free inodes:              21026406</span><br><span class="line">First block:              0</span><br><span class="line">Block size:               4096</span><br><span class="line">Fragment size:            4096</span><br><span class="line">Reserved GDT blocks:      1003</span><br><span class="line">Blocks per group:         32768</span><br><span class="line">Fragments per group:      32768</span><br><span class="line">Inodes per group:         8192</span><br><span class="line">Inode blocks per group:   512</span><br><span class="line">Flex block group size:    16</span><br><span class="line">Filesystem created:       Sun Jul 31 16:19:36 2016</span><br><span class="line">Last mount time:          Mon Nov  6 10:25:28 2017</span><br><span class="line">Last write time:          Mon Nov  6 10:25:19 2017</span><br><span class="line">Mount count:              432</span><br><span class="line">Maximum mount count:      -1</span><br><span class="line">Last checked:             Sun Jul 31 16:19:36 2016</span><br><span class="line">Check interval:           0 ()</span><br><span class="line">Lifetime writes:          2834 GB</span><br><span class="line">Reserved blocks uid:      0 (user root)</span><br><span class="line">Reserved blocks gid:      0 (group root)</span><br><span class="line">First inode:              11</span><br><span class="line">Inode size:           256</span><br><span class="line">Required extra isize:     28</span><br><span class="line">Desired extra isize:      28</span><br><span class="line">Journal inode:            8</span><br><span class="line">First orphan inode:       6947324</span><br><span class="line">Default directory hash:   half_md4</span><br><span class="line">Directory Hash Seed:      9da5dafb-bded-494d-ba7f-5c0ff3d9b805</span><br><span class="line">Journal backup:           inode blocks</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>接下来，使用 <code>-c</code> 标识，你可以设置文件系统在挂载多少次后将进行 <code>e2fsck</code> 检查。下面这个命令指示系统每挂载 4 次之后，去对 <code>/dev/sda10</code> 运行 <code>e2fsck</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tune2fs -c 4 /dev/sda10</span><br><span class="line">tune2fs 1.42.13 (17-May-2015)</span><br><span class="line">Setting maximal mount count to 4</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你也可以使用 <code>-i</code> 选项定义两次文件系统检查的时间间隔。下列的命令在两次文件系统检查之间设置了一个 2 天的时间间隔。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tune2fs  -i  2d  /dev/sda10</span><br><span class="line">tune2fs 1.42.13 (17-May-2015)</span><br><span class="line">Setting interval between checks to 172800 seconds</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>现在，如果你运行下面的命令，你可以看到对 <code>/dev/sda10</code> 已经设置了文件系统检查的时间间隔。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tune2fs -l /dev/sda10</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>示例输出：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Filesystem created:       Sun Jul 31 16:19:36 2016</span><br><span class="line">Last mount time:          Mon Nov  6 10:25:28 2017</span><br><span class="line">Last write time:          Mon Nov  6 13:49:50 2017</span><br><span class="line">Mount count:              432</span><br><span class="line">Maximum mount count:      4</span><br><span class="line">Last checked:             Sun Jul 31 16:19:36 2016</span><br><span class="line">Check interval:           172800 (2 days)</span><br><span class="line">Next check after:         Tue Aug  2 16:19:36 2016</span><br><span class="line">Lifetime writes:          2834 GB</span><br><span class="line">Reserved blocks uid:      0 (user root)</span><br><span class="line">Reserved blocks gid:      0 (group root)</span><br><span class="line">First inode:              11</span><br><span class="line">Inode size:           256</span><br><span class="line">Required extra isize:     28</span><br><span class="line">Desired extra isize:      28</span><br><span class="line">Journal inode:            8</span><br><span class="line">First orphan inode:       6947324</span><br><span class="line">Default directory hash:   half_md4</span><br><span class="line">Directory Hash Seed:      9da5dafb-bded-494d-ba7f-5c0ff3d9b805</span><br><span class="line">Journal backup:           inode blocks</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>要改变缺省的日志参数，可以使用 <code>-J</code> 选项。这个选项也有子选项： <code>size=journal-size</code> （设置日志的大小）、<code>device=external-journal</code> （指定日志存储的设备）和 <code>location=journal-location</code> （定义日志的位置）。</p><p>注意，这里一次仅可以为文件系统设置一个日志大小或设备选项：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tune2fs -J size=4MB /dev/sda10</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最后，同样重要的是，可以去使用 <code>-L</code> 选项设置文件系统的卷标，如下所示。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo tune2fs -L &quot;ROOT&quot; /dev/sda10</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="调试-EXT2-EXT3-EXT4-文件系统"><a href="#调试-EXT2-EXT3-EXT4-文件系统" class="headerlink" title="调试 EXT2&#x2F;EXT3&#x2F;EXT4 文件系统"></a>调试 EXT2&#x2F;EXT3&#x2F;EXT4 文件系统</h3><p><code>debugfs</code> 是一个简单的、交互式的、基于 ext2&#x2F;ext3&#x2F;ext4 文件系统的命令行调试器。它允许你去交互式地修改文件系统参数。输入 <code>?</code> 查看子命令或请求。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo debugfs /dev/sda10</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>缺省情况下，文件系统将以只读模式打开，使用 <code>-w</code> 标识去以读写模式打开它。使用 <code>-c</code> 选项以灾难（catastrophic）模式打开它。</p><p><strong>示例输出：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">debugfs 1.42.13 (17-May-2015)</span><br><span class="line">debugfs:  ?</span><br><span class="line">Available debugfs requests:</span><br><span class="line">show_debugfs_params, params</span><br><span class="line">Show debugfs parameters</span><br><span class="line">open_filesys, open       Open a filesystem</span><br><span class="line">close_filesys, close     Close the filesystem</span><br><span class="line">freefrag, e2freefrag     Report free space fragmentation</span><br><span class="line">feature, features        Set/print superblock features</span><br><span class="line">dirty_filesys, dirty     Mark the filesystem as dirty</span><br><span class="line">init_filesys             Initialize a filesystem (DESTROYS DATA)</span><br><span class="line">show_super_stats, stats  Show superblock statistics</span><br><span class="line">ncheck                   Do inode-&gt;name translation</span><br><span class="line">icheck                   Do block-&gt;inode translation</span><br><span class="line">change_root_directory, chroot</span><br><span class="line">....</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>要展示未使用空间的碎片，使用 <code>freefrag</code> 请求，像这样：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">debugfs: freefrag</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>示例输出：</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Device: /dev/sda10</span><br><span class="line">Blocksize: 4096 bytes</span><br><span class="line">Total blocks: 86154752</span><br><span class="line">Free blocks: 22387732 (26.0%)</span><br><span class="line">Min. free extent: 4 KB </span><br><span class="line">Max. free extent: 2064256 KB</span><br><span class="line">Avg. free extent: 2664 KB</span><br><span class="line">Num. free extent: 33625</span><br><span class="line">HISTOGRAM OF FREE EXTENT SIZES:</span><br><span class="line">Extent Size Range :  Free extents   Free Blocks  Percent</span><br><span class="line">4K...    8K-  :          4883          4883    0.02%</span><br><span class="line">8K...   16K-  :          4029          9357    0.04%</span><br><span class="line">16K...   32K-  :          3172         15824    0.07%</span><br><span class="line">32K...   64K-  :          2523         27916    0.12%</span><br><span class="line">64K...  128K-  :          2041         45142    0.20%</span><br><span class="line">128K...  256K-  :          2088         95442    0.43%</span><br><span class="line">256K...  512K-  :          2462        218526    0.98%</span><br><span class="line">512K... 1024K-  :          3175        571055    2.55%</span><br><span class="line">1M...    2M-  :          4551       1609188    7.19%</span><br><span class="line">2M...    4M-  :          2870       1942177    8.68%</span><br><span class="line">4M...    8M-  :          1065       1448374    6.47%</span><br><span class="line">8M...   16M-  :           364        891633    3.98%</span><br><span class="line">16M...   32M-  :           194        984448    4.40%</span><br><span class="line">32M...   64M-  :            86        873181    3.90%</span><br><span class="line">64M...  128M-  :            77       1733629    7.74%</span><br><span class="line">128M...  256M-  :            11        490445    2.19%</span><br><span class="line">256M...  512M-  :            10        889448    3.97%</span><br><span class="line">512M... 1024M-  :             2        343904    1.54%</span><br><span class="line">1G...    2G-  :            22      10217801   45.64%</span><br><span class="line">debugfs:  </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>通过去简单浏览它所提供的简要描述，你可以试试更多的请求，比如，创建或删除文件或目录，改变当前工作目录等等。要退出 <code>debugfs</code>，使用 <code>q</code>。</p><p>现在就这些！我们收集了不同分类下的相关文章，你可以在里面找到对你有用的内容。</p><p><strong>文件系统使用信息：</strong></p><ol><li><a target="_blank" rel="noopener" href="https://www.tecmint.com/how-to-check-disk-space-in-linux/">12 Useful “df” Commands to Check Disk Space in Linux</a></li><li><a target="_blank" rel="noopener" href="https://www.tecmint.com/pyd-command-to-check-disk-usage/">Pydf an Alternative “df” Command to Check Disk Usage in Different Colours</a></li><li><a target="_blank" rel="noopener" href="https://www.tecmint.com/check-linux-disk-usage-of-files-and-directories/">10 Useful du (Disk Usage) Commands to Find Disk Usage of Files and Directories</a></li></ol><p><strong>检查磁盘或分区健康状况：</strong></p><ol><li><a target="_blank" rel="noopener" href="https://www.tecmint.com/linux-disk-scanning-tools/">3 Useful GUI and Terminal Based Linux Disk Scanning Tools</a></li><li><a target="_blank" rel="noopener" href="https://www.tecmint.com/check-linux-hard-disk-bad-sectors-bad-blocks/">How to Check Bad Sectors or Bad Blocks on Hard Disk in Linux</a></li><li><a target="_blank" rel="noopener" href="https://www.tecmint.com/defragment-linux-system-partitions-and-directories/">How to Repair and Defragment Linux System Partitions and Directories</a></li></ol><p>维护一个健康的文件系统可以提升你的 Linux 系统的整体性能。如果你有任何问题或更多的想法，可以使用下面的评论去分享。</p><hr><p>via: <a target="_blank" rel="noopener" href="https://www.tecmint.com/manage-ext2-ext3-and-ext4-health-in-linux/">https://www.tecmint.com/manage-ext2-ext3-and-ext4-health-in-linux/</a></p><p>作者：<a target="_blank" rel="noopener" href="https://www.tecmint.com/author/aaronkili/">Aaron Kili</a> 译者：<a target="_blank" rel="noopener" href="https://github.com/qhwdw">qhwdw</a> 校对：<a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p><p>本文由 <a target="_blank" rel="noopener" href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a target="_blank" rel="noopener" href="https://linux.cn/">Linux中国</a> 荣誉推出</p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p><script defer src="https://pv.undefined.today/tracker.min.js" data-website-id="LinuxCNMirror-tracker"></script></div></div></body></html>