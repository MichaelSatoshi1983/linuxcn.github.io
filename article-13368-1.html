<!doctype html><html lang="en"><head><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>使用 OpenSSL 加密和解密文件 - 归墟星火集 又一个 LinuxCN 站点</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 又一个 LinuxCN 站点 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">使用 OpenSSL 加密和解密文件</h1><span class="post-date">2021-05-07</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E6%8A%80%E6%9C%AF/">技术</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/%E5%8A%A0%E5%AF%86/">加密</a> <a href="/tags/OpenSSL/">OpenSSL</a> <a href="/tags/%E8%A7%A3%E5%AF%86/">解密</a></div><div class="post-content"><blockquote><p>OpenSSL 是一个实用工具，它可以确保其他人员无法打开你的敏感和机密消息。</p></blockquote><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/202105/07/163825a9yh74h9yh4h77y2.jpg" title="A secure lock."></p><p>加密是对消息进行编码的一种方法，这样可以保护消息的内容免遭他人窥视。一般有两种类型：</p><ol><li>密钥加密或对称加密</li><li>公钥加密或非对称加密</li></ol><p><ruby>密钥加密 <rt>secret-key encryption</rt></ruby>使用相同的密钥进行加密和解密，而<ruby>公钥加密 <rt>public-key encryption</rt></ruby>使用不同的密钥进行加密和解密。每种方法各有利弊。密钥加密速度更快，而公钥加密更安全，因为它解决了安全共享密钥的问题，将它们结合在一起可以最大限度地利用每种类型的优势。</p><h3 id="公钥加密"><a href="#公钥加密" class="headerlink" title="公钥加密"></a>公钥加密</h3><p>公钥加密使用两组密钥，称为密钥对。一个是公钥，可以与你想要秘密通信的任何人自由共享。另一个是私钥，应该是一个秘密，永远不会共享。</p><p>公钥用于加密。如果某人想与你交流敏感信息，你可以将你的公钥发送给他们，他们可以使用公钥加密消息或文件，然后再将其发送给你。私钥用于解密。解密发件人加密的消息的唯一方法是使用私钥。因此，它们被称为“密钥对”，它们是相互关联的。</p><h3 id="如何使用-OpenSSL-加密文件"><a href="#如何使用-OpenSSL-加密文件" class="headerlink" title="如何使用 OpenSSL 加密文件"></a>如何使用 OpenSSL 加密文件</h3><p><a target="_blank" rel="noopener" href="https://www.openssl.org/">OpenSSL</a> 是一个了不起的工具，可以执行各种任务，例如加密文件。本文使用安装了 OpenSSL 的 Fedora 计算机。如果你的机器上没有，则可以使用软件包管理器进行安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">alice $ cat /etc/fedora-release</span><br><span class="line">Fedora release 33 (Thirty Three)</span><br><span class="line">alice $</span><br><span class="line">alice $ openssl version</span><br><span class="line">OpenSSL 1.1.1i FIPS  8 Dec 2020</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>要探索文件加密和解密，假如有两个用户 Alice 和 Bob，他们想通过使用 OpenSSL 交换加密文件来相互通信。</p><h4 id="步骤-1：生成密钥对"><a href="#步骤-1：生成密钥对" class="headerlink" title="步骤 1：生成密钥对"></a>步骤 1：生成密钥对</h4><p>在加密文件之前，你需要生成密钥对。你还需要一个<ruby>密码短语 <rt>passphrase</rt></ruby>，每当你使用 OpenSSL 时都必须使用该密码短语，因此务必记住它。</p><p>Alice 使用以下命令生成她的一组密钥对：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alice $ openssl genrsa -aes128 -out alice_private.pem 1024</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>此命令使用 OpenSSL 的 <a target="_blank" rel="noopener" href="https://www.openssl.org/docs/man1.0.2/man1/genrsa.html">genrsa</a> 命令生成一个 1024 位的公钥&#x2F;私钥对。这是可以的，因为 RSA 算法是不对称的。它还使用了 aes128 对称密钥算法来加密 Alice 生成的私钥。</p><p>输入命令后，OpenSSL 会提示 Alice 输入密码，每次使用密钥时，她都必须输入该密码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">alice $ openssl genrsa -aes128 -out alice_private.pem 1024</span><br><span class="line">Generating RSA private key, 1024 bit long modulus (2 primes)</span><br><span class="line">..........+++++</span><br><span class="line">..................................+++++</span><br><span class="line">e is 65537 (0x010001)</span><br><span class="line">Enter pass phrase for alice_private.pem:</span><br><span class="line">Verifying - Enter pass phrase for alice_private.pem:</span><br><span class="line">alice $</span><br><span class="line">alice $</span><br><span class="line">alice $ ls -l alice_private.pem</span><br><span class="line">-rw-------. 1 alice alice 966 Mar 22 17:44 alice_private.pem</span><br><span class="line">alice $</span><br><span class="line">alice $ file alice_private.pem</span><br><span class="line">alice_private.pem: PEM RSA private key</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Bob 使用相同的步骤来创建他的密钥对：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">bob $ openssl genrsa -aes128 -out bob_private.pem 1024</span><br><span class="line">Generating RSA private key, 1024 bit long modulus (2 primes)</span><br><span class="line">..................+++++</span><br><span class="line">............................+++++</span><br><span class="line">e is 65537 (0x010001)</span><br><span class="line">Enter pass phrase for bob_private.pem:</span><br><span class="line">Verifying - Enter pass phrase for bob_private.pem:</span><br><span class="line">bob $</span><br><span class="line">bob $ ls -l bob_private.pem</span><br><span class="line">-rw-------. 1 bob bob 986 Mar 22 13:48 bob_private.pem</span><br><span class="line">bob $</span><br><span class="line">bob $ file bob_private.pem</span><br><span class="line">bob_private.pem: PEM RSA private key</span><br><span class="line">bob $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果你对密钥文件感到好奇，可以打开命令生成的 .pem 文件，但是你会看到屏幕上的一堆文本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">alice $ head alice_private.pem</span><br><span class="line">-----BEGIN RSA PRIVATE KEY-----</span><br><span class="line">Proc-Type: 4,ENCRYPTED</span><br><span class="line">DEK-Info: AES-128-CBC,E26FAC1F143A30632203F09C259200B9</span><br><span class="line"></span><br><span class="line">pdKj8Gm5eeAOF0RHzBx8l1tjmA1HSSvy0RF42bOeb7sEVZtJ6pMnrJ26ouwTQnkL</span><br><span class="line">JJjUVPPHoKZ7j4QpwzbPGrz/hVeMXVT/y33ZEEA+3nrobwisLKz+Q+C9TVJU3m7M</span><br><span class="line">/veiBO9xHMGV01YBNeic7MqXBkhIrNZW6pPRfrbjsBMBGSsL8nwJbb3wvHhzPkeM</span><br><span class="line">e+wtt9S5PWhcnGMj3T+2mtFfW6HWpd8Kdp60z7Nh5mhA9+5aDWREfJhJYzl1zfcv</span><br><span class="line">Bmxjf2wZ3sFJNty+sQVajYfk6UXMyJIuWgAjnqjw6c3vxQi0KE3NUNZYO93GQgEF</span><br><span class="line">pyAnN9uGUTBCDYeTwdw8TEzkyaL08FkzLfFbS2N9BDksA3rpI1cxpxRVFr9+jDBz</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>要查看密钥的详细信息，可以使用以下 OpenSSL 命令打开 .pem 文件并显示内容。你可能想知道在哪里可以找到另一个配对的密钥，因为这是单个文件。你观察的很细致，获取公钥的方法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">alice $ openssl rsa -in alice_private.pem -noout -text</span><br><span class="line">Enter pass phrase for alice_private.pem:</span><br><span class="line">RSA Private-Key: (1024 bit, 2 primes)</span><br><span class="line">modulus:</span><br><span class="line">    00:bd:e8:61:72:f8:f6:c8:f2:cc:05:fa:07:aa:99:</span><br><span class="line">    47:a6:d8:06:cf:09:bf:d1:66:b7:f9:37:29:5d:dc:</span><br><span class="line">    c7:11:56:59:d7:83:b4:81:f6:cf:e2:5f:16:0d:47:</span><br><span class="line">    81:fe:62:9a:63:c5:20:df:ee:d3:95:73:dc:0a:3f:</span><br><span class="line">    65:d3:36:1d:c1:7d:8b:7d:0f:79:de:80:fc:d2:c0:</span><br><span class="line">    e4:27:fc:e9:66:2d:e2:7e:fc:e6:73:d1:c9:28:6b:</span><br><span class="line">    6a:8a:e8:96:9d:65:a0:8a:46:e0:b8:1f:b0:48:d4:</span><br><span class="line">    db:d4:a3:7f:0d:53:36:9a:7d:2e:e7:d8:f2:16:d3:</span><br><span class="line">    ff:1b:12:af:53:22:c0:41:51</span><br><span class="line">publicExponent: 65537 (0x10001)</span><br><span class="line"></span><br><span class="line">&lt;&lt; 截断 &gt;&gt;</span><br><span class="line"></span><br><span class="line">exponent2:</span><br><span class="line">    6e:aa:8c:6e:37:d0:57:37:13:c0:08:7e:75:43:96:</span><br><span class="line">    33:01:99:25:24:75:9c:0b:45:3c:a2:39:44:69:84:</span><br><span class="line">    a4:64:48:f4:5c:bc:40:40:bf:84:b8:f8:0f:1d:7b:</span><br><span class="line">    96:7e:16:00:eb:49:da:6b:20:65:fc:a9:20:d9:98:</span><br><span class="line">    76:ca:59:e1</span><br><span class="line">coefficient:</span><br><span class="line">    68:9e:2e:fa:a3:a4:72:1d:2b:60:61:11:b1:8b:30:</span><br><span class="line">    6e:7e:2d:f9:79:79:f2:27:ab:a0:a0:b6:45:08:df:</span><br><span class="line">    12:f7:a4:3b:d9:df:c5:6e:c7:e8:81:29:07:cd:7e:</span><br><span class="line">    47:99:5d:33:8c:b7:fb:3b:a9:bb:52:c0:47:7a:1c:</span><br><span class="line">    e3:64:90:26</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="步骤-2：提取公钥"><a href="#步骤-2：提取公钥" class="headerlink" title="步骤 2：提取公钥"></a>步骤 2：提取公钥</h4><p>注意，公钥是你可以与他人自由共享的密钥，而你必须将私钥保密。因此，Alice 必须提取她的公钥，并将其保存到文件中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">alice $ openssl rsa -in alice_private.pem -pubout &gt; alice_public.pem</span><br><span class="line">Enter pass phrase for alice_private.pem:</span><br><span class="line">writing RSA key</span><br><span class="line">alice $</span><br><span class="line">alice $ ls -l *.pem</span><br><span class="line">-rw-------. 1 alice alice 966 Mar 22 17:44 alice_private.pem</span><br><span class="line">-rw-rw-r--. 1 alice alice 272 Mar 22 17:47 alice_public.pem</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你可以使用与之前相同的方式查看公钥详细信息，但是这次，输入公钥 .pem 文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">alice $</span><br><span class="line">alice $ openssl rsa -in alice_public.pem -pubin -text -noout</span><br><span class="line">RSA Public-Key: (1024 bit)</span><br><span class="line">Modulus:</span><br><span class="line">    00:bd:e8:61:72:f8:f6:c8:f2:cc:05:fa:07:aa:99:</span><br><span class="line">    47:a6:d8:06:cf:09:bf:d1:66:b7:f9:37:29:5d:dc:</span><br><span class="line">    c7:11:56:59:d7:83:b4:81:f6:cf:e2:5f:16:0d:47:</span><br><span class="line">    81:fe:62:9a:63:c5:20:df:ee:d3:95:73:dc:0a:3f:</span><br><span class="line">$</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Bob 可以按照相同的过程来提取他的公钥并将其保存到文件中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bob $ openssl rsa -in bob_private.pem -pubout &gt; bob_public.pem</span><br><span class="line">Enter pass phrase for bob_private.pem:</span><br><span class="line">writing RSA key</span><br><span class="line">bob $</span><br><span class="line">bob $ ls -l *.pem</span><br><span class="line">-rw-------. 1 bob bob 986 Mar 22 13:48 bob_private.pem</span><br><span class="line">-rw-r--r--. 1 bob bob 272 Mar 22 13:51 bob_public.pem</span><br><span class="line">bob $</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="步骤-3：交换公钥"><a href="#步骤-3：交换公钥" class="headerlink" title="步骤 3：交换公钥"></a>步骤 3：交换公钥</h4><p>这些公钥在 Alice 和 Bob 彼此交换之前没有太大用处。有几种共享公钥的方法，例如使用 <code>scp</code> 命令将密钥复制到彼此的工作站。</p><p>将 Alice 的公钥发送到 Bob 的工作站：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alice $ scp alice_public.pem bob@bob-machine-or-ip:/path/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>将 Bob 的公钥发送到 Alice 的工作站：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bob $ scp bob_public.pem alice@alice-machine-or-ip:/path/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>现在，Alice 有了 Bob 的公钥，反之亦然：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">alice $ ls -l bob_public.pem</span><br><span class="line">-rw-r--r--. 1 alice alice 272 Mar 22 17:51 bob_public.pem</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bob $ ls -l alice_public.pem</span><br><span class="line">-rw-r--r--. 1 bob bob 272 Mar 22 13:54 alice_public.pem</span><br><span class="line">bob $</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="步骤-4：使用公钥交换加密的消息"><a href="#步骤-4：使用公钥交换加密的消息" class="headerlink" title="步骤 4：使用公钥交换加密的消息"></a>步骤 4：使用公钥交换加密的消息</h4><p>假设 Alice 需要与 Bob 秘密交流。她将秘密信息写入文件中，并将其保存到 <code>top_secret.txt</code> 中。由于这是一个普通文件，因此任何人都可以打开它并查看其内容，这里并没有太多保护：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">alice $</span><br><span class="line">alice $ echo &quot;vim or emacs ?&quot; &gt; top_secret.txt</span><br><span class="line">alice $</span><br><span class="line">alice $ cat top_secret.txt</span><br><span class="line">vim or emacs ?</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>要加密此秘密消息，Alice 需要使用 <code>openssls -encrypt</code> 命令。她需要为该工具提供三个输入：</p><ol><li>秘密消息文件的名称</li><li>Bob 的公钥（文件）</li><li>加密后新文件的名称</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">alice $ openssl rsautl -encrypt -inkey bob_public.pem -pubin -in top_secret.txt -out top_secret.enc</span><br><span class="line">alice $</span><br><span class="line">alice $ ls -l top_secret.*</span><br><span class="line">-rw-rw-r--. 1 alice alice 128 Mar 22 17:54 top_secret.enc</span><br><span class="line">-rw-rw-r--. 1 alice alice  15 Mar 22 17:53 top_secret.txt</span><br><span class="line">alice $</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>加密后，原始文件仍然是可见的，而新创建的加密文件在屏幕上看起来像乱码。这样，你可以确定秘密消息已被加密：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">alice $ cat top_secret.txt</span><br><span class="line">vim or emacs ?</span><br><span class="line">alice $</span><br><span class="line">alice $ cat top_secret.enc</span><br><span class="line">�s��uM)M&amp;&gt;��N��&#125;dmCy92#1X�q?��v���M��@��E�~��1�k~&amp;PU�VhHL�@^P��(��zi�M�4p�e��g+R�1�Ԁ���s�������q_8�lr����C�I-��alice $</span><br><span class="line">alice $</span><br><span class="line">alice $</span><br><span class="line">alice $ hexdump -C ./top_secret.enc</span><br><span class="line">00000000  9e 73 12 8f e3 75 4d 29  4d 26 3e bf 80 4e a0 c5  |.s...uM)M&amp;&gt;..N..|</span><br><span class="line">00000010  7d 64 6d 43 79 39 32 23  31 58 ce 71 f3 ba 95 a6  |&#125;dmCy92#1X.q....|</span><br><span class="line">00000020  c0 c0 76 17 fb f7 bf 4d  ce fc 40 e6 f4 45 7f db  |..v....M..@..E..|</span><br><span class="line">00000030  7e ae c0 31 f8 6b 10 06  7e 26 50 55 b5 05 56 68  |~..1.k..~&amp;PU..Vh|</span><br><span class="line">00000040  48 4c eb 40 5e 50 fe 19  ea 28 a8 b8 7a 13 69 d7  |HL.@^P...(..z.i.|</span><br><span class="line">00000050  4d b0 34 70 d8 65 d5 07  95 67 2b 52 ea 31 aa d4  |M.4p.e...g+R.1..|</span><br><span class="line">00000060  80 b3 a8 ec a1 73 ed a7  f9 17 c3 13 d4 fa c1 71  |.....s.........q|</span><br><span class="line">00000070  5f 38 b9 6c 07 72 81 a6  fe af 43 a6 49 2d c4 ee  |_8.l.r....C.I-..|</span><br><span class="line">00000080</span><br><span class="line">alice $</span><br><span class="line">alice $ file top_secret.enc</span><br><span class="line">top_secret.enc: data</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>删除秘密消息的原始文件是安全的，这样确保任何痕迹都没有：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alice $ rm -f top_secret.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>现在，Alice 需要再次使用 <code>scp</code> 命令将此加密文件通过网络发送给 Bob 的工作站。注意，即使文件被截获，其内容也会是加密的，因此内容不会被泄露：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alice $  scp top_secret.enc bob@bob-machine-or-ip:/path/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果 Bob 使用常规方法尝试打开并查看加密的消息，他将无法看懂该消息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">bob $ ls -l top_secret.enc</span><br><span class="line">-rw-r--r--. 1 bob bob 128 Mar 22 13:59 top_secret.enc</span><br><span class="line">bob $</span><br><span class="line">bob $ cat top_secret.enc</span><br><span class="line">�s��uM)M&amp;&gt;��N��&#125;dmCy92#1X�q?��v���M��@��E�~��1�k~&amp;PU�VhHL�@^P��(��zi�M�4p�e��g+R�1�Ԁ���s�������q_8�lr����C�I-��bob $</span><br><span class="line">bob $</span><br><span class="line">bob $ hexdump -C top_secret.enc</span><br><span class="line">00000000  9e 73 12 8f e3 75 4d 29  4d 26 3e bf 80 4e a0 c5  |.s...uM)M&amp;&gt;..N..|</span><br><span class="line">00000010  7d 64 6d 43 79 39 32 23  31 58 ce 71 f3 ba 95 a6  |&#125;dmCy92#1X.q....|</span><br><span class="line">00000020  c0 c0 76 17 fb f7 bf 4d  ce fc 40 e6 f4 45 7f db  |..v....M..@..E..|</span><br><span class="line">00000030  7e ae c0 31 f8 6b 10 06  7e 26 50 55 b5 05 56 68  |~..1.k..~&amp;PU..Vh|</span><br><span class="line">00000040  48 4c eb 40 5e 50 fe 19  ea 28 a8 b8 7a 13 69 d7  |HL.@^P...(..z.i.|</span><br><span class="line">00000050  4d b0 34 70 d8 65 d5 07  95 67 2b 52 ea 31 aa d4  |M.4p.e...g+R.1..|</span><br><span class="line">00000060  80 b3 a8 ec a1 73 ed a7  f9 17 c3 13 d4 fa c1 71  |.....s.........q|</span><br><span class="line">00000070  5f 38 b9 6c 07 72 81 a6  fe af 43 a6 49 2d c4 ee  |_8.l.r....C.I-..|</span><br><span class="line">00000080</span><br><span class="line">bob $</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="步骤-5：使用私钥解密文件"><a href="#步骤-5：使用私钥解密文件" class="headerlink" title="步骤 5：使用私钥解密文件"></a>步骤 5：使用私钥解密文件</h4><p>Bob 需要使用 OpenSSL 来解密消息，但是这次使用的是 <code>-decrypt</code> 命令行参数。他需要向工具程序提供以下信息：</p><ol><li>加密的文件（从 Alice 那里得到）</li><li>Bob 的私钥（用于解密，因为文件是用 Bob 的公钥加密的）</li><li>通过重定向保存解密输出的文件名</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bob $ openssl rsautl -decrypt -inkey bob_private.pem -in top_secret.enc &gt; top_secret.txt</span><br><span class="line">Enter pass phrase for bob_private.pem:</span><br><span class="line">bob $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>现在，Bob 可以阅读 Alice 发送给他的秘密消息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">bob $ ls -l top_secret.txt</span><br><span class="line">-rw-r--r--. 1 bob bob 15 Mar 22 14:02 top_secret.txt</span><br><span class="line">bob $</span><br><span class="line">bob $ cat top_secret.txt</span><br><span class="line">vim or emacs ?</span><br><span class="line">bob $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Bob 需要回复 Alice，因此他将秘密回复写在一个文件中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">bob $ echo &quot;nano for life&quot; &gt; reply_secret.txt</span><br><span class="line">bob $</span><br><span class="line">bob $ cat reply_secret.txt</span><br><span class="line">nano for life</span><br><span class="line">bob $</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="步骤-6：使用其他密钥重复该过程"><a href="#步骤-6：使用其他密钥重复该过程" class="headerlink" title="步骤 6：使用其他密钥重复该过程"></a>步骤 6：使用其他密钥重复该过程</h4><p>为了发送消息，Bob 采用和 Alice 相同的步骤，但是由于该消息是发送给 Alice 的，因此他需要使用 Alice 的公钥来加密文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">bob $ openssl rsautl -encrypt -inkey alice_public.pem -pubin -in reply_secret.txt -out reply_secret.enc</span><br><span class="line">bob $</span><br><span class="line">bob $ ls -l reply_secret.enc</span><br><span class="line">-rw-r--r--. 1 bob bob 128 Mar 22 14:03 reply_secret.enc</span><br><span class="line">bob $</span><br><span class="line">bob $ cat reply_secret.enc</span><br><span class="line">�F݇��.4&quot;f�1��\��&#123;o԰$�M��I&#123;5�|�\�l͂�e��Y�V��&#123;�|!$c^a</span><br><span class="line">                                                 �*Ԫ\vQ�Ϡ9����&#x27;��ٮsP��&#x27;��Z�1W�n��k���J�0�I;P8������&amp;:bob $</span><br><span class="line">bob $</span><br><span class="line">bob $ hexdump -C ./reply_secret.enc</span><br><span class="line">00000000  92 46 dd 87 04 bc a7 2e  34 22 01 66 1a 13 31 db  |.F......4&quot;.f..1.|</span><br><span class="line">00000010  c4 5c b4 8e 7b 6f d4 b0  24 d2 4d 92 9b 49 7b 35  |.\..&#123;o..$.M..I&#123;5|</span><br><span class="line">00000020  da 7c ee 5c bb 6c cd 82  f1 1b 92 65 f1 8d f2 59  |.|.\.l.....e...Y|</span><br><span class="line">00000030  82 56 81 80 7b 89 07 7c  21 24 63 5e 61 0c ae 2a  |.V..&#123;..|!$c^a..*|</span><br><span class="line">00000040  d4 aa 5c 76 51 8d cf a0  39 04 c1 d7 dc f0 ad 99  |..\vQ...9.......|</span><br><span class="line">00000050  27 ed 8e de d9 ae 02 73  50 e0 dd 27 13 ae 8e 5a  |&#x27;......sP..&#x27;...Z|</span><br><span class="line">00000060  12 e4 9a 31 57 b3 03 6e  dd e1 16 7f 6b c0 b3 8b  |...1W..n....k...|</span><br><span class="line">00000070  4a cf 30 b8 49 3b 50 38  e0 9f 84 f6 83 da 26 3a  |J.0.I;P8......&amp;:|</span><br><span class="line">00000080</span><br><span class="line">bob $</span><br><span class="line">bob $ # remove clear text secret message file</span><br><span class="line">bob $ rm -f reply_secret.txt</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Bob 通过 <code>scp</code> 将加密的文件发送至 Alice 的工作站：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ scp reply_secret.enc alice@alice-machine-or-ip:/path/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果 Alice 尝试使用常规工具去阅读加密的文本，她将无法理解加密的文本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">alice $</span><br><span class="line">alice $ ls -l reply_secret.enc</span><br><span class="line">-rw-r--r--. 1 alice alice 128 Mar 22 18:01 reply_secret.enc</span><br><span class="line">alice $</span><br><span class="line">alice $ cat reply_secret.enc</span><br><span class="line">�F݇��.4&quot;f�1��\��&#123;o԰$�M��I&#123;5�|�\�l͂�e��Y�V��&#123;�|!$c^a</span><br><span class="line">                                                 �*Ԫ\vQ�Ϡ9����&#x27;��ٮsP��&#x27;��Z�1W�n��k���J�0�I;P8������&amp;:alice $</span><br><span class="line">alice $</span><br><span class="line">alice $</span><br><span class="line">alice $ hexdump -C ./reply_secret.enc</span><br><span class="line">00000000  92 46 dd 87 04 bc a7 2e  34 22 01 66 1a 13 31 db  |.F......4&quot;.f..1.|</span><br><span class="line">00000010  c4 5c b4 8e 7b 6f d4 b0  24 d2 4d 92 9b 49 7b 35  |.\..&#123;o..$.M..I&#123;5|</span><br><span class="line">00000020  da 7c ee 5c bb 6c cd 82  f1 1b 92 65 f1 8d f2 59  |.|.\.l.....e...Y|</span><br><span class="line">00000030  82 56 81 80 7b 89 07 7c  21 24 63 5e 61 0c ae 2a  |.V..&#123;..|!$c^a..*|</span><br><span class="line">00000040  d4 aa 5c 76 51 8d cf a0  39 04 c1 d7 dc f0 ad 99  |..\vQ...9.......|</span><br><span class="line">00000050  27 ed 8e de d9 ae 02 73  50 e0 dd 27 13 ae 8e 5a  |&#x27;......sP..&#x27;...Z|</span><br><span class="line">00000060  12 e4 9a 31 57 b3 03 6e  dd e1 16 7f 6b c0 b3 8b  |...1W..n....k...|</span><br><span class="line">00000070  4a cf 30 b8 49 3b 50 38  e0 9f 84 f6 83 da 26 3a  |J.0.I;P8......&amp;:|</span><br><span class="line">00000080</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>所以，她使用 OpenSSL 解密消息，只不过这次她提供了自己的私钥并将输出保存到文件中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">alice $ openssl rsautl -decrypt -inkey alice_private.pem -in reply_secret.enc &gt; reply_secret.txt</span><br><span class="line">Enter pass phrase for alice_private.pem:</span><br><span class="line">alice $</span><br><span class="line">alice $ ls -l reply_secret.txt</span><br><span class="line">-rw-rw-r--. 1 alice alice 14 Mar 22 18:02 reply_secret.txt</span><br><span class="line">alice $</span><br><span class="line">alice $ cat reply_secret.txt</span><br><span class="line">nano for life</span><br><span class="line">alice $</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="了解-OpenSSL-的更多信息"><a href="#了解-OpenSSL-的更多信息" class="headerlink" title="了解 OpenSSL 的更多信息"></a>了解 OpenSSL 的更多信息</h3><p>OpenSSL 在加密界是真正的瑞士军刀。除了加密文件外，它还可以执行许多任务，你可以通过访问 OpenSSL <a target="_blank" rel="noopener" href="https://www.openssl.org/docs/">文档页面</a>来找到使用它的所有方式，包括手册的链接、 《OpenSSL Cookbook》、常见问题解答等。要了解更多信息，尝试使用其自带的各种加密算法，看看它是如何工作的。</p><hr><p>via: <a target="_blank" rel="noopener" href="https://opensource.com/article/21/4/encryption-decryption-openssl">https://opensource.com/article/21/4/encryption-decryption-openssl</a></p><p>作者：<a target="_blank" rel="noopener" href="https://opensource.com/users/gkamathe">Gaurav Kamathe</a> 选题：<a target="_blank" rel="noopener" href="https://github.com/lujun9972">lujun9972</a> 译者：<a target="_blank" rel="noopener" href="https://github.com/MjSeven">MjSeven</a> 校对：<a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p><p>本文由 <a target="_blank" rel="noopener" href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a target="_blank" rel="noopener" href="https://linux.cn/">Linux中国</a> 荣誉推出</p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p></div></div></body></html>