<!doctype html><html lang="en"><head><meta name="description" content="一个LinuxCN的镜像站"><meta name="msvalidate.01" content="D404690CEFCB54C7762AC84935B99171"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6618da70c90c8744eead2e9371fb5077";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,s,a,r){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/s5f3f0tojf",(r=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta http-equiv="X-UA-Compatible" content="ie=edge"><link rel="stylesheet" href="/styles/base.css"><link rel="stylesheet" href="/styles/theme.css"><link rel="shortcut icon" href="/favicon.png"><title>如何在 Ubuntu 22.04 LTS 中安装 Docker 和 Docker Compose - 归墟星火集 又一个 LinuxCN 站点</title><meta name="generator" content="Hexo 7.3.0"></head><body><div class="header-title"><span class="header-light"></span> <span class="header-light"></span> <span class="header-light"></span> <span>归墟星火集 又一个 LinuxCN 站点 linuxcn.undefined.today<span></span></span></div><div class="container"><ul class="nav"><li><a href="/">首页</a></li><li><a target="_blank" rel="noopener" href="https://undefined.today/">Blog</a></li></ul><div class="content"><div class="post-container"><div class="post-header"><span class="ui-tips">标题：</span><h1 class="ui-keyword post-title">如何在 Ubuntu 22.04 LTS 中安装 Docker 和 Docker Compose</h1><span class="post-date">2022-07-28</span></div><div class="post-header"><span class="ui-tips">分类：</span> <a href="/categories/%E5%AE%B9%E5%99%A8%E4%B8%8E%E4%BA%91/">容器与云</a></div><div class="post-header"><span class="ui-tips">标签：</span> <a href="/tags/Docker/">Docker</a></div><div class="post-content"><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/202207/28/142549iwrj25mw9turhc9o.jpg"></p><blockquote><p>在 Ubuntu 中使用 Docker Compose 安装 Docker 引擎的分步指导。</p></blockquote><p>在这篇文章中，我们将会明白 Docker 是什么，如何 <strong>在 Ubuntu 中安装 Docker 引擎</strong> 。此外，我们也将会明白如何 <strong>安装 Docker Compose</strong> ，它是一个定义并运行多容器的 Docker 应用。</p><p>我们已经在 Ubuntu 22.04 LTS 中正式的测试了这份指南。然而，它也应该对旧版本如 20.04 LTS 和 18.04 LTS 有效。为了更好的安全性和稳定性，我推荐你使用最新的版本 —— Ubuntu 22.04 LTS 。</p><h3 id="什么是-Docker-？"><a href="#什么是-Docker-？" class="headerlink" title="什么是 Docker ？"></a>什么是 Docker ？</h3><p><strong>Docker</strong> 是一个快捷、轻便的系统级虚拟化技术，开发者和系统管理员可以使用它构建具备所有必要依赖项的应用程序，并将其作为一个包发布。</p><p>Docker 与其他如 VMWare 、Xen 、以及 VirtualBox 等工具的虚拟化方式不同，每个虚拟机不需要单独的客户操作系统。</p><p>所有的 Docker 容器有效地共享同一个主机系统内核。每个容器都在同一个操作系统中的隔离用户空间中运行。</p><p>Docker 容器可以在任何 Linux 版本上运行。比如说你使用 Fedora ，我用 Ubuntu 。我们能相互开发、共享并分发 Docker 镜像。</p><p>你无需担心操作系统、软件以及自定义设置，任何事都不用担心。只要我们的主机安装了 Docker ，就能持续开发。简言之，Docker 能够在任何地方运行！</p><p>前文中你读到了两个词：<strong>Docker 镜像</strong> 和 <strong>Docker 容器</strong> ，或许你在想它们的区别。</p><p>通俗地说，Docker 镜像是一个描述容器应该如何表现的文件，而 Docker 容器是 Docker 镜像的运行（或停止）状态。</p><p>希望你能够理解 Docker 的基础概念。更多细节，你可以参考文章末尾的 Docker 官方指导手册。</p><h3 id="Docker-依赖项"><a href="#Docker-依赖项" class="headerlink" title="Docker 依赖项"></a>Docker 依赖项</h3><p>为了安装并配置 Docker ，你的系统必须满足下列最低要求：</p><ol><li>64 位 Linux 或 Windows 系统</li><li>如果使用 Linux ，内核版本必须不低于 3.10</li><li>能够使用 <code>sudo</code> 权限的用户</li><li>在你系统 BIOS 上启用了 VT（虚拟化技术）支持 on your system BIOS（参考: <a target="_blank" rel="noopener" href="https://ostechnix.com/how-to-find-if-a-cpu-supports-virtualization-technology-vt/">如何查看 CPU 支持 虚拟化技术（VT）</a>）</li><li>你的系统应该联网</li></ol><p>在 Linux ，在终端上运行以下命令验证内核以及架构详细信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ uname -a</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出样例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Linux Ubuntu22CT 5.15.35-3-pve #1 SMP PVE 5.15.35-6 (Fri, 17 Jun 2022 13:42:35 +0200) x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>正如上面你看到的那样，我的 Ubuntu 系统内核版本是 <strong>5.15.35-3-pve</strong> 并且系统架构是 <strong>64 位</strong>（<strong>x86_64 x86_64 x86_64 GNU&#x2F;Linux</strong>）。</p><blockquote><p><strong>注意：</strong> 这里，我在 <a target="_blank" rel="noopener" href="https://ostechnix.com/install-proxmox-ve/">Proxmox</a> 中使用 Ubuntu 22.04 容器。这是你看到上方内核版本中有 “pve” 字符的原因。如果你正在使用 Ubuntu 实体（或者虚拟）机，你将看到系统版本为 <strong>5.15.35-3-generic</strong> 。</p></blockquote><p>内核版本需要不低于最低要求的版本，并且是 64 位机器。这样不会有任何问题，我们能顺利安装并使用 Docker 。</p><p>请注意你使用哪一个 Ubuntu 系统不重要。并且你使用 Ubuntu 桌面或服务器版本，亦或者其他 Ubuntu 变种如 Lubuntu 、Kubuntu 、Xubuntu ，都不重要。</p><p>只要你的系统内核版本不低于 3.10 ，并且是 64 位系统，Docker 都会正常运行。</p><h3 id="在-Ubuntu-22-04-LTS-中安装-Docker"><a href="#在-Ubuntu-22-04-LTS-中安装-Docker" class="headerlink" title="在 Ubuntu 22.04 LTS 中安装 Docker"></a>在 Ubuntu 22.04 LTS 中安装 Docker</h3><p>首先，更新你的 Ubuntu 系统。</p><h4 id="1、更新-Ubuntu"><a href="#1、更新-Ubuntu" class="headerlink" title="1、更新 Ubuntu"></a>1、更新 Ubuntu</h4><p>打开终端，依次运行下列命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt update</span><br><span class="line">$ sudo apt upgrade</span><br><span class="line">$ sudo apt full-upgrade</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="2、添加-Docker-库"><a href="#2、添加-Docker-库" class="headerlink" title="2、添加 Docker 库"></a>2、添加 Docker 库</h4><p>首先，安装必要的证书并允许 apt 包管理器使用以下命令通过 HTTPS 使用存储库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install apt-transport-https ca-certificates curl software-properties-common gnupg lsb-release</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后，运行下列命令添加 Docker 的官方 GPG 密钥：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>添加 Docker 官方库：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ echo &quot;deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使用命令更新 Ubuntu 源列表：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt update</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="3、安装-Docker"><a href="#3、安装-Docker" class="headerlink" title="3、安装 Docker"></a>3、安装 Docker</h4><p>最后，运行下列命令在 Ubuntu 22.04 LTS 服务器中安装最新 Docker CE：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/202207/28/142618qannlvznwnvwuzai.png" alt="Install Docker In Ubuntu"></p><p>当然你也可以安装其他版本 Docker 。运行下列命令检查可以安装的 Docker 版本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ apt-cache madison docker-ce</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出样例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker-ce | 5:20.10.17~3-0~ubuntu-jammy | https://download.docker.com/linux/ubuntu jammy/stable amd64 Packages</span><br><span class="line">docker-ce | 5:20.10.16~3-0~ubuntu-jammy | https://download.docker.com/linux/ubuntu jammy/stable amd64 Packages</span><br><span class="line">docker-ce | 5:20.10.15~3-0~ubuntu-jammy | https://download.docker.com/linux/ubuntu jammy/stable amd64 Packages</span><br><span class="line">docker-ce | 5:20.10.14~3-0~ubuntu-jammy | https://download.docker.com/linux/ubuntu jammy/stable amd64 Packages</span><br><span class="line">docker-ce | 5:20.10.13~3-0~ubuntu-jammy | https://download.docker.com/linux/ubuntu jammy/stable amd64 Packages</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你可以挑选上面列表中的任何版本进行安装。例如，安装 <strong>5:20.10.16~ 3-0 ~ubuntu-jammy</strong> 这个版本，运行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install docker-ce=5:20.10.16~3-0~ubuntu-jammy docker-ce-cli=5:20.10.16~3-0~ubuntu-jammy containerd.io</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>安装完成后，运行如下命令验证 Docker 服务是否在运行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl status docker</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你会看到类似下面的输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">* docker.service - Docker Application Container Engine</span><br><span class="line">     Loaded: loaded (/lib/systemd/system/docker.service; enabled; vendor preset: enabled)</span><br><span class="line">     Active: active (running) since Mon 2022-06-27 13:07:43 UTC; 3min 4s ago</span><br><span class="line">TriggeredBy: * docker.socket</span><br><span class="line">       Docs: https://docs.docker.com</span><br><span class="line">   Main PID: 2208 (dockerd)</span><br><span class="line">      Tasks: 8</span><br><span class="line">     Memory: 29.6M</span><br><span class="line">        CPU: 126ms</span><br><span class="line">     CGroup: /system.slice/docker.service</span><br><span class="line">             `-2208 /usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock</span><br><span class="line"></span><br><span class="line">Jun 27 13:07:43 Ubuntu22CT dockerd[2208]: time=&quot;2022-06-27T13:07:43.071453522Z&quot; level=info msg=&quot;ccResolverWrapper: sending update to cc: &#123;[&#123;unix:&gt;</span><br><span class="line">Jun 27 13:07:43 Ubuntu22CT dockerd[2208]: time=&quot;2022-06-27T13:07:43.071459974Z&quot; level=info msg=&quot;ClientConn switching balancer to \&quot;pick_first\&quot;&quot; &gt;</span><br><span class="line">Jun 27 13:07:43 Ubuntu22CT dockerd[2208]: time=&quot;2022-06-27T13:07:43.130989294Z&quot; level=info msg=&quot;Loading containers: start.&quot;</span><br><span class="line">Jun 27 13:07:43 Ubuntu22CT dockerd[2208]: time=&quot;2022-06-27T13:07:43.187439756Z&quot; level=info msg=&quot;Default bridge (docker0) is assigned with an IP a&gt;</span><br><span class="line">Jun 27 13:07:43 Ubuntu22CT dockerd[2208]: time=&quot;2022-06-27T13:07:43.235966874Z&quot; level=info msg=&quot;Loading containers: done.&quot;</span><br><span class="line">Jun 27 13:07:43 Ubuntu22CT dockerd[2208]: time=&quot;2022-06-27T13:07:43.240149866Z&quot; level=warning msg=&quot;Not using native diff for overlay2, this may c&gt;</span><br><span class="line">Jun 27 13:07:43 Ubuntu22CT dockerd[2208]: time=&quot;2022-06-27T13:07:43.240281966Z&quot; level=info msg=&quot;Docker daemon&quot; commit=a89b842 graphdriver(s)=over&gt;</span><br><span class="line">Jun 27 13:07:43 Ubuntu22CT dockerd[2208]: time=&quot;2022-06-27T13:07:43.240386856Z&quot; level=info msg=&quot;Daemon has completed initialization&quot;</span><br><span class="line">Jun 27 13:07:43 Ubuntu22CT systemd[1]: Started Docker Application Container Engine.</span><br><span class="line">Jun 27 13:07:43 Ubuntu22CT dockerd[2208]: time=&quot;2022-06-27T13:07:43.276336600Z&quot; level=info msg=&quot;API listen on /run/docker.sock&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>好极了！Docker 服务已启动并运行！</p><p>如果没有运行，运行以下命令运行 Docker 服务：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl start docker</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>使 Docker 服务在每次重启时自动启动：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl enable docker</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>可以使用以下命令查看已安装的 Docker 版本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker version</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>输出样例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Client: Docker Engine - Community</span><br><span class="line">  Version:           20.10.17</span><br><span class="line">  API version:       1.41</span><br><span class="line">  Go version:        go1.17.11</span><br><span class="line">  Git commit:        100c701</span><br><span class="line">  Built:             Mon Jun  6 23:02:46 2022</span><br><span class="line">  OS/Arch:           linux/amd64</span><br><span class="line">  Context:           default</span><br><span class="line">  Experimental:      true</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line">  Engine:</span><br><span class="line">    Version:          20.10.17</span><br><span class="line">    API version:      1.41 (minimum version 1.12)</span><br><span class="line">    Go version:       go1.17.11</span><br><span class="line">    Git commit:       a89b842</span><br><span class="line">  Built:            Mon Jun  6 23:00:51 2022</span><br><span class="line">    OS/Arch:          linux/amd64</span><br><span class="line">    Experimental:     false</span><br><span class="line">  containerd:</span><br><span class="line">    Version:          1.6.6</span><br><span class="line">    GitCommit:        10c12954828e7c7c9b6e0ea9b0c02b01407d3ae1</span><br><span class="line">  runc:</span><br><span class="line">    Version:          1.1.2</span><br><span class="line">    GitCommit:        v1.1.2-0-ga916309</span><br><span class="line">  docker-init:</span><br><span class="line">    Version:          0.19.0</span><br><span class="line">    GitCommit:        de40ad0</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/202207/28/142619u89goqxeb9mqz9gl.png" alt="Check Docker Version"></p><h4 id="4、测试-Docker"><a href="#4、测试-Docker" class="headerlink" title="4、测试 Docker"></a>4、测试 Docker</h4><p>让我们继续，测试 Docker 是否运行正常：</p><p>运行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run hello-world</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>上述命令会下载一个 Docker 测试镜像，并在容器内执行一个 “hello_world” 样例程序。</p><p>如果你看到类似下方的输出，那么祝贺你！Docker 正常运行在你的 Ubuntu 系统中了。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">2db29710123e: Pull complete </span><br><span class="line">Digest: sha256:13e367d31ae85359f42d637adf6da428f76d75dc9afeb3c21faea0d976f5c651</span><br><span class="line">Status: Downloaded newer image for hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><img src="https://linuxcn.img.undefined.today/data/attachment/album/202207/28/142620d055vugtrk55k02n.png" alt="Run Hello World Docker Container"></p><p>很好！可以使用 Docker 了。</p><h4 id="5、作为非-root-用户运行-Docker-（选做）"><a href="#5、作为非-root-用户运行-Docker-（选做）" class="headerlink" title="5、作为非 root 用户运行 Docker （选做）"></a>5、作为非 root 用户运行 Docker （选做）</h4><p>默认情况下，Docker 守护进程绑定到 Unix 套接字而不是 TCP 端口。由于 <strong>Unix 套接字由 root 用户拥有</strong>，Docker 守护程序将仅以 root 用户身份运行。因此，普通用户无法执行大多数 Docker 命令。</p><p>如果你想要在 Linux 中作为非 root 用户运行 Docker ，参考下方链接：</p><ul><li><a target="_blank" rel="noopener" href="https://ostechnix.com/how-to-run-docker-as-non-root-user-in-linux/">如何在 Linux 中作为非 root 用户运行 Docker</a></li></ul><p>我个人不这样做也<strong>不推荐</strong>你这么做。如果你不会在互联网上暴露你的系统，那没问题。然而，不要在生产系统中以非 root 用户身份运行 Docker 。</p><h3 id="在-Ubuntu-中安装-Docker-Compose"><a href="#在-Ubuntu-中安装-Docker-Compose" class="headerlink" title="在 Ubuntu 中安装 Docker Compose"></a>在 Ubuntu 中安装 Docker Compose</h3><p><strong>Docker Compose</strong> 是一个可用于定义和运行多容器 Docker 应用程序的工具。使用 Compose，你可以使用 Compose 文件来配置应用程序的服务。然后，使用单个命令，你可以从配置中创建和启动所有服务。</p><p>下列任何方式都可以安装 Docker Compose 。</p><h4 id="方式-1、使用二进制文件安装-Docker-Compose"><a href="#方式-1、使用二进制文件安装-Docker-Compose" class="headerlink" title="方式 1、使用二进制文件安装 Docker Compose"></a>方式 1、使用二进制文件安装 Docker Compose</h4><p>从 <a target="_blank" rel="noopener" href="https://github.com/docker/compose/releases">这里</a> 下载最新 Docker Compose 。</p><p>当我在写这篇文章时，最新版本是 <strong>2.6.1</strong> 。</p><p>运行下列命令安装最新稳定的 Docker Compose 文件：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo curl -L &quot;https://github.com/docker/compose/releases/download/v2.6.1/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>如果有更新版本，只需要将上述命令中的 <strong>v2.6.1</strong> 替换为最新的版本号即可。请不要忘记数字前的 <strong>“v”</strong> 。</p><p>最后，使用下列命令赋予二进制文件可执行权限：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo chmod +x /usr/local/bin/docker-compose</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行下列命令检查安装的 Docker Compose 版本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose version</span><br><span class="line">Docker Compose version v2.6.1</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="方式-2、使用-Pip-安装-Docker-Compose"><a href="#方式-2、使用-Pip-安装-Docker-Compose" class="headerlink" title="方式 2、使用 Pip 安装 Docker Compose"></a>方式 2、使用 Pip 安装 Docker Compose</h4><p>或许，我们可以使用 <strong>Pip</strong> 安装 Docker Compose 。Pip 是 Python 包管理器，用来安装使用 Python 编写的应用程序。</p><p>参考下列链接安装 Pip 。</p><ul><li><a target="_blank" rel="noopener" href="https://ostechnix.com/manage-python-packages-using-pip/">如何使用 Pip 管理 Python 包</a></li></ul><p>安装 Pip 后，运行以下命令安装 Docker Compose。下列命令对于所有 Linux 发行版都是相同的！</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ pip install docker-compose</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>安装 Docker Compose 后，使用下列命令检查版本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose --version</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>你将会看到类似下方的输出：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker-compose version 2.6.1, build 8a1c60f6</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>恭喜你！我们已经成功安装了 Docker 社区版和 Docker Compose 。</p><p>安装了 Docker，然后呢？查看本系列的下一篇文章，了解 Docker 基础知识。</p><ul><li><a target="_blank" rel="noopener" href="https://ostechnix.com/getting-started-with-docker/">开始使用 Docker</a></li></ul><p>要在基于 RPM 的系统（例如 RHEL、Fedora、CentOS、AlmaLinux、Rocky Linux 和 openSUSE）中安装 Docker，请参考以下链接。</p><ul><li><a target="_blank" rel="noopener" href="https://ostechnix.com/install-docker-centos/">在 CentOS 中安装 Docker</a></li></ul><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在这篇教程中，我们讨论了 Docker 是什么，如何在 Ubuntu 22.04 LTS Jammy Jellyfish 中安装 Docker 。然后学习了如何通过运行 hello-world Docker 镜像测试 Docker 是否成功安装。最后，我们通过使用两种不同的方式安装 Docker Compose 作为本教程的结尾。</p><h3 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h3><ul><li><a target="_blank" rel="noopener" href="https://www.docker.com/">Docker 主页</a></li></ul><hr><p>via: <a target="_blank" rel="noopener" href="https://ostechnix.com/install-docker-ubuntu/">https://ostechnix.com/install-docker-ubuntu/</a></p><p>作者：<a target="_blank" rel="noopener" href="https://ostechnix.com/author/sk/">sk</a> 选题：<a target="_blank" rel="noopener" href="https://github.com/lkxed">lkxed</a> 译者：<a target="_blank" rel="noopener" href="https://github.com/Donkey-Hao">Donkey</a> 校对：<a target="_blank" rel="noopener" href="https://github.com/wxy">wxy</a></p><p>本文由 <a target="_blank" rel="noopener" href="https://github.com/LCTT/TranslateProject">LCTT</a> 原创编译，<a target="_blank" rel="noopener" href="https://linux.cn/">Linux中国</a> 荣誉推出</p></div></div></div><div class="footer"><p class="footer-copyright"><span>Powered by <a target="_blank" href="https://hexo.io">Hexo</a></span> <span>Theme <a target="_blank" href="https://github.com/tinkink-co/hexo-theme-terminal">Terminal</a></span><script type="text/javascript" src="https://cdn.staticfile.net/jquery/3.4.1/jquery.min.js"></script><script>getCDNinfo=function(){$.ajax({url:"/cdn-cgi/trace",success:function(a,n){let i="Antananarivo, Madagascar - (TNR);Cape Town, South Africa - (CPT);Casablanca, Morocco - (CMN);Dar Es Salaam, Tanzania - (DAR);Djibouti City, Djibouti - (JIB);Durban, South Africa - (DUR);Johannesburg, South Africa - (JNB);Kigali, Rwanda - (KGL);Lagos, Nigeria - (LOS);Luanda, Angola - (LAD);Maputo, MZ - (MPM);Mombasa, Kenya - (MBA);Port Louis, Mauritius - (MRU);Réunion, France - (RUN);Bangalore, India - (BLR);Bangkok, Thailand - (BKK);Bandar Seri Begawan, Brunei - (BWN);Cebu, Philippines - (CEB);Chengdu, China - (CTU);Chennai, India - (MAA);Chittagong, Bangladesh - (CGP);Chongqing, China - (CKG);Colombo, Sri Lanka - (CMB);Dhaka, Bangladesh - (DAC);Dongguan, China - (SZX);Foshan, China - (FUO);Fuzhou, China - (FOC);Guangzhou, China - (CAN);Hangzhou, China - (HGH);Hanoi, Vietnam - (HAN);Hengyang, China - (HNY);Ho Chi Minh City, Vietnam - (SGN);Hong Kong - (HKG);Hyderabad, India - (HYD);Islamabad, Pakistan - (ISB);Jakarta, Indonesia - (CGK);Jinan, China - (TNA);Karachi, Pakistan - (KHI);Kathmandu, Nepal - (KTM);Kolkata, India - (CCU);Kuala Lumpur, Malaysia - (KUL);Lahore, Pakistan - (LHE);Langfang, China - (NAY);Luoyang, China - (LYA);Macau - (MFM);Malé, Maldives - (MLE);Manila, Philippines - (MNL);Mumbai, India - (BOM);Nagpur, India - (NAG);Nanning, China - (NNG);New Delhi, India - (DEL);Osaka, Japan - (KIX);Phnom Penh, Cambodia - (PNH);Qingdao, China - (TAO);Seoul, South Korea - (ICN);Shanghai, China - (SHA);Shenyang, China - (SHE);Shijiazhuang, China - (SJW);Singapore, Singapore - (SIN);Suzhou, China - (SZV);Taipei - (TPE);Thimphu, Bhutan - (PBH);Tianjin, China - (TSN);Tokyo, Japan - (NRT);Ulaanbaatar, Mongolia - (ULN);Vientiane, Laos - (VTE);Wuhan, China - (WUH);Wuxi, China - (WUX);Xi'an, China - (XIY);Yerevan, Armenia - (EVN);Zhengzhou, China - (CGO);Zuzhou, China - (CSX);Amsterdam, Netherlands - (AMS);Athens, Greece - (ATH);Barcelona, Spain - (BCN);Belgrade, Serbia - (BEG);Berlin, Germany - (TXL);Brussels, Belgium - (BRU);Bucharest, Romania - (OTP);Budapest, Hungary - (BUD);Chișinău, Moldova - (KIV);Copenhagen, Denmark - (CPH);Cork, Ireland -  (ORK);Dublin, Ireland - (DUB);Düsseldorf, Germany - (DUS);Edinburgh, United Kingdom - (EDI);Frankfurt, Germany - (FRA);Geneva, Switzerland - (GVA);Gothenburg, Sweden - (GOT);Hamburg, Germany - (HAM);Helsinki, Finland - (HEL);Istanbul, Turkey - (IST);Kyiv, Ukraine - (KBP);Lisbon, Portugal - (LIS);London, United Kingdom - (LHR);Luxembourg City, Luxembourg - (LUX);Madrid, Spain - (MAD);Manchester, United Kingdom - (MAN);Marseille, France - (MRS);Milan, Italy - (MXP);Moscow, Russia - (DME);Munich, Germany - (MUC);Nicosia, Cyprus - (LCA);Oslo, Norway - (OSL);Paris, France - (CDG);Prague, Czech Republic - (PRG);Reykjavík, Iceland - (KEF);Riga, Latvia - (RIX);Rome, Italy - (FCO);Saint Petersburg, Russia - (LED);Sofia, Bulgaria - (SOF);Stockholm, Sweden - (ARN);Tallinn, Estonia - (TLL);Thessaloniki, Greece - (SKG);Vienna, Austria - (VIE);Vilnius, Lithuania - (VNO);Warsaw, Poland - (WAW);Zagreb, Croatia - (ZAG);Zürich, Switzerland - (ZRH);Arica, Chile - (ARI);Asunción, Paraguay - (ASU);Bogotá, Colombia - (BOG);Buenos Aires, Argentina - (EZE);Curitiba, Brazil - (CWB);Fortaleza, Brazil - (FOR);Guatemala City, Guatemala - (GUA);Lima, Peru - (LIM);Medellín, Colombia - (MDE);Panama City, Panama - (PTY);Porto Alegre, Brazil - (POA);Quito, Ecuador - (UIO);Rio de Janeiro, Brazil - (GIG);São Paulo, Brazil - (GRU);Santiago, Chile - (SCL);Willemstad, Curaçao - (CUR);St. George's, Grenada - (GND);Amman, Jordan - (AMM);Baghdad, Iraq - (BGW);Baku, Azerbaijan - (GYD);Beirut, Lebanon - (BEY);Doha, Qatar - (DOH);Dubai, United Arab Emirates - (DXB);Kuwait City, Kuwait - (KWI);Manama, Bahrain - (BAH);Muscat, Oman - (MCT);Ramallah - (ZDM);Riyadh, Saudi Arabia - (RUH);Tel Aviv, Israel - (TLV);Ashburn, VA, United States - (IAD);Atlanta, GA, United States - (ATL);Boston, MA, United States - (BOS);Buffalo, NY, United States - (BUF);Calgary, AB, Canada - (YYC);Charlotte, NC, United States - (CLT);Chicago, IL, United States - (ORD);Columbus, OH, United States - (CMH);Dallas, TX, United States - (DFW);Denver, CO, United States - (DEN);Detroit, MI, United States - (DTW);Honolulu, HI, United States - (HNL);Houston, TX, United States - (IAH);Indianapolis, IN, United States - (IND);Jacksonville, FL, United States - (JAX);Kansas City, MO, United States - (MCI);Las Vegas, NV, United States - (LAS);Los Angeles, CA, United States - (LAX);McAllen, TX, United States - (MFE);Memphis, TN, United States - (MEM);Mexico City, Mexico - (MEX);Miami, FL, United States - (MIA);Minneapolis, MN, United States - (MSP);Montgomery, AL, United States - (MGM);Montréal, QC, Canada - (YUL);Nashville, TN, United States - (BNA);Newark, NJ, United States - (EWR);Norfolk, VA, United States - (ORF);Omaha, NE, United States - (OMA);Philadelphia, United States - (PHL);Phoenix, AZ, United States - (PHX);Pittsburgh, PA, United States - (PIT);Port-Au-Prince, Haiti - (PAP);Portland, OR, United States - (PDX);Queretaro, MX, Mexico - (QRO);Richmond, Virginia - (RIC);Sacramento, CA, United States - (SMF);Salt Lake City, UT, United States - (SLC);San Diego, CA, United States - (SAN);San Jose, CA, United States - (SJC);Saskatoon, SK, Canada - (YXE);Seattle, WA, United States - (SEA);St. Louis, MO, United States - (STL);Tampa, FL, United States - (TPA);Toronto, ON, Canada - (YYZ);Vancouver, BC, Canada - (YVR);Tallahassee, FL, United States - (TLH);Winnipeg, MB, Canada - (YWG);Adelaide, SA, Australia - (ADL);Auckland, New Zealand - (AKL);Brisbane, QLD, Australia - (BNE);Melbourne, VIC, Australia - (MEL);Noumea, New caledonia - (NOU);Perth, WA, Australia - (PER);Sydney, NSW, Australia - (SYD)".split(";"),e=a.split("colo=")[1].split("\n")[0],t=(a.split("colo=")[1].split("\n")[0],a.split("tls=")[1].split("\n")[0]),o=a.split("http=")[1].split("\n")[0],s=a.split("sni=")[1].split("\n")[0],r=a.split("ip=")[1].split("\n")[0],l=a.split("uag=")[1].split("\n")[0];for(var d=0;d<i.length;d++)if(-1!=i[d].indexOf(e)){document.getElementById("cdn").innerHTML=i[d];break}document.getElementById("tls").innerHTML=t,document.getElementById("http").innerHTML=o,document.getElementById("sni").innerHTML=s,document.getElementById("ip").innerHTML=r,document.getElementById("useragent").innerHTML=l}})},$(document).ready((function(){getCDNinfo()}))</script></p><p style="text-align:center">感谢陪伴与布道，开源之火不灭。​</p><p style="text-align:center"><script>document.write("本次加载耗时: "+(performance.getEntriesByType("navigation").reduce((e,r)=>e+r.responseEnd-r.startTime,0)+performance.getEntriesByType("resource").reduce((e,r)=>e+r.responseEnd-r.startTime,0)).toFixed(0)+"ms")</script></p><p style="text-align:center">当前 SNI 状态： <span id="sni">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 TLS 版本： <span id="tls">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前 HTTP 版本： <span id="http">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前您的客户端 IP 是： <span id="ip">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">当前分配的 CDN 节点是: <span id="cdn">正在统计！或可能被浏览器防追踪拦截！</span></p><p style="text-align:center">您的 UserAgent 信息是: <span id="useragent">正在统计！或可能被浏览器防追踪拦截！</span></p><p></p><script defer src="https://pv.undefined.today/tracker.min.js" data-website-id="LinuxCNMirror-tracker"></script></div></div></body></html>